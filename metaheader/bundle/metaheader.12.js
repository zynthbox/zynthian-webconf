(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{18:function(e,t,n){"use strict";n.r(t);var a=n(36),l=n.n(a),c=n(27),r=n.n(c),s=n(1),u=n.n(s),o=n(28),i=n.n(o),m=n(0),p=n.n(m),f=n(34);var h=function(e){var t,n=e.type,a=e.subType,l=e.items,c=e.item,r=e.letters,s=Object(f.c)(l),o=Object(m.useState)(null),i=u()(o,2),h=i[0],d=i[1];function E(t,n){d(n),e.onSelectItem(t)}return Object(m.useEffect)((function(){return function(){d(null)}}),[]),Object(m.useEffect)((function(){l!==s&&d(null)}),[l]),"scenes"===n?t=r.map((function(e,t){return p.a.createElement("li",{key:t},p.a.createElement("a",{className:c===e?"active":"",onClick:function(){return E(e)}},"Scene ",e))})):"item groups"===n?t=p.a.createElement(p.a.Fragment,null,p.a.createElement("li",null,p.a.createElement("a",{className:"clips"===a?"active":"",onClick:function(){return E("clips")}},"Clips (",null!==l.clips?l.clips.length:0,")")),p.a.createElement("li",null,p.a.createElement("a",{className:"patterns"===a?"active":"",onClick:function(){return E("patterns")}},"Patterns (",null!==l.patterns?l.patterns.length:0,")")),p.a.createElement("li",null,p.a.createElement("a",{className:"samples"===a?"active":"",onClick:function(){return E("samples")}},"Samples (",null!==l.samples?l.samples.length:0,")")),p.a.createElement("li",null,p.a.createElement("a",{className:"sounds"===a?"active":"",onClick:function(){return E("sounds")}},"Sounds (",null!==l.sounds?l.sounds.length:0,")")),p.a.createElement("li",null,p.a.createElement("a",{className:"tracks"===a?"active":"",onClick:function(){return E("tracks")}},"Tracks (10)")),p.a.createElement("li",null,p.a.createElement("a",{className:"songs"===a?"active":"",onClick:function(){return E("songs")}},"Songs (..)"))):"item"===n?"patterns"===a&&(t=p.a.createElement("li",null,p.a.createElement("ul",null,p.a.createElement("li",null,p.a.createElement("a",null,"Active Bar: ",c.activeBar)),p.a.createElement("li",null,p.a.createElement("a",null,"Available Bar: ",c.availableBars)),p.a.createElement("li",null,p.a.createElement("a",null,"Bank Length: ",c.bankLength)),p.a.createElement("li",null,p.a.createElement("a",null,"Enabled: ",!0===c.enabled?"true":"false")),p.a.createElement("li",null,p.a.createElement("a",null,"Start Note: ",c.gridModelStartNote)),p.a.createElement("li",null,p.a.createElement("a",null,"End Note: ",c.gridModelEndNote)),p.a.createElement("li",null,p.a.createElement("a",null,"Midi Channel: ",c.midiChannel)),p.a.createElement("li",null,p.a.createElement("a",null,"Note Length: ",c.noteLength))))):t=l.map((function(e,t){var l=e.path?e.path:"item ".concat(t+1);if("versions"===n){var c=e.path.split("/")[e.path.split("/").length-1],r=e.path.split(c)[0];l=p.a.createElement(p.a.Fragment,null,p.a.createElement("span",null,c),p.a.createElement("small",null,r))}else"items"===n&&(l=e.path?e.path:"".concat(a.substring(0,a.length-1)," ").concat(t+1),"clips"===a?l=p.a.createElement(p.a.Fragment,null,p.a.createElement("span",null,e.path),p.a.createElement("small",null,"Track: ",e.track+1)):"samples"===a?l=p.a.createElement(p.a.Fragment,null,p.a.createElement("span",null,e.path),p.a.createElement("small",null,"Track: ",e.track+1," | Slot: ",e.slot+1)):"sounds"===a?l=p.a.createElement(p.a.Fragment,null,p.a.createElement("span",null,e.preset_name),p.a.createElement("small",null,e.engine_name)):"patterns"===a&&(l=e.name));return p.a.createElement("li",{key:t},p.a.createElement("a",{className:h===t?"active":"",onClick:function(){return E(e,t)}},l))})),p.a.createElement(p.a.Fragment,null,p.a.createElement("ul",null,t))},d=n(131),E=n(366),v=n(367),k=n(365);t.default=function(e){var t,n,a,c,s,o,b=e.colorsArray,g=["a","b","c","d","e","f","g","h","i","j"],j=["clips","patterns","samples","sounds","tracks","songs"],y=Object(m.useState)([{path:"sketches/my-sketches/temp/"}]),w=u()(y,2),S=w[0],O=(w[1],Object(m.useState)(null)),x=u()(O,2),N=x[0],B=x[1],C=Object(m.useState)(null),T=u()(C,2),I=T[0],F=T[1],G=Object(m.useState)(null),M=u()(G,2),L=M[0],_=M[1],z=Object(m.useState)(null),A=u()(z,2),D=A[0],P=A[1],H=Object(m.useState)(null),J=u()(H,2),Y=J[0],Z=J[1],q=Object(m.useState)(!1),K=u()(q,2),R=K[0],V=K[1],Q=Object(m.useState)(null),U=u()(Q,2),W=U[0],X=U[1],$=Object(m.useState)(0),ee=u()($,2),te=ee[0],ne=ee[1],ae=Object(f.c)(te),le=Object(m.useState)(null),ce=u()(le,2),re=ce[0],se=ce[1],ue=Object(m.useState)(null),oe=u()(ue,2),ie=oe[0],me=oe[1],pe=Object(m.useState)(null),fe=u()(pe,2),he=fe[0],de=fe[1],Ee=Object(m.useState)(null),ve=u()(Ee,2),ke=ve[0],be=ve[1],ge=Object(m.useState)(null),je=u()(ge,2),ye=je[0],we=je[1],Se=Object(m.useState)(null),Oe=u()(Se,2),xe=Oe[0],Ne=Oe[1],Be=Object(m.useState)(null),Ce=u()(Be,2),Te=Ce[0],Ie=Ce[1];function Fe(){return(Fe=r()(i.a.mark((function e(){var t,n,a,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=N.path.split("/").join("+++"),e.next=3,fetch("http://".concat(window.location.hostname,":3000/mydata/").concat(t),{method:"GET",headers:{"Content-Type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,l=[],a.forEach((function(e,t){e.path.indexOf(N.path)>-1&&e.path.indexOf("sketch.json")>-1&&l.push(e)})),F(l);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ge(){return(Ge=r()(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://".concat(window.location.hostname,":3000/sketch/").concat(L.path.split("/").join("+++")),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,Z(n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Me(){return Le.apply(this,arguments)}function Le(){return(Le=r()(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(te),0===te?_e():1===te?(t=[],null!==ie&&(t=l()(ie)),ze(0,t,0)):2===te?Ae():3===te?(n=[],null!==ke&&(n=l()(ke)),Pe(n)):console.log("now generate tracks or songs");case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _e(){var e=Y.tracks[W],t=null!==re?l()(re):[];e.clips.forEach(function(){var e=r()(i.a.mark((function e(n,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a===g.findIndex((function(e){return e===D}))&&null!==n.path&&(n.track=a,t.push(n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),se(t),He()}function ze(e,t,n){var a=e||0,c=t?l()(t):[],s=(g[W],"/home/pi/zynthian-my-data/".concat(N.path,"sequences/scene-").concat(D,"/patterns/scene-").concat(D,"-").concat(W+1).concat(g[n],".pattern.json"));fetch("http://".concat(window.location.hostname,":3000/json/").concat(s.split("/").join("+++")),{method:"GET",headers:{"Content-Type":"application/json"}}).catch((function(e){console.log(e,"error")})).then(function(){var e=r()(i.a.mark((function e(t){var l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(500!==t.status){e.next=3;break}e.next=7;break;case 3:return e.next=5,t.json();case 5:(l=e.sent)&&!0===l.hasNotes&&(l.name="scene-".concat(D,"-").concat(W+1).concat(g[n]),c.push(l));case 7:n+1>=5?(me(c),He()):ze(a,c,n+1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}function Ae(){return De.apply(this,arguments)}function De(){return(De=r()(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=null!==he?l()(he):[],fetch("http://".concat(window.location.hostname,":3000/track/").concat(W+1),{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(){var e=r()(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(500!==n.status){e.next=4;break}return de(t),He(),e.abrupt("return");case 4:return e.next=6,n.json();case 6:e.sent.forEach((function(e,n){null!==e&&(e.track=W,e.slot=n,t.push(e))})),de(t),He();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pe(e){var t=Y.tracks[W],n=e?l()(e):[];fetch("http://".concat(window.location.hostname,":3000/json/").concat("/home/pi/zynthian-my-data/snapshots/last_state.zss".split("/").join("+++")),{method:"GET",headers:{"Content-Type":"application/json"}}).catch((function(e){})).then(function(){var e=r()(i.a.mark((function e(a){var l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.json();case 2:l=e.sent,t.chainedSounds.forEach((function(e,t){e>=0&&l.layers.forEach((function(t,a){"MIDI Synth"===t.engine_type&&t.midi_chan===e&&n.push(t)}))})),be(n),He();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}function He(){var e=te+1;e===j.length-2&&(e=0),ne(e)}if(Object(m.useEffect)((function(){null!==N&&function(){Fe.apply(this,arguments)}()}),[N]),Object(m.useEffect)((function(){null!==L&&(!function(){Ge.apply(this,arguments)}(),P(null),se(null),me(null),de(null),be(null),Ne(null),we(null))}),[L]),Object(m.useEffect)((function(){se(null),me(null),de(null),be(null),Ne(null),we(null)}),[D]),Object(m.useEffect)((function(){null!==Y&&null!==D&&V(!0)}),[Y,D]),Object(m.useEffect)((function(){!0===R&&X(0)}),[R]),Object(m.useEffect)((function(){null!==te&&(console.log(te,"IGTGI"),console.log(ae,"prev igtgi"),console.log(j.length-3),0===te&&ae===j.length-3?(console.log("FINISH!!!!!"),W+1>=Y.tracks.length?(we({clips:re,patterns:ie,samples:he,sounds:ke,tracks:[0,1,2,3,4,5,6,7,8,9],songs:[0,1,2]}),V(!1)):X(W+1)):(console.log("DONT FINISH!!!!!"),null!==te&&Me()))}),[te]),Object(m.useEffect)((function(){null!==te&&Me()}),[W]),null!==I&&(t=p.a.createElement(h,{type:"versions",items:I,onSelectItem:_,color:b[1]})),null!==L&&(n=p.a.createElement(h,{type:"scenes",onSelectItem:P,item:D,color:b[2],letters:g})),null!==ye&&(a=p.a.createElement(h,{type:"item groups",items:ye,subType:j[xe],onSelectItem:function(e){var t=j.findIndex((function(t,n){return e===t}));Ne(t)},color:b[3]})),null!==xe){var Je=ye[j[xe]];c=p.a.createElement(h,{type:"items",subType:j[xe],items:Je,onSelectItem:Ie,color:b[4]})}return null!==Te&&(s=p.a.createElement("div",{className:"sketch-pad-xtractor-row"},p.a.createElement("div",{style:{backgroundColor:b[5]},className:"sketch-pad-xtractor-column full"},p.a.createElement("h4",null,p.a.createElement(k.a,null),"Details"),p.a.createElement(h,{type:"item",subType:j[xe],item:Te,color:b[5]})))),!0===R&&(o=p.a.createElement("div",{className:"loader-container"},p.a.createElement("div",{className:"lds-ellipsis"},p.a.createElement("div",null),p.a.createElement("div",null),p.a.createElement("div",null),p.a.createElement("div",null)))),p.a.createElement("div",{id:"sketch-pad-xtractor"},p.a.createElement("div",{className:"sketch-pad-xtractor-row"},p.a.createElement("div",{className:"sketch-pad-xtractor-column",style:{backgroundColor:b[0]}},p.a.createElement("h4",null,p.a.createElement(d.c,null),"Folders"),p.a.createElement(h,{type:"folders",items:S,onSelectItem:B,color:b[0]})),p.a.createElement("div",{className:"sketch-pad-xtractor-column",style:{backgroundColor:b[1]}},p.a.createElement("h4",null,p.a.createElement(E.a,null),"Versions"),t),p.a.createElement("div",{className:"sketch-pad-xtractor-column",style:{backgroundColor:b[2]}},p.a.createElement("h4",null,p.a.createElement(d.d,null),"Scenes"),n),p.a.createElement("div",{className:"sketch-pad-xtractor-column",style:{backgroundColor:b[3]}},o,p.a.createElement("h4",null,p.a.createElement(v.a,null),"Item Groups"),a),p.a.createElement("div",{className:"sketch-pad-xtractor-column",style:{backgroundColor:b[4]}},p.a.createElement("h4",null,p.a.createElement(d.d,null),"Items"),c)),s)}},34:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return r}));var a=n(0);function l(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=t?1e3:1024;if(Math.abs(e)<a)return e+" B";var l=t?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],c=-1,r=Math.pow(10,n);do{e/=a,++c}while(Math.round(Math.abs(e)*r)/r>=a&&c<l.length-1);return e.toFixed(n)+" "+l[c]}function c(e,t){Object(a.useEffect)((function(){var n=function(n){e.current&&!e.current.contains(n.target)&&t(n)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),function(){document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[e,t])}function r(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e}),[e]),t.current}}}]);