(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{17:function(e,t,n){"use strict";n.r(t);var a=n(35),c=n.n(a),l=n(27),r=n.n(l),u=n(1),s=n.n(u),o=n(28),i=n.n(o),m=n(0),p=n.n(m),f=n(36),h=n(131),d=n(365),E=n(366),v=n(367);function b(e){var t,n=e.type,a=e.subType,c=e.items,l=e.item,r=Object(f.c)(c),u=Object(m.useState)(null),o=s()(u,2),i=o[0],h=o[1];function d(t,n){h(n),e.onSelectItem(t)}return Object(m.useEffect)((function(){return function(){h(null)}}),[]),Object(m.useEffect)((function(){c!==r&&h(null)}),[c]),"item groups"===n?t=p.a.createElement(p.a.Fragment,null,p.a.createElement("li",null,p.a.createElement("a",{className:"clips"===a?"active":"",onClick:function(){return d("clips")}},"Clips (",null!==c.clips?c.clips.length:0,")")),p.a.createElement("li",null,p.a.createElement("a",{className:"patterns"===a?"active":"",onClick:function(){return d("patterns")}},"Patterns (",null!==c.patterns?c.patterns.length:0,")")),p.a.createElement("li",null,p.a.createElement("a",{className:"samples"===a?"active":"",onClick:function(){return d("samples")}},"Samples (",null!==c.samples?c.samples.length:0,")")),p.a.createElement("li",null,p.a.createElement("a",{className:"sounds"===a?"active":"",onClick:function(){return d("sounds")}},"Sounds (",null!==c.sounds?c.sounds.length:0,")"))):"item"===n?"patterns"===a&&(t=p.a.createElement("li",null,p.a.createElement("ul",null,p.a.createElement("li",null,p.a.createElement("a",null,"Active Bar: ",l.activeBar)),p.a.createElement("li",null,p.a.createElement("a",null,"Available Bar: ",l.availableBars)),p.a.createElement("li",null,p.a.createElement("a",null,"Bank Length: ",l.bankLength)),p.a.createElement("li",null,p.a.createElement("a",null,"Enabled: ",!0===l.enabled?"true":"false")),p.a.createElement("li",null,p.a.createElement("a",null,"Start Note: ",l.gridModelStartNote)),p.a.createElement("li",null,p.a.createElement("a",null,"End Note: ",l.gridModelEndNote)),p.a.createElement("li",null,p.a.createElement("a",null,"Midi Channel: ",l.midiChannel)),p.a.createElement("li",null,p.a.createElement("a",null,"Note Length: ",l.noteLength))))):t=c.map((function(e,t){var c=e.path?e.path:"item ".concat(t+1);if("versions"===n){var l=e.path.split("/")[e.path.split("/").length-1],r=e.path.split(l)[0];c=p.a.createElement(p.a.Fragment,null,p.a.createElement("span",null,l),p.a.createElement("small",null,r))}return"sounds"===a?c=p.a.createElement(p.a.Fragment,null,p.a.createElement("span",null,e.preset_name),p.a.createElement("small",null,e.engine_name)):"patterns"===a&&(c=e.name),p.a.createElement("li",{key:t},p.a.createElement("a",{className:i===t?"active":"",onClick:function(){return d(e,t)}},c))})),p.a.createElement(p.a.Fragment,null,p.a.createElement("ul",null,t))}t.default=function(e){var t,n,a,l,u,o=e.colorsArray,j=["a","b","c","d","e","f","g","h","i","j"],y=["clips","patterns","samples","sounds"],k=Object(m.useState)([{path:"sketches/my-sketches/temp/"}]),w=s()(k,2),g=w[0],O=(w[1],Object(m.useState)(null)),x=s()(O,2),S=x[0],B=x[1],C=Object(m.useState)(null),N=s()(C,2),T=N[0],I=N[1],M=Object(m.useState)(null),G=s()(M,2),L=G[0],F=G[1],_=Object(m.useState)(null),z=s()(_,2),A=z[0],P=z[1],D=Object(m.useState)(!1),J=s()(D,2),Y=J[0],Z=J[1],q=Object(m.useState)(null),K=s()(q,2),R=K[0],V=K[1],H=Object(m.useState)(0),Q=s()(H,2),U=Q[0],W=Q[1],X=Object(f.c)(U),$=Object(m.useState)(null),ee=s()($,2),te=ee[0],ne=ee[1],ae=Object(m.useState)(null),ce=s()(ae,2),le=ce[0],re=ce[1],ue=Object(m.useState)(null),se=s()(ue,2),oe=se[0],ie=se[1],me=Object(m.useState)(null),pe=s()(me,2),fe=pe[0],he=pe[1],de=Object(m.useState)(null),Ee=s()(de,2),ve=Ee[0],be=Ee[1],je=Object(m.useState)(null),ye=s()(je,2),ke=ye[0],we=ye[1],ge=Object(m.useState)(null),Oe=s()(ge,2),xe=Oe[0],Se=Oe[1];function Be(){return(Be=r()(i.a.mark((function e(){var t,n,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=S.path.split("/").join("+++"),e.next=3,fetch("http://".concat(window.location.hostname,":3000/mydata/").concat(t),{method:"GET",headers:{"Content-Type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,c=[],a.forEach((function(e,t){e.path.indexOf(S.path)>-1&&e.path.indexOf("sketch.json")>-1&&c.push(e)})),I(c);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(){return(Ce=r()(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://".concat(window.location.hostname,":3000/sketch/").concat(L.path.split("/").join("+++")),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,P(n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ne(){return Te.apply(this,arguments)}function Te(){return(Te=r()(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0===U?Ie():1===U?(t=[],null!==le&&(t=c()(le)),Me(0,t,0)):2===U?Ge():3===U&&(n=[],null!==fe&&(n=c()(fe)),Fe(n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(){var e=A.tracks[R],t=null!==te?c()(te):[];e.clips.forEach(function(){var e=r()(i.a.mark((function e(n,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!==n.path&&t.push(n);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),ne(t),_e()}function Me(e,t,n){var a=e||0,l=t?c()(t):[],u=j[R],s="/home/pi/zynthian-my-data/".concat(S.path,"sequences/scene-").concat(u,"/patterns/scene-").concat(u,"-").concat(a+1).concat(j[n],".pattern.json");fetch("http://".concat(window.location.hostname,":3000/json/").concat(s.split("/").join("+++")),{method:"GET",headers:{"Content-Type":"application/json"}}).catch((function(e){console.log(e,"error")})).then(function(){var e=r()(i.a.mark((function e(t){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(500!==t.status){e.next=3;break}e.next=7;break;case 3:return e.next=5,t.json();case 5:(c=e.sent)&&!0===c.hasNotes&&(c.name="scene-".concat(u,"-").concat(a).concat(j[n]),l.push(c));case 7:n+1>=5?a+1>=10?(re(l),_e()):Me(a+1,l,0):Me(a,l,n+1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}function Ge(){return Le.apply(this,arguments)}function Le(){return(Le=r()(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=null!==oe?c()(oe):[],fetch("http://".concat(window.location.hostname,":3000/track/").concat(R+1),{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(){var e=r()(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(500!==n.status){e.next=4;break}return ie(t),_e(),e.abrupt("return");case 4:return e.next=6,n.json();case 6:e.sent.forEach((function(e,n){null!==e&&t.push(e)})),ie(t),_e();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fe(e){var t=A.tracks[R],n=e?c()(e):[];fetch("http://".concat(window.location.hostname,":3000/json/").concat("/home/pi/zynthian-my-data/snapshots/last_state.zss".split("/").join("+++")),{method:"GET",headers:{"Content-Type":"application/json"}}).catch((function(e){})).then(function(){var e=r()(i.a.mark((function e(a){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.json();case 2:c=e.sent,t.chainedSounds.forEach((function(e,t){e>=0&&c.layers.forEach((function(t,a){"MIDI Synth"===t.engine_type&&t.midi_chan===e&&n.push(t)}))})),he(n),_e();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}function _e(){var e=U+1;e===y.length&&(e=0),W(e)}if(Object(m.useEffect)((function(){null!==S&&function(){Be.apply(this,arguments)}()}),[S]),Object(m.useEffect)((function(){null!==L&&(!function(){Ce.apply(this,arguments)}(),ne(null),re(null),ie(null),he(null),we(null),be(null))}),[L]),Object(m.useEffect)((function(){null!==A&&Z(!0)}),[A]),Object(m.useEffect)((function(){!0===Y&&V(0)}),[Y]),Object(m.useEffect)((function(){null!==U&&(0===U&&X===y.length-1?R+1>=A.tracks.length?(be({clips:te,patterns:le,samples:oe,sounds:fe}),Z(!1)):V(R+1):null!==U&&Ne())}),[U]),Object(m.useEffect)((function(){null!==U&&Ne()}),[R]),null!==T&&(t=p.a.createElement(b,{type:"versions",items:T,onSelectItem:F,color:o[1]})),null!==ve&&(n=p.a.createElement(b,{type:"item groups",items:ve,subType:y[ke],onSelectItem:function(e){var t=y.findIndex((function(t,n){return e===t}));we(t)},color:o[2]})),null!==ke){var ze=ve[y[ke]];a=p.a.createElement(b,{type:"items",subType:y[ke],items:ze,onSelectItem:Se,color:o[3]})}return null!==xe&&(l=p.a.createElement(b,{type:"item",subType:y[ke],item:xe,color:o[4]})),!0===Y&&(u=p.a.createElement("div",{className:"loader-container"},p.a.createElement("div",{className:"lds-ellipsis"},p.a.createElement("div",null),p.a.createElement("div",null),p.a.createElement("div",null),p.a.createElement("div",null)))),p.a.createElement("div",{id:"sketch-pad-xtractor"},p.a.createElement("div",{className:"sketch-pad-xtractor-column",style:{backgroundColor:o[0]}},p.a.createElement("h4",null,p.a.createElement(h.c,null),"Folders"),p.a.createElement(b,{type:"folders",items:g,onSelectItem:B,color:o[0]})),p.a.createElement("div",{className:"sketch-pad-xtractor-column",style:{backgroundColor:o[1]}},p.a.createElement("h4",null,p.a.createElement(d.a,null),"Versions"),t),p.a.createElement("div",{className:"sketch-pad-xtractor-column",style:{backgroundColor:o[2]}},u,p.a.createElement("h4",null,p.a.createElement(E.a,null),"Item Groups"),n),p.a.createElement("div",{className:"sketch-pad-xtractor-column",style:{backgroundColor:o[3]}},p.a.createElement("h4",null,p.a.createElement(h.d,null),"Items"),a),p.a.createElement("div",{className:"sketch-pad-xtractor-column",style:{backgroundColor:o[4]}},p.a.createElement("h4",null,p.a.createElement(v.a,null),"Details"),l))}},36:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return r}));var a=n(0);function c(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=t?1e3:1024;if(Math.abs(e)<a)return e+" B";var c=t?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],l=-1,r=Math.pow(10,n);do{e/=a,++l}while(Math.round(Math.abs(e)*r)/r>=a&&l<c.length-1);return e.toFixed(n)+" "+c[l]}function l(e,t){Object(a.useEffect)((function(){var n=function(n){e.current&&!e.current.contains(n.target)&&t(n)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),function(){document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[e,t])}function r(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e}),[e]),t.current}}}]);