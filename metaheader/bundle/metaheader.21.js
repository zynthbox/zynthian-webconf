(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[21],{

/***/ "./store/favorites/favorites.js":
/*!**************************************!*\
  !*** ./store/favorites/favorites.js ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/extends */ \"./node_modules/@babel/runtime/helpers/extends.js\");\n/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"./node_modules/@babel/runtime/helpers/asyncToGenerator.js\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"./node_modules/@babel/runtime/helpers/defineProperty.js\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"./node_modules/@babel/runtime/regenerator/index.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var react_beautiful_dnd__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-beautiful-dnd */ \"./node_modules/react-beautiful-dnd/dist/react-beautiful-dnd.esm.js\");\n/* harmony import */ var _src_app_loading_spinner__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../src/app/loading-spinner */ \"./src/app/loading-spinner.js\");\n\n\n\n\n\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\n\n\n\n\nvar getFavListTemplateArray = function getFavListTemplateArray(currentLists) {\n  var favoriteListsArray = [{\n    title: 'Drums/Perc',\n    items: []\n  }, {\n    title: 'Bass',\n    items: []\n  }, {\n    title: 'Leads (Mono)',\n    items: []\n  }, {\n    title: 'Keys (Poly)',\n    items: []\n  }, {\n    title: 'Pads/Strings',\n    items: []\n  }, {\n    title: 'FX/Other',\n    items: []\n  }];\n\n  if (currentLists) {\n    favoriteListsArray.forEach(function (cl, index) {\n      cl.items = currentLists[index].items;\n    });\n  }\n\n  return favoriteListsArray;\n};\n\nvar reorder = function reorder(list, startIndex, endIndex) {\n  var result = Array.from(list);\n\n  var _result$splice = result.splice(startIndex, 1),\n      _result$splice2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(_result$splice, 1),\n      removed = _result$splice2[0];\n\n  result.splice(endIndex, 0, removed);\n  return result;\n};\n/**\r\n * Moves an item from one list to another list.\r\n */\n\n\nvar move = function move(source, destination, droppableSource, droppableDestination) {\n  var sourceClone = Array.from(source.items);\n  var destClone = Array.from(destination.items);\n\n  var _sourceClone$splice = sourceClone.splice(droppableSource.index, 1),\n      _sourceClone$splice2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(_sourceClone$splice, 1),\n      removed = _sourceClone$splice2[0];\n\n  destClone.splice(droppableDestination.index, 0, removed);\n  var result = {};\n  result[droppableSource.droppableId] = sourceClone;\n  result[droppableDestination.droppableId] = destClone;\n  return result;\n};\n\nvar grid = 4;\n\nvar getItemStyle = function getItemStyle(isDragging, draggableStyle) {\n  return _objectSpread({\n    // some basic styles to make the items look a bit nicer\n    userSelect: \"none\",\n    padding: grid,\n    margin: \"0 0 \".concat(grid, \"px 0\"),\n    // change background colour if dragging\n    background: isDragging ? \"lightgreen\" : \"#fefefe\"\n  }, draggableStyle);\n};\n\nvar getListStyle = function getListStyle(isDraggingOver) {\n  return {\n    background: isDraggingOver ? \"lightblue\" : \"\",\n    padding: grid,\n    width: '100%'\n  };\n};\n\nfunction Favorites(props) {\n  var colorsArray = props.colorsArray;\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useState\"])(true),\n      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useState\"])(null),\n      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(_useState3, 2),\n      state = _useState4[0],\n      setState = _useState4[1];\n\n  Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useEffect\"])(function () {\n    getFavoritesJson();\n  }, []);\n\n  function getFavoritesJson() {\n    return _getFavoritesJson.apply(this, arguments);\n  }\n\n  function _getFavoritesJson() {\n    _getFavoritesJson = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.mark(function _callee() {\n      var response, res, presetsArray;\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setLoading(true);\n              _context.next = 3;\n              return fetch(\"http://\".concat(window.location.hostname, \":3000/favorites/\"), {\n                method: 'GET',\n                headers: {\n                  'Content-Type': 'application/json'\n                }\n              });\n\n            case 3:\n              response = _context.sent;\n              _context.next = 6;\n              return response.json();\n\n            case 6:\n              res = _context.sent;\n              presetsArray = [];\n              res.forEach(function (jf, index) {\n                for (var i in jf.json) {\n                  var subArray = jf.json[i];\n\n                  for (var ii in subArray) {\n                    presetsArray.push(subArray[ii]);\n                  }\n                }\n              });\n              updateState(presetsArray);\n              setLoading(false);\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _getFavoritesJson.apply(this, arguments);\n  }\n\n  function updateState(presetsArray, listIndex) {\n    var newState = getFavListTemplateArray(state);\n    var updatedListIndex = newState.length - 1;\n    if (listIndex) updatedListIndex = listIndex;\n    newState[updatedListIndex].items = presetsArray;\n    setState(newState);\n  }\n\n  function onDragEnd(result) {\n    var source = result.source,\n        destination = result.destination; // dropped outside the list\n\n    if (!destination) {\n      return;\n    }\n\n    var sInd = +source.droppableId;\n    var dInd = +destination.droppableId;\n    var newState;\n\n    if (sInd === dInd) {\n      var items = reorder(state[sInd].items, source.index, destination.index);\n      newState = getFavListTemplateArray(state);\n      newState[sInd] = {\n        title: state[sInd].title,\n        items: items\n      };\n    } else {\n      var _result = move(state[sInd], state[dInd], source, destination);\n\n      newState = getFavListTemplateArray(state);\n      newState[sInd].items = _result[sInd];\n      newState[dInd].items = _result[dInd];\n    }\n\n    setState(newState);\n  }\n\n  var favColumnsDisplay;\n\n  if (state !== null) {\n    favColumnsDisplay = state.map(function (el, ind) {\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(FavColumn, {\n        key: ind,\n        el: el,\n        ind: ind,\n        state: state,\n        color: colorsArray[ind],\n        setState: setState\n      });\n    });\n  }\n  /* RENDER */\n\n\n  var favRowDisplay = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_src_app_loading_spinner__WEBPACK_IMPORTED_MODULE_7__[\"default\"], null);\n\n  if (loading === false) {\n    favRowDisplay = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"div\", {\n      className: \"fav-row\"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(react_beautiful_dnd__WEBPACK_IMPORTED_MODULE_6__[\"DragDropContext\"], {\n      onDragEnd: onDragEnd\n    }, favColumnsDisplay));\n  }\n\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"div\", {\n    id: \"favorites\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"div\", {\n    id: \"fav-grid\"\n  }, favRowDisplay));\n}\n\nvar FavColumn = function FavColumn(props) {\n  var el = props.el,\n      ind = props.ind,\n      color = props.color,\n      state = props.state,\n      setState = props.setState;\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"div\", {\n    className: \"fav-column\",\n    style: {\n      backgroundColor: color\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"div\", {\n    className: \"fav-column-header\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"h4\", null, el.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"div\", {\n    className: \"fav-column-list\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(react_beautiful_dnd__WEBPACK_IMPORTED_MODULE_6__[\"Droppable\"], {\n    key: ind,\n    droppableId: \"\".concat(ind)\n  }, function (provided, snapshot) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"div\", _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({\n      className: \"fav-column-list-wrapper\",\n      ref: provided.innerRef,\n      style: getListStyle(snapshot.isDraggingOver)\n    }, provided.droppableProps), el.items.map(function (item, index) {\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(FavColumnListItem, {\n        key: index,\n        item: item,\n        ind: ind,\n        index: index,\n        provided: provided,\n        state: state,\n        setState: setState\n      });\n    }), provided.placeholder);\n  })));\n};\n\nvar FavColumnListItem = function FavColumnListItem(props) {\n  var item = props.item,\n      ind = props.ind,\n      index = props.index,\n      state = props.state,\n      setState = props.setState;\n  var draggableId = index + \"-\" + ind;\n  var itemContent = item[2];\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(react_beautiful_dnd__WEBPACK_IMPORTED_MODULE_6__[\"Draggable\"], {\n    key: draggableId,\n    draggableId: draggableId,\n    index: index\n  }, function (provided, snapshot) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"div\", _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({\n      ref: provided.innerRef\n    }, provided.draggableProps, provided.dragHandleProps, {\n      style: getItemStyle(snapshot.isDragging, provided.draggableProps.style)\n    }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"div\", {\n      className: \"fav-list-item\"\n    }, itemContent));\n  });\n}; // <button\n// type=\"button\"\n// onClick={() => {\n//   const newState = [...state];\n//   newState[ind].items.splice(index, 1);\n//   setState(\n//     newState.filter(group => group.items.length)\n//   );\n// }}\n// >\n// <RiDeleteBin2Fill/>\n// </button>\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Favorites);\n\n//# sourceURL=webpack:///./store/favorites/favorites.js?");

/***/ })

}]);