(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{15:function(e,t,n){"use strict";n.r(t);var a=n(43),c=n.n(a),r=n(25),l=n.n(r),s=n(1),u=n.n(s),o=n(26),i=n.n(o),p=n(0),m=n.n(p),f=n(34),h=n(127),d=n(368),E=n(369);function v(e){var t,n=e.type,a=e.subType,c=e.items,r=Object(f.c)(c),l=Object(p.useState)(null),s=u()(l,2),o=s[0],i=s[1];function h(t,n){i(n),e.onSelectItem(t)}return Object(p.useEffect)((function(){return function(){i(null)}}),[]),Object(p.useEffect)((function(){c!==r&&i(null)}),[c]),t="item groups"===n?m.a.createElement(m.a.Fragment,null,m.a.createElement("li",null,m.a.createElement("a",{className:"clips"===a?"active":"",onClick:function(){return h("clips")}},"Clips (",null!==c.clips?c.clips.length:0,")")),m.a.createElement("li",null,m.a.createElement("a",{className:"patterns"===a?"active":"",onClick:function(){return h("patterns")}},"Patterns (",null!==c.patterns?c.patterns.length:0,")")),m.a.createElement("li",null,m.a.createElement("a",{className:"samples"===a?"active":"",onClick:function(){return h("samples")}},"Samples (",null!==c.samples?c.samples.length:0,")")),m.a.createElement("li",null,m.a.createElement("a",{className:"sounds"===a?"active":"",onClick:function(){return h("sounds")}},"Sounds (",null!==c.sounds?c.sounds.length:0,")"))):c.map((function(e,t){var c=e.path?e.path:"item ".concat(t+1);if("versions"===n){var r=e.path.split("/")[e.path.split("/").length-1],l=e.path.split(r)[0];c=m.a.createElement(m.a.Fragment,null,m.a.createElement("span",null,r),m.a.createElement("small",null,l))}return"sounds"===a?c=m.a.createElement(m.a.Fragment,null,m.a.createElement("span",null,e.preset_name),m.a.createElement("small",null,e.engine_name)):"patterns"===a&&(c=e.name),m.a.createElement("li",{key:t},m.a.createElement("a",{className:o===t?"active":"",onClick:function(){return h(e,t)}},c))})),m.a.createElement(m.a.Fragment,null,m.a.createElement("ul",null,t))}t.default=function(e){var t,n,a,r,s=e.colorsArray,o=["a","b","c","d","e","f","g","h","i","j"],j=["clips","patterns","samples","sounds"],b=Object(p.useState)([{path:"sketches/my-sketches/temp/"}]),y=u()(b,2),k=y[0],w=(y[1],Object(p.useState)(null)),O=u()(w,2),x=O[0],g=O[1],S=Object(p.useState)(null),B=u()(S,2),C=B[0],T=B[1],N=Object(p.useState)(null),I=u()(N,2),G=I[0],M=I[1],F=Object(p.useState)(null),_=u()(F,2),L=_[0],z=_[1],P=Object(p.useState)(!1),J=u()(P,2),Y=J[0],Z=J[1],q=Object(p.useState)(null),A=u()(q,2),D=A[0],K=A[1],R=Object(p.useState)(0),V=u()(R,2),H=V[0],Q=V[1],U=Object(f.c)(H),W=Object(p.useState)(null),X=u()(W,2),$=X[0],ee=X[1],te=Object(p.useState)(null),ne=u()(te,2),ae=ne[0],ce=ne[1],re=Object(p.useState)(null),le=u()(re,2),se=le[0],ue=le[1],oe=Object(p.useState)(null),ie=u()(oe,2),pe=ie[0],me=ie[1],fe=Object(p.useState)(null),he=u()(fe,2),de=he[0],Ee=he[1],ve=Object(p.useState)(null),je=u()(ve,2),be=je[0],ye=je[1],ke=Object(p.useState)(null),we=u()(ke,2),Oe=(we[0],we[1]);function xe(){return(xe=l()(i.a.mark((function e(){var t,n,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.path.split("/").join("+++"),e.next=3,fetch("http://".concat(window.location.hostname,":3000/mydata/").concat(t),{method:"GET",headers:{"Content-Type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,c=[],a.forEach((function(e,t){e.path.indexOf(x.path)>-1&&e.path.indexOf("sketch.json")>-1&&c.push(e)})),T(c);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(){return(ge=l()(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://".concat(window.location.hostname,":3000/sketch/").concat(G.path.split("/").join("+++")),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,z(n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Se(){return Be.apply(this,arguments)}function Be(){return(Be=l()(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0===H?Ce():1===H?(t=[],null!==ae&&(t=c()(ae)),Te(0,t)):2===H?Ne():3===H&&(n=[],null!==pe&&(n=c()(pe)),Ge(n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(){var e=L.tracks[D],t=null!==$?c()($):[];e.clips.forEach(function(){var e=l()(i.a.mark((function e(n,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!==n.path&&t.push(n);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),ee(t),Me()}function Te(e,t){var n=e||0,a=t?c()(t):[],r=o[D],s="/home/pi/zynthian-my-data/".concat(x.path,"sequences/scene-").concat(r,"/patterns/scene-").concat(r,"-").concat(n+1,".pattern.json");fetch("http://".concat(window.location.hostname,":3000/json/").concat(s.split("/").join("+++")),{method:"GET",headers:{"Content-Type":"application/json"}}).catch((function(e){console.log(e,"error")})).then(function(){var e=l()(i.a.mark((function e(t){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(500!==t.status){e.next=3;break}e.next=7;break;case 3:return e.next=5,t.json();case 5:(c=e.sent)&&!0===c.hasNotes&&(c.name="scene-".concat(r,"-").concat(n),a.push(c));case 7:n+1>=10?(ce(a),Me()):Te(n+1,a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}function Ne(){return Ie.apply(this,arguments)}function Ie(){return(Ie=l()(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=null!==se?c()(se):[],fetch("http://".concat(window.location.hostname,":3000/track/").concat(D+1),{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(){var e=l()(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(500!==n.status){e.next=4;break}return ue(t),Me(),e.abrupt("return");case 4:return e.next=6,n.json();case 6:e.sent.forEach((function(e,n){null!==e&&t.push(e)})),ue(t),Me();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ge(e){var t=L.tracks[D],n=e?c()(e):[];fetch("http://".concat(window.location.hostname,":3000/json/").concat("/home/pi/zynthian-my-data/snapshots/last_state.zss".split("/").join("+++")),{method:"GET",headers:{"Content-Type":"application/json"}}).catch((function(e){})).then(function(){var e=l()(i.a.mark((function e(a){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.json();case 2:c=e.sent,t.chainedSounds.forEach((function(e,t){e>=0&&c.layers.forEach((function(t,a){"MIDI Synth"===t.engine_type&&t.midi_chan===e&&n.push(t)}))})),me(n),Me();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}function Me(){var e=H+1;e===j.length&&(e=0),Q(e)}if(Object(p.useEffect)((function(){null!==x&&function(){xe.apply(this,arguments)}()}),[x]),Object(p.useEffect)((function(){null!==G&&(!function(){ge.apply(this,arguments)}(),ee(null),ce(null),ue(null),me(null),ye(null),Ee(null))}),[G]),Object(p.useEffect)((function(){null!==L&&Z(!0)}),[L]),Object(p.useEffect)((function(){!0===Y&&K(0)}),[Y]),Object(p.useEffect)((function(){null!==H&&(0===H&&U===j.length-1?D+1>=L.tracks.length?(Ee({clips:$,patterns:ae,samples:se,sounds:pe}),Z(!1)):K(D+1):null!==H&&Se())}),[H]),Object(p.useEffect)((function(){null!==H&&Se()}),[D]),null!==C&&(t=m.a.createElement(v,{type:"versions",items:C,onSelectItem:M,color:s[1]})),null!==de&&(n=m.a.createElement(v,{type:"item groups",items:de,subType:j[be],onSelectItem:function(e){var t=j.findIndex((function(t,n){return e===t}));ye(t)},color:s[2]})),null!==be){var Fe=de[j[be]];a=m.a.createElement(v,{type:"items",subType:j[be],items:Fe,onSelectItem:Oe,color:s[3]})}return!0===Y&&(r=m.a.createElement("div",{className:"loader-container"},m.a.createElement("div",{className:"lds-ellipsis"},m.a.createElement("div",null),m.a.createElement("div",null),m.a.createElement("div",null),m.a.createElement("div",null)))),m.a.createElement("div",{id:"sketch-pad-xtractor"},m.a.createElement("div",{className:"sketch-pad-xtractor-column",style:{backgroundColor:s[0]}},m.a.createElement("h4",null,m.a.createElement(h.c,null),"Folders"),m.a.createElement(v,{type:"folders",items:k,onSelectItem:g,color:s[0]})),m.a.createElement("div",{className:"sketch-pad-xtractor-column",style:{backgroundColor:s[1]}},m.a.createElement("h4",null,m.a.createElement(d.a,null),"Versions"),t),m.a.createElement("div",{className:"sketch-pad-xtractor-column",style:{backgroundColor:s[2]}},r,m.a.createElement("h4",null,m.a.createElement(E.a,null),"Item Groups"),n),m.a.createElement("div",{className:"sketch-pad-xtractor-column",style:{backgroundColor:s[3]}},m.a.createElement("h4",null,m.a.createElement(h.d,null),"Items"),a),m.a.createElement("div",{className:"sketch-pad-xtractor-column",style:{backgroundColor:s[4]}}))}},34:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return l}));var a=n(0);function c(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=t?1e3:1024;if(Math.abs(e)<a)return e+" B";var c=t?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],r=-1,l=Math.pow(10,n);do{e/=a,++r}while(Math.round(Math.abs(e)*l)/l>=a&&r<c.length-1);return e.toFixed(n)+" "+c[r]}function r(e,t){Object(a.useEffect)((function(){var n=function(n){e.current&&!e.current.contains(n.target)&&t(n)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),function(){document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[e,t])}function l(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e}),[e]),t.current}}}]);