(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{376:function(e,t,n){"use strict";n.r(t);var a=n(27),r=n.n(a),i=n(1),l=n.n(i),o=n(28),c=n.n(o),s=n(0),u=n.n(s),p=n(91),f=n(49),d=n.n(f),m=n(36),h=n.n(m),b=n(72),v=n.n(b),w=n(136),E=n(369),g=n(133),y=n(368),F=n(34);var O=function(e){var t=e.file,n=e.index,a=e.uploadProgress,r=a;return a>0&&(r=parseInt(100*a/t.size)),u.a.createElement("div",{className:"file-uploader-list-item"},u.a.createElement("div",{className:"list-item-file-info"},u.a.createElement("span",{className:"file-name"},t.path),u.a.createElement("span",{className:"file-size"},Object(F.a)(t.size))),u.a.createElement("div",{className:"list-item-progress-container"},u.a.createElement("div",{className:"list-item-progress-bar",style:{width:r+"%"}},u.a.createElement("span",null,Object(F.a)(a)))),u.a.createElement("div",{className:"list-item-actions"},u.a.createElement("a",{className:"button",onClick:function(){return e.renameFile(n)}},u.a.createElement(g.a,null)),u.a.createElement("a",{className:"button",onClick:function(){return e.uploadFile(n)}},u.a.createElement(y.a,null)),u.a.createElement("a",{className:"button",onClick:function(){return e.removeFile(n)}},u.a.createElement(E.a,null))))},j=function(e){var t=e.selectedFolder,n=e.fsep,a=Object(s.useCallback)((function(e){var t=[];for(var n in e)t[n]=null!==N?N[n]:0;C(t),g(e)}),[]),i=Object(w.b)({onDrop:a}),o=i.getRootProps,p=i.getInputProps,f=i.isDragActive,m=Object(s.useState)(null),b=l()(m,2),E=b[0],g=b[1],y=Object(s.useState)(""),F=l()(y,2),j=F[0],x=F[1],S=Object(s.useState)(null),k=l()(S,2),N=k[0],C=k[1],D=Object(s.useState)(!1),P=l()(D,2),U=P[0],M=P[1],T=Object(s.useState)(null),H=l()(T,2),A=H[0],I=H[1];Object(s.useEffect)((function(){null!==E&&(document.getElementById("file-uploader").offsetHeight<37*(E.length+1)?x(" w-scroll"):x(""))}),[E]),Object(s.useEffect)((function(){!0===U&&I(0)}),[U]),Object(s.useEffect)((function(){null!==A&&_(A,!0)}),[A]);var J,R,z=function(e){},L=function(e){var t=[].concat(h()(E.slice(0,e)),h()(E.slice(e+1,E.length)));g(t)},_=function(a){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t+E[a].path.split(E[a].name)[0],l="http://".concat(window.location.hostname,":3000/upload/").concat(i.split(n).join("+++")),o=new FormData;o.append("file",E[a]);var c={onUploadProgress:function(e){var t=[].concat(h()(N.slice(0,a)),[e.loaded],h()(N.slice(a+1,N.length)));C(t)}};v.a.post(l,o,c).then((function(t){!0===r&&(a+1<E.length?I(a+1):(e.setShowFileUploader(!1),e.refreshFileManager(t.data)))}))},B=function(){var e=r()(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M(!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(E&&E.length>0){var V=E.map((function(e,t){return u.a.createElement(O,{key:t,index:t,file:e,uploadProgress:N[t],renameFile:z,removeFile:L,uploadFile:_})}));J=u.a.createElement("div",{id:"file-uploader-summary-list"},u.a.createElement("div",{id:"file-list",className:j},V),u.a.createElement("div",{id:"file-list-actions"},u.a.createElement("div",{style:{float:"right"}},u.a.createElement("a",{className:"button",onClick:function(){return e.setShowFileUploader(!1)}},"Close"),u.a.createElement("a",{className:"button",onClick:B}," Upload Files "))))}else R=u.a.createElement("div",d()({className:"dropzone-container"},o()),u.a.createElement("input",d()({},p(),{name:"file"})),f?u.a.createElement("p",null,"Drop the files here ..."):u.a.createElement("p",null,"Drag 'n' drop some files here, or click to select files"));return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{id:"file-uploader"},R,J))},x=n(371),S=n(370),k=n(63),N=n(2);var C=function(e){var t=e.navigateHistory,n=e.browserHistory,a=e.browserHistoryIndex,r=e.getFiles,i=Object(s.useState)(!1),o=l()(i,2),c=o[0],f=o[1];Object(s.useEffect)((function(){setTimeout((function(){var e=document.getElementsByClassName("fa-level-up-alt")[0];e&&null!==e&&e.setAttribute("transform","scale(-1 1)")}),10)}),[]);var d,m=Object(s.useRef)();if(Object(F.b)(m,(function(){return f(!1)})),!0===c){var h=n.map((function(e,n){var r,i=e.path.split("/")[e.path.split("/").length-1];return n===a&&(r="active"),u.a.createElement("li",null,u.a.createElement("a",{className:r,title:e.path,onClick:function(){return t(n)}},i))}));d=u.a.createElement("div",{ref:m,className:"browser-history-submenu"},u.a.createElement("a",{onClick:function(){return f(!1)},className:"close-browser-history"},u.a.createElement(k.e,null)),u.a.createElement("ul",null,h))}return u.a.createElement("div",{className:"file-navbar-container-custom"},u.a.createElement("ul",{className:"browser-navigation-menu"},u.a.createElement("li",null,u.a.createElement("a",{onClick:function(){return f(!0)}},u.a.createElement(S.a,null))),u.a.createElement("li",null,u.a.createElement("a",{onClick:function(){return t("back")}},u.a.createElement(x.a,null))),u.a.createElement("li",null,u.a.createElement("a",{onClick:function(){return t("forward")}},u.a.createElement(x.b,null)))),d,u.a.createElement(p.f,null),u.a.createElement("a",{className:"refresh-button",onClick:function(){return r()}},u.a.createElement("span",null,"Refresh"),u.a.createElement(x.c,null)))};t.default=function(e){var t=e.displayedFiles,n=e.selectedFolder,a=e.fsep,i=e.folderChain,o=Object(s.useState)(""),f=l()(o,2),d=f[0],m=f[1],h=Object(s.useState)(""),b=l()(h,2),v=b[0],w=b[1],E=Object(s.useState)(!1),g=l()(E,2),y=g[0],F=g[1],O=Object(s.useState)(!1),x=l()(O,2),S=x[0],k=x[1],D=Object(s.useState)(""),P=l()(D,2),U=P[0],M=P[1],T=Object(s.useState)(null),H=l()(T,2),A=(H[0],H[1],Object(s.useState)(null)),I=l()(A,2),J=(I[0],I[1],Object(s.useRef)(null));function R(){J.current&&J.current.requestFileAction(p.a.ClearSelection)}function z(){var e=window.prompt("Enter new Folder Name:");!function(e){L.apply(this,arguments)}(n+a+e)}function L(){return(L=r()(c.a.mark((function t(n){var a,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://".concat(window.location.hostname,":3000/createfolder"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullPath:n})});case 2:return a=t.sent,t.next=5,a.json();case 5:r=t.sent,e.refreshFileManager(r);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function _(e){var t=e.state.selectedFiles[0].path,r=t.split("/")[t.split("/").length-1],i=window.prompt('Enter new name for "'.concat(r,'":')),l=t.split(n)[0]+n+a+i;!function(e,t){B.apply(this,arguments)}(t,l)}function B(){return(B=r()(c.a.mark((function t(n,a){var r,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://".concat(window.location.hostname,":3000/rename"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullPath:a,previousPath:n})});case 2:return r=t.sent,t.next=5,r.json();case 5:i=t.sent,e.refreshFileManager(i);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function V(e,t){return q.apply(this,arguments)}function q(){return(q=r()(c.a.mark((function t(n,a){var i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=n[a],fetch("http://".concat(window.location.hostname,":3000/delete"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullPath:i})}).then(function(){var t=r()(c.a.mark((function t(r){var i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a!==n.length-1){t.next=10;break}return t.next=3,r.json();case 3:i=t.sent,R(),k(!1),M(""),e.refreshFileManager(i),t.next=11;break;case 10:V(n,a+1);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function G(){return(G=r()(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],t.state.selectedFiles.forEach((function(e,t){n.push(e.path)})),M("Preparing Download"),k(!0),n.forEach(function(){var e=r()(c.a.mark((function e(t,n){var r,i,l,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://".concat(window.location.hostname,":3000/download"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:t})});case 2:return r=e.sent,e.next=5,r.blob();case 5:i=e.sent,l=window.URL.createObjectURL(i),(o=document.createElement("a")).href=l,o.download=t.split(a)[t.split(a).length-1],document.body.appendChild(o),o.click(),o.remove(),k(!1),M("");case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e,t,n){return Q.apply(this,arguments)}function Q(){return(Q=r()(c.a.mark((function e(t,n,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M("Copying Files"),k(!0),W(t,n,a,0);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e,t,n,a){return X.apply(this,arguments)}function X(){return(X=r()(c.a.mark((function t(n,a,i,l){var o,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=n[l],s=a[l],fetch("http://".concat(window.location.hostname,":3000/copypaste"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({previousPath:o,destinationPath:s,deleteOrigin:i})}).then(function(){var t=r()(c.a.mark((function t(r){var o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l!==n.length-1){t.next=10;break}return t.next=3,r.json();case 3:o=t.sent,R(),k(!1),M(""),e.refreshFileManager(o),t.next=11;break;case 10:W(n,a,i,l+1);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Y,Z,$,ee=Object(p.h)({id:"create_files",button:{name:"Add Folder",toolbar:!0,contextMenu:!0,icon:p.b.folderCreate}}),te=Object(p.h)({id:"edit_files",button:{name:"Edit",contextMenu:!0,icon:p.b.archive}}),ne=Object(p.h)({id:"rename_files",button:{name:"Rename",contextMenu:!0,icon:p.b.code}}),ae=Object(p.h)({id:"paste_files",button:{name:"Paste",contextMenu:!0,icon:p.b.paste}}),re=Object(p.h)({id:p.a.UploadFiles.id,button:{name:"Upload",toolbar:!0,contextMenu:!0,icon:p.b.upload}}),ie=Object(p.h)({id:p.a.DownloadFiles.id,button:{name:"Download",toolbar:!0,contextMenu:!0,icon:p.b.download}}),le=[ee,te,ne,re,ie,p.a.DeleteFiles,p.a.CopyFiles,p.a.StartDragNDrop,p.a.EndDragNDrop,ae];return!0===e.showFileUploader&&(Z=u.a.createElement(u.a.Fragment,null,u.a.createElement(j,{selectedFolder:n,fsep:a,refreshFileManager:e.refreshFileManager,setShowFileUploader:e.setShowFileUploader}))),!0===S&&($=u.a.createElement("div",{className:"file-browser-loading-spinner-container"},u.a.createElement(N.a,{text:U}))),u.a.createElement("div",{style:{height:window.innerHeight-170,position:"relative"},onDragOver:function(){!1===y&&(clearTimeout(Y),e.setShowFileUploader(!0))},onDragLeave:function(){Y=setTimeout((function(){e.setShowFileUploader(!1)}),10)}},$,Z,u.a.createElement(p.c,{files:t,folderChain:i,fileActions:le,onFileAction:function(t){var r;t.id===p.a.OpenFiles.id&&function(t){e.openFiles(t.payload.files[0])}(t),t.id===ee.id&&z(),t.id===te.id&&alert("Edit Folder Action"),t.id===ne.id&&_(t),t.id===p.a.UploadFiles.id&&e.setShowFileUploader(!0),t.id===p.a.DownloadFiles.id&&function(e){G.apply(this,arguments)}(t),t.id===p.a.DeleteFiles.id&&function(e){var t="are you sure you want to delete following files? \n",n=[];e.state.selectedFilesForAction.forEach((function(e,a){n.push(e.path),t+=e.path+"\n"})),window.confirm(t)&&(M("Deleting Files"),k(!0),V(n,0))}(t),t.id===p.a.CopyFiles.id&&function(e){var t=[];e.state.selectedFiles.forEach((function(e,n){t.push(e.path)})),m(t)}(t),t.id===ae.id&&(r=[],d.forEach((function(e,t){var i=n+a;e.indexOf(".")>-1&&(i=n+a+e.split(a)[e.split(a).length-1]),r.push(i)})),K(d,r)),t.id===p.a.StartDragNDrop.id&&function(e){F(!0);var t=[];e.state.selectedFiles.forEach((function(e,n){t.push(e.path)})),w(t)}(t),t.id===p.a.EndDragNDrop.id&&function(e){F(!1);var t=[];v.forEach((function(r,i){var l=n+e.payload.destination.path.split(n)[1];r.indexOf(".")>-1&&(l+=a+r.split(a)[r.split(a).length-1]),t.push(l)})),K(v,t,!0)}(t)},defaultFileViewActionId:p.a.EnableListView.id,clearSelectionOnOutsideClick:!0,ref:J},u.a.createElement(C,{navigateHistory:e.navigateHistory,browserHistory:e.browserHistory,browserHistoryIndex:e.browserHistoryIndex,getFiles:e.getFiles}),u.a.createElement(p.g,null),u.a.createElement(p.e,null),u.a.createElement(p.d,null)))}}}]);