(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{26:function(e,t,n){"use strict";n.r(t);var a=n(1),l=n.n(a),c=n(32),r=n.n(c),u=n(2),s=n.n(u),o=n(33),i=n.n(o),p=n(0),m=n.n(p),f=n(36);var h=function(e){var t,n=e.type,a=e.subType,l=e.items,c=e.item,r=e.letters,u=Object(f.e)(l),o=Object(p.useState)(null),i=s()(o,2),h=i[0],d=i[1];function E(t,n){d(n),e.onSelectItem(t)}return Object(p.useEffect)((function(){return function(){d(null)}}),[]),Object(p.useEffect)((function(){l!==u&&d(null)}),[l]),"scenes"===n?t=r.map((function(e,t){return m.a.createElement("li",{key:t},m.a.createElement("a",{className:c===e?"active":"",onClick:function(){return E(e)}},"Scene ",e.toUpperCase()))})):"item groups"===n?t=m.a.createElement(m.a.Fragment,null,m.a.createElement("li",null,m.a.createElement("a",{className:"clips"===a?"active":"",onClick:function(){return E("clips")}},"Clips (",null!==l.clips?l.clips.length:0,")")),m.a.createElement("li",null,m.a.createElement("a",{className:"patterns"===a?"active":"",onClick:function(){return E("patterns")}},"Patterns (",null!==l.patterns?l.patterns.length:0,")")),m.a.createElement("li",null,m.a.createElement("a",{className:"samples"===a?"active":"",onClick:function(){return E("samples")}},"Samples (",null!==l.samples?l.samples.length:0,")")),m.a.createElement("li",null,m.a.createElement("a",{className:"sounds"===a?"active":"",onClick:function(){return E("sounds")}},"Sounds (",null!==l.sounds?l.sounds.length:0,")")),m.a.createElement("li",null,m.a.createElement("a",{className:"tracks"===a?"active":"",onClick:function(){return E("tracks")}},"Tracks (10)")),m.a.createElement("li",null,m.a.createElement("a",{className:"songs"===a?"active":"",onClick:function(){return E("songs")}},"Songs (0)"))):"item"===n?"patterns"===a&&(t=m.a.createElement("li",null,m.a.createElement("ul",null,m.a.createElement("li",null,m.a.createElement("a",null,"Active Bar: ",c.activeBar)),m.a.createElement("li",null,m.a.createElement("a",null,"Available Bar: ",c.availableBars)),m.a.createElement("li",null,m.a.createElement("a",null,"Bank Length: ",c.bankLength)),m.a.createElement("li",null,m.a.createElement("a",null,"Enabled: ",!0===c.enabled?"true":"false")),m.a.createElement("li",null,m.a.createElement("a",null,"Start Note: ",c.gridModelStartNote)),m.a.createElement("li",null,m.a.createElement("a",null,"End Note: ",c.gridModelEndNote)),m.a.createElement("li",null,m.a.createElement("a",null,"Midi Channel: ",c.midiChannel)),m.a.createElement("li",null,m.a.createElement("a",null,"Note Length: ",c.noteLength))))):t=l.map((function(e,t){var l=e.path?e.path:"item ".concat(t+1);if("versions"===n){var c=e.path.split("/")[e.path.split("/").length-1],r=e.path.split(c)[0];l=m.a.createElement(m.a.Fragment,null,m.a.createElement("span",null,c),m.a.createElement("small",null,r))}else"items"===n&&(l=e.path?e.path:"".concat(a.substring(0,a.length-1)," ").concat(t+1),"clips"===a?l=m.a.createElement(m.a.Fragment,null,m.a.createElement("span",null,e.path),m.a.createElement("small",null,"Track: ",e.track+1)):"samples"===a?l=m.a.createElement(m.a.Fragment,null,m.a.createElement("span",null,e.path),m.a.createElement("small",null,"Track: ",e.track+1," | Slot: ",e.slot+1)):"sounds"===a?l=m.a.createElement(m.a.Fragment,null,m.a.createElement("span",null,e.preset_name),m.a.createElement("small",null,e.engine_name)):"patterns"===a&&(l=m.a.createElement(m.a.Fragment,null,m.a.createElement("span",null,e.name),m.a.createElement("span",{className:"right"},"Bars: ",m.a.createElement("b",null,e.bankLength)))));return m.a.createElement("li",{key:t},m.a.createElement("a",{className:h===t?"active":"",onClick:function(){return E(e,t)}},l))})),m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"xtractor-column-container"},m.a.createElement("ul",null,t)))},d=n(138),E=n(372),v=n(373),b=n(374);t.default=function(e){var t,n,a,c,u,o=e.colorsArray,k=["a","b","c","d","e","f","g","h","i","j"],j=["clips","patterns","samples","sounds","tracks","songs"],g=Object(p.useState)([{path:"sketches/my-sketches/"}]),y=s()(g,2),w=y[0],O=(y[1],Object(p.useState)(null)),S=s()(O,2),x=S[0],T=S[1],C=Object(p.useState)(null),N=s()(C,2),B=N[0],M=N[1],I=Object(p.useState)(null),L=s()(I,2),F=L[0],G=L[1],R=Object(p.useState)(null),D=s()(R,2),P=D[0],A=D[1],_=Object(p.useState)(null),z=s()(_,2),J=z[0],U=z[1],Y=Object(p.useState)(null),Z=s()(Y,2),q=(Z[0],Z[1],Object(p.useState)(!1)),H=s()(q,2),K=H[0],V=H[1],Q=Object(p.useState)(null),W=s()(Q,2),X=W[0],$=W[1],ee=Object(p.useState)(0),te=s()(ee,2),ne=te[0],ae=te[1],le=Object(f.e)(ne),ce=Object(p.useState)(null),re=s()(ce,2),ue=re[0],se=re[1],oe=Object(p.useState)(null),ie=s()(oe,2),pe=ie[0],me=ie[1],fe=Object(p.useState)(null),he=s()(fe,2),de=he[0],Ee=he[1],ve=Object(p.useState)(null),be=s()(ve,2),ke=be[0],je=be[1],ge=Object(p.useState)(null),ye=s()(ge,2),we=ye[0],Oe=ye[1],Se=Object(p.useState)(null),xe=s()(Se,2),Te=xe[0],Ce=xe[1],Ne=Object(p.useState)(null),Be=s()(Ne,2),Me=Be[0],Ie=Be[1];function Le(){return(Le=r()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fe(){return(Fe=r()(i.a.mark((function e(){var t,n,a,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.path.split("/").join("+++"),e.next=3,fetch("http://".concat(window.location.hostname,":3000/mydata/+++home+++pi+++zynthian-my-data+++").concat(t.split("/").join("+++")),{method:"GET",headers:{"Content-Type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,l=[],a.forEach((function(e,t){e.path.indexOf(x.path)>-1&&e.path.indexOf("sketch.json")>-1&&l.push(e)})),M(l);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ge(){return(Ge=r()(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://".concat(window.location.hostname,":3000/sketch/").concat(F.path.split("/").join("+++")),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,U(n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Re(){return(Re=r()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function De(){return Pe.apply(this,arguments)}function Pe(){return(Pe=r()(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0===ne?Ae():1===ne?null===pe?_e():ae(2):2===ne?Je():3===ne&&(t=[],null!==ke&&(t=l()(ke)),Ye(t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(){var e=J.tracks[X],t=null!==ue?l()(ue):[];e.clips.forEach(function(){var e=r()(i.a.mark((function e(n,a){var l,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=k.findIndex((function(e){return e===P})),null!==n[l].path&&((c=n[l]).track=ne,t.push(c));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),se(t),Ze()}function _e(){var e=F.path.split("/")[F.path.split("/").length-1],t=F.path.split(e)[0],n="".concat(t,"sequences/scene-").concat(P,"/patterns/");console.log(n," SCENES PATTERNS PATH"),fetch("http://".concat(window.location.hostname,":3000/folder/").concat(n.split("/").join("+++")),{method:"GET",headers:{"Content-Type":"application/json"}}).catch((function(e){console.log(e,"error")})).then(function(){var e=r()(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,t.json();case 3:(a=e.sent).length>0?ze(a,0,[],n):ae(2);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}function ze(e,t,n,a){fetch("http://".concat(window.location.hostname,":3000/json/").concat(e[t].path.split("/").join("+++")),{method:"GET",headers:{"Content-Type":"application/json"}}).catch((function(e){console.log(e,"error")})).then(function(){var a=r()(i.a.mark((function a(l){var c;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(500!==l.status){a.next=5;break}console.log("ERROR"),console.log(l),a.next=10;break;case 5:return a.next=7,l.json();case 7:(c=a.sent).name=e[t].path.split("/patterns/")[1].split(".pattern.json")[0],n.push(c);case 10:t===e.length-1?(me(n),ae(2)):ze(e,t+1,n);case 11:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}function Je(){return Ue.apply(this,arguments)}function Ue(){return(Ue=r()(i.a.mark((function e(){var t,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=null!==de?l()(de):[],n=F.path.split("/")[F.path.split("/").length-1],a=F.path.split(n)[0],fetch("http://".concat(window.location.hostname,":3000/track/").concat(a.split("/").join("+++").split(" ").join("%20"),":").concat(X+1),{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(){var e=r()(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(500!==n.status){e.next=4;break}return Ee(t),Ze(),e.abrupt("return");case 4:return e.next=6,n.json();case 6:e.sent.forEach((function(e,n){null!==e&&(e.track=X,e.slot=n,t.push(e))})),Ee(t),Ze();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ye(e){var t=J.tracks[X],n=e?l()(e):[];fetch("http://".concat(window.location.hostname,":3000/json/").concat("/home/pi/zynthian-my-data/snapshots/last_state.zss".split("/").join("+++")),{method:"GET",headers:{"Content-Type":"application/json"}}).catch((function(e){})).then(function(){var e=r()(i.a.mark((function e(a){var l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.json();case 2:l=e.sent,t.chainedSounds.forEach((function(e,t){e>=0&&l.layers.forEach((function(t,a){"MIDI Synth"===t.engine_type&&t.midi_chan===e&&n.push(t)}))})),je(n),Ze();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}function Ze(e){var t=ne+1;t===j.length-2&&(t=0),ae(t)}if(Object(p.useEffect)((function(){!function(){Le.apply(this,arguments)}()}),[]),Object(p.useEffect)((function(){null!==x&&function(){Fe.apply(this,arguments)}()}),[x]),Object(p.useEffect)((function(){null!==F&&(function(){Ge.apply(this,arguments)}(),A(null),se(null),me(null),Ee(null),je(null),Ce(null),Oe(null),function(){Re.apply(this,arguments)}())}),[F]),Object(p.useEffect)((function(){se(null),me(null),Ee(null),je(null),Ce(null),Oe(null)}),[P]),Object(p.useEffect)((function(){null!==Te&&Ie(null)}),[Te]),Object(p.useEffect)((function(){null!==J&&null!==P&&V(!0)}),[J,P]),Object(p.useEffect)((function(){!0===K&&$(0)}),[K]),Object(p.useEffect)((function(){null!==ne&&(0===ne&&le===j.length-3?X+1>=J.tracks.length?(Oe({clips:ue,patterns:pe,samples:de,sounds:ke,tracks:[0,1,2,3,4,5,6,7,8,9],songs:[0,1,2]}),V(!1)):$(X+1):De())}),[ne]),Object(p.useEffect)((function(){null!==ne&&De()}),[X]),null!==B&&(t=m.a.createElement(h,{type:"versions",items:B,onSelectItem:G,color:o[1]})),null!==F&&(n=m.a.createElement(h,{type:"scenes",onSelectItem:A,item:P,color:o[2],letters:k})),null!==we?a=m.a.createElement(h,{type:"item groups",items:we,subType:j[Te],onSelectItem:function(e){var t=j.findIndex((function(t,n){return e===t}));Ce(t)},color:o[3]}):!0===K&&(a=m.a.createElement("div",{className:"loader-container"},m.a.createElement("div",{className:"lds-ellipsis"},m.a.createElement("div",null),m.a.createElement("div",null),m.a.createElement("div",null),m.a.createElement("div",null)))),null!==Te){var qe=we[j[Te]];c=m.a.createElement(h,{type:"items",subType:j[Te],items:qe,onSelectItem:Ie,color:o[4]})}return null!==Me&&(u=m.a.createElement(h,{type:"item",subType:j[Te],item:Me,color:o[5]})),m.a.createElement("div",{id:"sketch-pad-xtractor"},m.a.createElement("div",{className:"sketch-pad-xtractor-row"},m.a.createElement("div",{className:"sketch-pad-xtractor-column",style:{backgroundColor:o[0]}},m.a.createElement("h4",null,m.a.createElement(d.c,null),"Folders"),m.a.createElement(h,{type:"folders",items:w,onSelectItem:T,color:o[0]})),m.a.createElement("div",{className:"sketch-pad-xtractor-column",style:{backgroundColor:o[1]}},m.a.createElement("h4",null,m.a.createElement(E.a,null),"Versions"),t),m.a.createElement("div",{className:"sketch-pad-xtractor-column",style:{backgroundColor:o[2]}},m.a.createElement("h4",null,m.a.createElement(d.d,null),"Scenes"),n),m.a.createElement("div",{className:"sketch-pad-xtractor-column",style:{backgroundColor:o[3]}},m.a.createElement("h4",null,m.a.createElement(v.a,null),"Item Groups"),a),m.a.createElement("div",{className:"sketch-pad-xtractor-column",style:{backgroundColor:o[4]}},m.a.createElement("h4",null,m.a.createElement(d.d,null),"Items"),c),m.a.createElement("div",{className:"sketch-pad-xtractor-column",style:{backgroundColor:o[5]}},m.a.createElement("h4",null,m.a.createElement(b.a,null),"Details"),u)))}},36:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return p}));var a=n(2),l=n.n(a),c=(n(50),n(0));function r(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=t?1e3:1024;if(Math.abs(e)<a)return e+" B";var l=t?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],c=-1,r=Math.pow(10,n);do{e/=a,++c}while(Math.round(Math.abs(e)*r)/r>=a&&c<l.length-1);return e.toFixed(n)+" "+l[c]}function u(e,t){Object(c.useEffect)((function(){var n=function(n){e.current&&!e.current.contains(n.target)&&t(n)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),function(){document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[e,t])}function s(e){var t=Object(c.useRef)();return Object(c.useEffect)((function(){t.current=e}),[e]),t.current}var o=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.shouldPreventDefault,r=void 0===a||a,u=n.delay,s=void 0===u?300:u,o=Object(c.useState)(!1),p=l()(o,2),m=p[0],f=p[1],h=Object(c.useRef)(),d=Object(c.useRef)(),E=Object(c.useCallback)((function(t){r&&t.target&&(t.target.addEventListener("touchend",i,{passive:!1}),d.current=t.target),h.current=setTimeout((function(){e(t),f(!0)}),s)}),[e,s,r]),v=Object(c.useCallback)((function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];h.current&&clearTimeout(h.current),n&&!m&&t(),f(!1),r&&d.current&&d.current.removeEventListener("touchend",i)}),[r,t,m]);return{onMouseDown:function(e){return E(e)},onTouchStart:function(e){return E(e)},onMouseUp:function(e){return v(e)},onMouseLeave:function(e){return v(e,!1)},onTouchEnd:function(e){return v(e)}}},i=function(e){(function(e){return"touches"in e})(e)&&e.touches.length<2&&e.preventDefault&&e.preventDefault()};function p(e){var t=Math.floor(e/60),n=e-60*t;return t<10&&(t="0"+t),(n=Math.floor(n))<10&&(n="0"+n),t+":"+n}}}]);