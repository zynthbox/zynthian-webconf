(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{376:function(e,t,n){"use strict";n.r(t);var a=n(27),r=n.n(a),i=n(1),l=n.n(i),o=n(28),c=n.n(o),s=n(0),u=n.n(s),f=n(91),p=n(49),d=n.n(p),m=n(36),h=n.n(m),v=n(72),E=n.n(v),w=n(136),b=n(369),g=n(133),y=n(368),F=n(34);var O=function(e){var t=e.file,n=e.index,a=e.uploadProgress,r=a;return a>0&&(r=parseInt(100*a/t.size)),u.a.createElement("div",{className:"file-uploader-list-item"},u.a.createElement("div",{className:"list-item-file-info"},u.a.createElement("span",{className:"file-name"},t.path),u.a.createElement("span",{className:"file-size"},Object(F.a)(t.size))),u.a.createElement("div",{className:"list-item-progress-container"},u.a.createElement("div",{className:"list-item-progress-bar",style:{width:r+"%"}},u.a.createElement("span",null,Object(F.a)(a)))),u.a.createElement("div",{className:"list-item-actions"},u.a.createElement("a",{className:"button",onClick:function(){return e.renameFile(n)}},u.a.createElement(g.a,null)),u.a.createElement("a",{className:"button",onClick:function(){return e.uploadFile(n)}},u.a.createElement(y.a,null)),u.a.createElement("a",{className:"button",onClick:function(){return e.removeFile(n)}},u.a.createElement(b.a,null))))},j=function(e){var t=e.selectedFolder,n=e.fsep,a=Object(s.useCallback)((function(e){var t=[];for(var n in e)t[n]=null!==N?N[n]:0;C(t),g(e)}),[]),i=Object(w.b)({onDrop:a}),o=i.getRootProps,f=i.getInputProps,p=i.isDragActive,m=Object(s.useState)(null),v=l()(m,2),b=v[0],g=v[1],y=Object(s.useState)(""),F=l()(y,2),j=F[0],k=F[1],x=Object(s.useState)(null),S=l()(x,2),N=S[0],C=S[1],P=Object(s.useState)(!1),D=l()(P,2),T=D[0],U=D[1],H=Object(s.useState)(null),M=l()(H,2),A=M[0],I=M[1];Object(s.useEffect)((function(){null!==b&&(document.getElementById("file-uploader").offsetHeight<37*(b.length+1)?k(" w-scroll"):k(""))}),[b]),Object(s.useEffect)((function(){!0===T&&I(0)}),[T]),Object(s.useEffect)((function(){null!==A&&_(A,!0)}),[A]);var J,R,L=function(e){},z=function(e){var t=[].concat(h()(b.slice(0,e)),h()(b.slice(e+1,b.length)));g(t)},_=function(a){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t+b[a].path.split(b[a].name)[0],l="http://".concat(window.location.hostname,":3000/upload/").concat(i.split(n).join("+++")),o=new FormData;o.append("file",b[a]);var c={onUploadProgress:function(e){var t=[].concat(h()(N.slice(0,a)),[e.loaded],h()(N.slice(a+1,N.length)));C(t)}};E.a.post(l,o,c).then((function(t){!0===r&&(a+1<b.length?I(a+1):(e.setShowFileUploader(!1),e.refreshFileManager(t.data)))}))},B=function(){var e=r()(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:U(!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(b&&b.length>0){var V=b.map((function(e,t){return u.a.createElement(O,{key:t,index:t,file:e,uploadProgress:N[t],renameFile:L,removeFile:z,uploadFile:_})}));J=u.a.createElement("div",{id:"file-uploader-summary-list"},u.a.createElement("div",{id:"file-list",className:j},V),u.a.createElement("div",{id:"file-list-actions"},u.a.createElement("div",{style:{float:"right"}},u.a.createElement("a",{className:"button",onClick:function(){return e.setShowFileUploader(!1)}},"Close"),u.a.createElement("a",{className:"button",onClick:B}," Upload Files "))))}else R=u.a.createElement("div",d()({className:"dropzone-container"},o()),u.a.createElement("input",d()({},f(),{name:"file"})),p?u.a.createElement("p",null,"Drop the files here ..."):u.a.createElement("p",null,"Drag 'n' drop some files here, or click to select files"));return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{id:"file-uploader"},R,J))},k=n(371),x=n(370),S=n(63),N=n(2);var C=function(e){var t=e.navigateHistory,n=e.browserHistory,a=e.browserHistoryIndex,r=e.getFiles,i=Object(s.useState)(!1),o=l()(i,2),c=o[0],p=o[1];Object(s.useEffect)((function(){setTimeout((function(){var e=document.getElementsByClassName("fa-level-up-alt")[0];e&&null!==e&&e.setAttribute("transform","scale(-1 1)")}),10)}),[]);var d,m=Object(s.useRef)();if(Object(F.b)(m,(function(){return p(!1)})),!0===c){var h=n.map((function(e,n){var r,i=e.path.split("/")[e.path.split("/").length-1];return n===a&&(r="active"),u.a.createElement("li",null,u.a.createElement("a",{className:r,title:e.path,onClick:function(){return t(n)}},i))}));d=u.a.createElement("div",{ref:m,className:"browser-history-submenu"},u.a.createElement("a",{onClick:function(){return p(!1)},className:"close-browser-history"},u.a.createElement(S.e,null)),u.a.createElement("ul",null,h))}return u.a.createElement("div",{className:"file-navbar-container-custom"},u.a.createElement("ul",{className:"browser-navigation-menu"},u.a.createElement("li",null,u.a.createElement("a",{onClick:function(){return p(!0)}},u.a.createElement(x.a,null))),u.a.createElement("li",null,u.a.createElement("a",{onClick:function(){return t("back")}},u.a.createElement(k.a,null))),u.a.createElement("li",null,u.a.createElement("a",{onClick:function(){return t("forward")}},u.a.createElement(k.b,null)))),d,u.a.createElement(f.f,null),u.a.createElement("a",{className:"refresh-button",onClick:function(){return r()}},u.a.createElement(k.c,null)))};t.default=function(e){var t=e.displayedFiles,n=e.selectedFolder,a=e.fsep,i=e.folderChain,o=Object(s.useState)(""),p=l()(o,2),d=p[0],m=p[1],h=Object(s.useState)(""),v=l()(h,2),E=v[0],w=v[1],b=Object(s.useState)(!1),g=l()(b,2),y=g[0],F=g[1],O=Object(s.useState)(!1),k=l()(O,2),x=k[0],S=k[1],P=Object(s.useRef)(null);function D(){P.current&&P.current.requestFileAction(f.a.ClearSelection)}function T(){var e=window.prompt("Enter new Folder Name:");!function(e){U.apply(this,arguments)}(n+a+e)}function U(){return(U=r()(c.a.mark((function t(n){var a,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://".concat(window.location.hostname,":3000/createfolder"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullPath:n})});case 2:return a=t.sent,t.next=5,a.json();case 5:r=t.sent,e.refreshFileManager(r);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function H(e){var t=e.state.selectedFiles[0].path,r=t.split("/")[t.split("/").length-1],i=window.prompt('Enter new name for "'.concat(r,'":')),l=t.split(n)[0]+n+a+i;!function(e,t){M.apply(this,arguments)}(t,l)}function M(){return(M=r()(c.a.mark((function t(n,a){var r,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://".concat(window.location.hostname,":3000/rename"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullPath:a,previousPath:n})});case 2:return r=t.sent,t.next=5,r.json();case 5:i=t.sent,e.refreshFileManager(i);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function A(e,t){return I.apply(this,arguments)}function I(){return(I=r()(c.a.mark((function t(n,a){var i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=n[a],fetch("http://".concat(window.location.hostname,":3000/delete"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullPath:i})}).then(function(){var t=r()(c.a.mark((function t(r){var i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a!==n.length-1){t.next=9;break}return t.next=3,r.json();case 3:i=t.sent,D(),S(!1),e.refreshFileManager(i),t.next=10;break;case 9:A(n,a+1);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function J(){return(J=r()(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],t.state.selectedFiles.forEach((function(e,t){n.push(e.path)})),S(!0),n.forEach(function(){var e=r()(c.a.mark((function e(t,n){var r,i,l,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://".concat(window.location.hostname,":3000/download"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:t})});case 2:return r=e.sent,e.next=5,r.blob();case 5:i=e.sent,l=window.URL.createObjectURL(i),(o=document.createElement("a")).href=l,o.download=t.split(a)[t.split(a).length-1],document.body.appendChild(o),o.click(),o.remove(),S(!1);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e,t,n){return L.apply(this,arguments)}function L(){return(L=r()(c.a.mark((function e(t,n,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S(!0),z(t,n,a,0);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e,t,n,a){return _.apply(this,arguments)}function _(){return(_=r()(c.a.mark((function t(n,a,i,l){var o,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=n[l],s=a[l],console.log(o,s," pathsss "),fetch("http://".concat(window.location.hostname,":3000/copypaste"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({previousPath:o,destinationPath:s,deleteOrigin:i})}).then(function(){var t=r()(c.a.mark((function t(r){var o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(r," FILE COPY PASTE RES"),l!==n.length-1){t.next=10;break}return t.next=4,r.json();case 4:o=t.sent,D(),S(!1),e.refreshFileManager(o),t.next=11;break;case 10:z(n,a,i,l+1);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var B,V,q,Y=Object(f.h)({id:"create_files",button:{name:"Create Folder",toolbar:!0,contextMenu:!0,icon:f.b.folderCreate}}),G=Object(f.h)({id:"edit_files",button:{name:"Edit",contextMenu:!0,icon:f.b.archive}}),K=Object(f.h)({id:"rename_files",button:{name:"Rename",contextMenu:!0,icon:f.b.code}}),Q=Object(f.h)({id:"paste_files",button:{name:"Paste",contextMenu:!0,icon:f.b.paste}}),W=[Y,G,K,f.a.UploadFiles,f.a.DownloadFiles,f.a.DeleteFiles,f.a.CopyFiles,f.a.StartDragNDrop,f.a.EndDragNDrop,Q];return!0===e.showFileUploader&&(V=u.a.createElement(u.a.Fragment,null,u.a.createElement(j,{selectedFolder:n,fsep:a,refreshFileManager:e.refreshFileManager,setShowFileUploader:e.setShowFileUploader}))),!0===x&&(q=u.a.createElement("div",{className:"file-browser-loading-spinner-container"},u.a.createElement(N.a,null))),u.a.createElement("div",{style:{height:window.innerHeight-170,position:"relative"},onDragOver:function(){!1===y&&(clearTimeout(B),e.setShowFileUploader(!0))},onDragLeave:function(){B=setTimeout((function(){e.setShowFileUploader(!1)}),10)}},q,V,u.a.createElement(f.c,{files:t,folderChain:i,fileActions:W,onFileAction:function(t){var r;t.id===f.a.OpenFiles.id&&function(t){e.openFiles(t.payload.files[0])}(t),t.id===Y.id&&T(),t.id===G.id&&alert("Edit Folder Action"),t.id===K.id&&H(t),t.id===f.a.UploadFiles.id&&e.setShowFileUploader(!0),t.id===f.a.DownloadFiles.id&&function(e){J.apply(this,arguments)}(t),t.id===f.a.DeleteFiles.id&&function(e){var t="are you sure you want to delete following files? \n",n=[];e.state.selectedFilesForAction.forEach((function(e,a){n.push(e.path),t+=e.path+"\n"})),window.confirm(t)&&(S(!0),A(n,0))}(t),t.id===f.a.CopyFiles.id&&function(e){var t=[];e.state.selectedFiles.forEach((function(e,n){t.push(e.path)})),m(t)}(t),t.id===Q.id&&(r=[],d.forEach((function(e,t){var i=n+a;e.indexOf(".")>-1&&(i=n+a+e.split(a)[e.split(a).length-1]),r.push(i)})),R(d,r)),t.id===f.a.StartDragNDrop.id&&function(e){F(!0);var t=[];e.state.selectedFiles.forEach((function(e,n){t.push(e.path)})),w(t)}(t),t.id===f.a.EndDragNDrop.id&&function(e){F(!1);var t=[];E.forEach((function(r,i){var l=n+e.payload.destination.path.split(n)[1];r.indexOf(".")>-1&&(l+=a+r.split(a)[r.split(a).length-1]),t.push(l)})),R(E,t,!0)}(t)},defaultFileViewActionId:f.a.EnableListView.id,clearSelectionOnOutsideClick:!0,ref:P},u.a.createElement(C,{navigateHistory:e.navigateHistory,browserHistory:e.browserHistory,browserHistoryIndex:e.browserHistoryIndex,getFiles:e.getFiles}),u.a.createElement(f.g,null),u.a.createElement(f.e,null),u.a.createElement(f.d,null)))}}}]);