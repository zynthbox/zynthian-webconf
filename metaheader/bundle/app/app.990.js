"use strict";(self.webpackChunkzynthbox_webconf_metaheader=self.webpackChunkzynthbox_webconf_metaheader||[]).push([[990],{1990:(e,t,r)=>{r.r(t),r.d(t,{default:()=>f});var n=r(7294),a=r(2225),i=r(5509),l=r(2322),o=r(885);const c=function(){var e=(0,n.useContext)(l._),t=e.fileManagerState,r=(e.fileManagerDispatch,(0,n.useState)(null)),a=(0,o.Z)(r,2),i=a[0],c=a[1];(0,n.useEffect)((function(){s()}),[t.files]);var s=function(){var e=t.files[0];e&&!e.isDir&&e.path.indexOf(".")>-1&&"json"===e.path.split(".")[e.path.split(".").length-1]&&c(e.name)};return n.createElement("div",null,i)};var s=(0,n.lazy)((function(){return Promise.all([r.e(545),r.e(355)]).then(r.bind(r,7326))}));const f=function(){return n.createElement(n.Fragment,null,n.createElement(i.Z,{className:"split"},n.createElement(l.Z,null,n.createElement("div",null,n.createElement("div",{id:"file-manager"},n.createElement(n.Suspense,{fallback:n.createElement(a.Z,null)},n.createElement(s,null)))),n.createElement("div",null,n.createElement(c,null)))))}},2322:(e,t,r)=>{r.d(t,{_:()=>g,Z:()=>w});var n=r(7462),a=r(885),i=r(7294),l=r(4942),o=r(2982),c=r(7154);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r,n){var a=[];return e.forEach((function(i,l){if(i.folder===n){var o=f(f({},i),{},{toggled:t.findIndex((function(e){return e.path===i.path}))>-1});c.E+r===i.path&&(o.active=!0),e.filter((function(e){return e.level>i.level})).length>0&&(o.children=u(e.filter((function(e){return e.level>i.level})),t,r,i.path+"/")),a.push(o)}})),a}function p(e,t,r){return{name:"zynthian",toggled:!0,path:"/home/pi",active:null===r,children:u(e,t,r,c.E)}}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var O="/home/pi/zynthian-my-data/samples/",v={loading:!0,filesLoading:!1,selectedFolder:null,files:[],displayedFiles:[],folderChain:[{id:"xcv",name:"zynthian",alias:"/home/pi/zynthian-my-data/samples/",isDir:!0}],browseHistory:[{id:"xcv",isDir:!0,label:O,name:O,path:O}],browseHistoryIndex:0,treeData:null,error:null};const E=function(e,t){switch(t.type){case"SET_SELECTED_FOLDER":var r=t.payload,n=r.name;r.alias&&(n=r.alias);var a,i,l=!1;if(e.folderChain.forEach((function(e,t){e.id===r.id&&(l=!0)})),l){a=n===O?null:e.selectedFolder.split(n)[0]+n;var s=e.folderChain.findIndex((function(e){return e.id===r.id}));i=(0,o.Z)(e.folderChain.slice(0,s+1))}else if(null!==e.selectedFolder){var f=r.path.split(O)[1];f&&-1===f.indexOf(e.selectedFolder)?(a=f,i=[].concat((0,o.Z)(v.folderChain),(0,o.Z)(function(e,t){for(var r=[],n=c.E,a=e.split("/"),i=0;i<a.length;i++){var l=t.filter((function(e){return e.path===n+a[i]}))[0];r.push(h(h({},l),{},{id:l.folder+l.name})),n+=a[i]+"/"}return r}(f,e.files)))):(a=e.selectedFolder+"/"+n,i=[].concat((0,o.Z)(e.folderChain),[r]))}else a=n,i=[].concat((0,o.Z)(e.folderChain),[r]);var u,d=(0,o.Z)(e.browseHistory);return u=!0===t.isViewingHistory?t.browseHistoryIndex:(d=e.browseHistoryIndex!==e.browseHistory.length-1?[].concat((0,o.Z)(e.browseHistory.slice(0,e.browseHistoryIndex+1)),[b(b({},r),{},{path:r.path?r.path:O})]):[].concat((0,o.Z)(e.browseHistory),[b(b({},r),{},{path:r.path?r.path:O})])).length-1,b(b({},e),{},{selectedFolder:a,folderChain:i,browseHistory:d,browseHistoryIndex:u});case"SET_FILES":var y,E=function(e){for(var t=e.concat(),r=0;r<t.length;++r)for(var n=r+1;n<t.length;++n)t[r].path===t[n].path&&t.splice(n--,1);return t}(t.payload.concat(e.files));y=t.payload.map((function(e){return b(b({},e),{},{id:e.path})}));var g=p(E.filter((function(e){return!0===e.isDir})),e.folderChain,e.selectedFolder);return b(b({},e),{},{files:E,displayedFiles:y,treeData:g,loading:!1,filesLoading:!1});case"RENAME_FILE":var m=t.payload,w=m.previousPath,j=(m.fullPath,e.files.filter((function(e){return-1===e.path.indexOf(w)}))),P=p(j.filter((function(e){return!0===e.isDir})),e.folderChain,e.selectedFolder);return b(b({},e),{},{files:j,treeData:P});case"DELETE_FILES":var D=t.payload,F=e.files.filter((function(e){var t=!0;return D.forEach((function(r,n){e.path.indexOf(r)>-1&&(t=!1)})),t})),S=p(F.filter((function(e){return!0===e.isDir})),e.folderChain,e.selectedFolder);return b(b({},e),{},{files:F,treeData:S});case"SET_ERROR":var Z=t.payload;return b(b({},e),{},{error:Z});case"ON_REFRESH_FILES":return b(b({},e),{},{filesLoading:!0})}};var g=i.createContext(),m=g.Provider;const w=function(e){var t=i.useReducer(E,v),r=(0,a.Z)(t,2),l=r[0],o=r[1];return i.createElement(m,(0,n.Z)({},e,{value:{fileManagerState:l,fileManagerDispatch:o}}))}},7154:(e,t,r)=>{r.d(t,{E:()=>n});var n="/home/pi/zynthian-my-data/sketchpads/my-sketchpads/"}}]);