(self.webpackChunkzynthbox_webconf_metaheader=self.webpackChunkzynthbox_webconf_metaheader||[]).push([[114],{6087:(e,t,n)=>{"use strict";n.d(t,{D9:()=>o,TA:()=>u,gB:()=>l,t$:()=>c,ut:()=>i});var a=n(885),r=n(7294);function l(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=t?1e3:1024;if(Math.abs(e)<a)return e+" B";var r=t?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],l=-1,c=Math.pow(10,n);do{e/=a,++l}while(Math.round(Math.abs(e)*c)/c>=a&&l<r.length-1);return e.toFixed(n)+" "+r[l]}function c(e,t){(0,r.useEffect)((function(){var n=function(n){e.current&&!e.current.contains(n.target)&&t(n)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),function(){document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[e,t])}function o(e){var t=(0,r.useRef)();return(0,r.useEffect)((function(){t.current=e}),[e]),t.current}var u=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=n.shouldPreventDefault,c=void 0===l||l,o=n.delay,u=void 0===o?300:o,i=(0,r.useState)(!1),m=(0,a.Z)(i,2),d=m[0],p=m[1],E=(0,r.useRef)(),f=(0,r.useRef)(),v=(0,r.useCallback)((function(t){c&&t.target&&(t.target.addEventListener("touchend",s,{passive:!1}),f.current=t.target),E.current=setTimeout((function(){e(t),p(!0)}),u)}),[e,u,c]),h=(0,r.useCallback)((function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];E.current&&clearTimeout(E.current),n&&!d&&t(),p(!1),c&&f.current&&f.current.removeEventListener("touchend",s)}),[c,t,d]);return{onMouseDown:function(e){return v(e)},onTouchStart:function(e){return v(e)},onMouseUp:function(e){return h(e)},onMouseLeave:function(e){return h(e,!1)},onTouchEnd:function(e){return h(e)}}},s=function(e){(function(e){return"touches"in e})(e)&&e.touches.length<2&&e.preventDefault&&e.preventDefault()};function i(e){var t=Math.floor(e/60),n=e-60*t;return t<10&&(t="0"+t),(n=Math.floor(n))<10&&(n="0"+n),t+":"+n}},6114:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>y});var a=n(7294),r=n(6993),l=n(8216),c=n(5861),o=n(885),u=n(4687),s=n.n(u),i=n(9583),m=n(8193),d=n(3990),p=n(6087);const E=function(e){var t=e.item,n=(0,a.useState)(null),r=(0,o.Z)(n,2),l=r[0],u=r[1],E=(0,a.useState)(!1),f=(0,o.Z)(E,2),v=f[0],h=f[1],g=(0,a.useState)("00:00"),y=(0,o.Z)(g,2),N=y[0],b=y[1],x=(0,a.useState)(0),B=(0,o.Z)(x,2),k=(B[0],B[1]),w=(0,a.useState)(),T=(0,o.Z)(w,2),C=T[0],S=T[1],M=(0,a.useState)(0),F=(0,o.Z)(M,2),Z=F[0],L=F[1],D=(0,a.useState)(0),P=(0,o.Z)(D,2),R=P[0],z=P[1];function I(){return(I=(0,c.Z)(s().mark((function e(){var n,a,r,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.path,e.next=3,fetch("http://".concat(window.location.hostname,":3000/download"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:n})});case 3:if(a=e.sent,n!==t.path){e.next=10;break}return e.next=7,a.blob();case 7:r=e.sent,l=window.URL.createObjectURL(r),u(l);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){var t=e.target,n=(0,p.ut)(t.currentTime),a=t.duration;isNaN(a)&&(a=0);var r=(0,p.ut)(a),l=t.currentTime/t.duration*100;b(n),k(t.duration),L(a),S(r),z(l)}(0,a.useEffect)((function(){!function(){I.apply(this,arguments)}()}),[]),(0,a.useEffect)((function(){100===R&&h(!1)}),[R]);var j=(0,a.useRef)(null),_=a.createElement("span",{className:"rotating"},a.createElement(m.xz6,null));null!==l&&(_=!0===v?a.createElement(i.x00,null):a.createElement(i.Gzj,null));var A=a.createElement("span",{className:"infinity"},"âˆž");C&&(A=C);var G=t.name.split("-20")[0],O=t.name.split(G+"-")[1],Y=O.split("T")[0].split("-").join("/"),H=O.split("T")[1].split(".")[0];return a.createElement("div",{className:"audio-player",id:"audio-player-".concat(t.name)},a.createElement("audio",{src:l,onTimeUpdate:function(e){return U(e)},onLoadedMetadata:function(e){return U(e)}}),a.createElement("span",{onClick:function(){var e=document.createElement("a");e.href=l;var n=t.path.split("/")[t.path.split("/").length-1];e.download=n,document.body.appendChild(e),e.click(),e.remove()},className:"count"}," ",a.createElement(d.hh,null)," "),a.createElement("div",{className:"audio-player-top"},a.createElement("div",{className:"audio-player-controls"},a.createElement("span",{onClick:function(){return function(){if(null!==l){var e=document.getElementById("audio-player-".concat(t.name)).getElementsByTagName("audio");!0===v?(e[0].pause(),h(!1)):(100===R&&(e[0].currentTime=0),e[0].play(),h(!0))}}()}},_)),a.createElement("div",{ref:j,draggable:!0,id:t.path,className:"draggable-div item-info"},a.createElement("h4",null,G),a.createElement("small",null,a.createElement("b",null,(0,p.gB)(t.size)),a.createElement("b",null,Y," "),a.createElement("b",null,H)))),a.createElement("div",{className:"audio-player-bottom"},a.createElement("div",{className:"track-time"},N),a.createElement("div",{id:"".concat(t.path,"-slider"),className:"slider"},a.createElement("div",{className:"progress",style:{width:R+"%"}}),a.createElement("div",{onClick:function(e){return function(e){if(null!==l){var n=document.getElementById("".concat(t.path,"-slider")),a=n.offsetWidth,r=n.getBoundingClientRect(),c=e.clientX-r.left,o=Z/100*(c/a*100);document.getElementById("audio-player-".concat(t.name)).getElementsByTagName("audio")[0].currentTime=o}}(e)},className:"rail"})),a.createElement("div",{className:"track-duration"},A)))},f=function(e){var t,n=e.item,c=e.type,o=(0,l.I0)(),u=(0,l.v9)((function(e){return e.songExport})),s=u.selectedSong,i=u.selectedExport,m=u.selectedPart;("song"===c&&null!==s&&s.path===n.path||"songExport"===c&&null!==i&&i.path===n.path||"part"===c&&null!==m&&m.path===n.path)&&(t="active");var d=a.createElement(E,{item:n});if("part"!==c){var p="songExport"===c?n.name:n.folder,f="songExport"===c?"":a.createElement("small",null,n.path);d=a.createElement(a.Fragment,null,a.createElement("span",null,p),a.createElement("b",{className:"count"},n.count),f)}return a.createElement("li",{className:"song-export-list-item"},a.createElement("a",{className:t,onClick:function(){"song"===c?o((0,r.FE)(n)):"songExport"===c&&o((0,r.RU)(n))}},d))};var v=n(9246),h=n.n(v),g=["#B23730","#EE514B","#F77535","#F7D635","#FE68B1","#A438FF","#6491FF","#73F6EE","#65E679","#9A7136"];const y=function(e){var t,n,c,o,u=(0,l.I0)(),s=(0,l.v9)((function(e){return e.songExport})),m=s.error,d=s.sketches,p=s.selectedSong,E=s.exports,v=s.selectedExport,y=s.parts,N=(s.selectedPart,s.status);return(0,a.useEffect)((function(){u((0,r.bi)())}),[]),(0,a.useEffect)((function(){null!==p&&u((0,r.ME)(p.path+"/"))}),[p]),(0,a.useEffect)((function(){null!==v&&u((0,r.lH)(v.path+"/"))}),[v]),""!==m&&(t=a.createElement("div",{className:"song-export-error"},a.createElement("span",null,m," ",a.createElement("a",{onClick:function(){return u((0,r.YN)())}},"(X)")))),d&&null!==d&&(n=d.map((function(e,t){return a.createElement(f,{key:Date.now()+t,item:e,type:"song"})}))),E&&null!==E&&(c=E.map((function(e,t){return a.createElement(f,{key:Date.now()+t,item:e,type:"songExport"})}))),o="loading"===N.parts||"failed"===N.parts?a.createElement("div",{className:"status-display"},"loading"===N.parts?a.createElement("img",{src:h()}):N.parts):y.map((function(e,t){return a.createElement(f,{key:Date.now()+t,item:e,type:"part"})})),a.createElement("div",{id:"song-export"},t,a.createElement("div",{className:"song-export-column",id:"song-list",style:{backgroundColor:g[0]}},a.createElement("div",{className:"column-header"},a.createElement("h4",null,a.createElement(i.HcQ,null),"Sketches")),a.createElement("ul",null,n)),a.createElement("div",{className:"song-export-column",id:"export-folders-list",style:{backgroundColor:g[1]}},a.createElement("div",{className:"column-header"},a.createElement("h4",null,a.createElement(i.u$v,null),"Exports")),a.createElement("ul",null,c)),a.createElement("div",{className:"song-export-column",id:"song-parts-list",style:{backgroundColor:g[2]}},a.createElement("div",{className:"column-header"},a.createElement("h4",null,a.createElement(i.CbE,null),"Parts")),a.createElement("ul",null,o)))}},9246:(e,t,n)=>{e.exports=n.p+"bundle/styles/images/loader.svg"}}]);