(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[17],{

/***/ "./src/app/file-manager/file-browser.js":
/*!**********************************************!*\
  !*** ./src/app/file-manager/file-browser.js ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"./node_modules/@babel/runtime/helpers/asyncToGenerator.js\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"./node_modules/@babel/runtime/regenerator/index.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var chonky__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! chonky */ \"./node_modules/chonky/dist/chonky.esm.js\");\n/* harmony import */ var _file_uploader__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./file-uploader */ \"./src/app/file-manager/file-uploader.js\");\n/* harmony import */ var _file_viewer__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./file-viewer */ \"./src/app/file-manager/file-viewer.js\");\n/* harmony import */ var react_icons_io5__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react-icons/io5 */ \"./node_modules/react-icons/io5/index.esm.js\");\n/* harmony import */ var react_icons_io__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react-icons/io */ \"./node_modules/react-icons/io/index.esm.js\");\n/* harmony import */ var react_icons_ai__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react-icons/ai */ \"./node_modules/react-icons/ai/index.esm.js\");\n/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../helpers */ \"./src/app/helpers.js\");\n/* harmony import */ var _loading_spinner__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../loading-spinner */ \"./src/app/loading-spinner.js\");\n/* harmony import */ var _context_context_provider__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./context/context-provider */ \"./src/app/file-manager/context/context-provider.js\");\n\n\n\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction WebconfFileBrowser(props) {\n  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useContext\"])(_context_context_provider__WEBPACK_IMPORTED_MODULE_12__[\"Context\"]),\n      fileManagerState = _useContext.fileManagerState,\n      fileManagerDispatch = _useContext.fileManagerDispatch;\n\n  var displayedFiles = fileManagerState.displayedFiles,\n      selectedFolder = fileManagerState.selectedFolder,\n      folderChain = fileManagerState.folderChain,\n      ffolder = fileManagerState.ffolder;\n  var fsep = props.fsep;\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useState\"])(''),\n      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState, 2),\n      copiedFiles = _useState2[0],\n      setCopiedFiles = _useState2[1];\n\n  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useState\"])(''),\n      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState3, 2),\n      draggedFiles = _useState4[0],\n      setDraggedFiles = _useState4[1];\n\n  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useState\"])(false),\n      _useState6 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState5, 2),\n      isDragInsideFileBrowser = _useState6[0],\n      setIsDragInsideFileBrowser = _useState6[1];\n\n  var _useState7 = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useState\"])(false),\n      _useState8 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState7, 2),\n      loading = _useState8[0],\n      setLoading = _useState8[1];\n\n  var _useState9 = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useState\"])(''),\n      _useState10 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState9, 2),\n      loadingText = _useState10[0],\n      setLoadingText = _useState10[1];\n\n  var _useState11 = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useState\"])(''),\n      _useState12 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState11, 2),\n      showFileViewer = _useState12[0],\n      setShowFileViewer = _useState12[1];\n\n  var _useState13 = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useState\"])(''),\n      _useState14 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState13, 2),\n      viewedFile = _useState14[0],\n      setViewedFile = _useState14[1];\n\n  var fileBrowserRef = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useRef\"])(null);\n\n  function clearSelection() {\n    if (!fileBrowserRef.current) return;\n    fileBrowserRef.current.requestFileAction(chonky__WEBPACK_IMPORTED_MODULE_4__[\"ChonkyActions\"].ClearSelection);\n  }\n\n  function openFilesAction(data) {\n    var file = data.payload.files[0];\n    if (file.isDir === true) fileManagerDispatch({\n      type: 'SET_SELECTED_FOLDER',\n      payload: file\n    });else {\n      if (file.path.indexOf('.') > -1) {\n        var fileType = file.path.split('.')[file.path.split('.').length - 1];\n\n        if (fileType === \"json\") {\n          setViewedFile(file);\n          setShowFileViewer(true);\n        }\n      }\n    }\n  }\n\n  function createFolderAction() {\n    var folderName = window.prompt('Enter new Folder Name:');\n\n    if (folderName !== null) {\n      var fullPath = (selectedFolder !== null ? selectedFolder + fsep : \"\") + folderName;\n      createFolder(fullPath);\n    }\n  }\n\n  function createFolder(_x) {\n    return _createFolder.apply(this, arguments);\n  }\n\n  function _createFolder() {\n    _createFolder = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee(fullPath) {\n      var response, res;\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetch(\"http://\".concat(window.location.hostname, \":3000/createfolder\"), {\n                method: 'POST',\n                headers: {\n                  'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                  fullPath: fullPath\n                })\n              });\n\n            case 2:\n              response = _context.sent;\n              _context.next = 5;\n              return response.json();\n\n            case 5:\n              res = _context.sent;\n              props.getFiles();\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _createFolder.apply(this, arguments);\n  }\n\n  function renameFileAction(data) {\n    var previousPath = data.state.selectedFiles[0].path;\n    var previousName = previousPath.split('/')[previousPath.split('/').length - 1];\n    var folderName = window.prompt(\"Enter new name for \\\"\".concat(previousName, \"\\\":\"), previousName);\n\n    if (folderName !== null) {\n      var fullPath = selectedFolder === null ? \"/home/pi/\" + folderName : previousPath.split(selectedFolder)[0] + selectedFolder + \"/\" + folderName;\n      fileManagerDispatch({\n        type: \"RENAME_FILE\",\n        payload: {\n          previousPath: previousPath,\n          fullPath: fullPath\n        }\n      });\n      renameFile(previousPath, fullPath);\n    }\n  }\n\n  function renameFile(_x2, _x3) {\n    return _renameFile.apply(this, arguments);\n  }\n\n  function _renameFile() {\n    _renameFile = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee2(previousPath, fullPath) {\n      var response, res;\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return fetch(\"http://\".concat(window.location.hostname, \":3000/rename\"), {\n                method: 'POST',\n                headers: {\n                  'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                  fullPath: fullPath,\n                  previousPath: previousPath\n                })\n              });\n\n            case 2:\n              response = _context2.sent;\n              _context2.next = 5;\n              return response.json();\n\n            case 5:\n              res = _context2.sent;\n              // fileManagerDispatch({type:\"RENAME_FILE\",payload:{previousPath,fullPath}})\n              props.getFiles(res);\n\n            case 7:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _renameFile.apply(this, arguments);\n  }\n\n  function deleteFilesAction(data) {\n    var message = \"are you sure you want to delete following files? \\n\";\n    var paths = [];\n    data.state.selectedFilesForAction.forEach(function (files, index) {\n      paths.push(files.path);\n      message += files.path + \"\\n\";\n    });\n\n    if (window.confirm(message)) {\n      setLoadingText('Deleting Files');\n      setLoading(true);\n      fileManagerDispatch({\n        type: 'DELETE_FILES',\n        payload: paths\n      });\n      deleteFile(paths, 0);\n    }\n  }\n\n  function deleteFile(_x4, _x5) {\n    return _deleteFile.apply(this, arguments);\n  }\n\n  function _deleteFile() {\n    _deleteFile = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee4(paths, index) {\n      var fullPath;\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              fullPath = paths[index];\n              fetch(\"http://\".concat(window.location.hostname, \":3000/delete\"), {\n                method: 'POST',\n                headers: {\n                  'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                  fullPath: fullPath\n                })\n              }).then( /*#__PURE__*/function () {\n                var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee3(response) {\n                  var res;\n                  return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee3$(_context3) {\n                    while (1) {\n                      switch (_context3.prev = _context3.next) {\n                        case 0:\n                          if (!(index === paths.length - 1)) {\n                            _context3.next = 10;\n                            break;\n                          }\n\n                          _context3.next = 3;\n                          return response.json();\n\n                        case 3:\n                          res = _context3.sent;\n                          clearSelection();\n                          setLoading(false);\n                          setLoadingText('');\n                          props.getFiles();\n                          _context3.next = 11;\n                          break;\n\n                        case 10:\n                          deleteFile(paths, index + 1);\n\n                        case 11:\n                        case \"end\":\n                          return _context3.stop();\n                      }\n                    }\n                  }, _callee3);\n                }));\n\n                return function (_x14) {\n                  return _ref.apply(this, arguments);\n                };\n              }());\n\n            case 2:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n    return _deleteFile.apply(this, arguments);\n  }\n\n  function downloadFilesAction(_x6) {\n    return _downloadFilesAction.apply(this, arguments);\n  }\n\n  function _downloadFilesAction() {\n    _downloadFilesAction = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee6(data) {\n      var paths;\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              paths = [];\n              data.state.selectedFiles.forEach(function (sf, index) {\n                paths.push(sf.path);\n              });\n\n              if (paths.length > 0) {\n                setLoadingText('Preparing Download');\n                setLoading(true);\n                paths.forEach( /*#__PURE__*/function () {\n                  var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee5(filePath, index) {\n                    var response, res, url, a, dlFileName;\n                    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee5$(_context5) {\n                      while (1) {\n                        switch (_context5.prev = _context5.next) {\n                          case 0:\n                            _context5.next = 2;\n                            return fetch(\"http://\".concat(window.location.hostname, \":3000/download\"), {\n                              method: 'POST',\n                              headers: {\n                                'Content-Type': 'application/json'\n                              },\n                              body: JSON.stringify({\n                                filePath: filePath\n                              })\n                            });\n\n                          case 2:\n                            response = _context5.sent;\n                            _context5.next = 5;\n                            return response.blob();\n\n                          case 5:\n                            res = _context5.sent;\n                            url = window.URL.createObjectURL(res);\n                            a = document.createElement('a');\n                            a.href = url;\n                            dlFileName = filePath.split(fsep)[filePath.split(fsep).length - 1];\n                            if (dlFileName.indexOf('.zip') === -1 && res.type === \"application/zip\") dlFileName += \".zip\";\n                            a.download = dlFileName;\n                            document.body.appendChild(a); // we need to append the element to the dom -> otherwise it will not work in firefox\n\n                            a.click();\n                            a.remove();\n                            setLoading(false);\n                            setLoadingText('');\n\n                          case 17:\n                          case \"end\":\n                            return _context5.stop();\n                        }\n                      }\n                    }, _callee5);\n                  }));\n\n                  return function (_x15, _x16) {\n                    return _ref2.apply(this, arguments);\n                  };\n                }());\n              }\n\n            case 3:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6);\n    }));\n    return _downloadFilesAction.apply(this, arguments);\n  }\n\n  function copyFilesAction(data) {\n    var paths = [];\n    data.state.selectedFiles.forEach(function (sf, index) {\n      paths.push(sf.path);\n    });\n    setCopiedFiles(paths);\n  }\n\n  function pasteFilesAction(data) {\n    // let destination = selectedFolder + fsep;\n    // if (copiedFiles.indexOf('.') > -1){\n    //   destination = selectedFolder + fsep + copiedFiles.split(fsep)[copiedFiles.split(fsep).length - 1];\n    // }\n    var destinationPaths = [];\n    copiedFiles.forEach(function (cf, index) {\n      var destination = selectedFolder + fsep;\n\n      if (cf.indexOf('.') > -1) {\n        destination = (selectedFolder !== null ? selectedFolder + fsep : \"\") + cf.split(fsep)[cf.split(fsep).length - 1];\n      }\n\n      destinationPaths.push(destination);\n    });\n    copyPasteFiles(copiedFiles, destinationPaths);\n  }\n\n  function startDragNDropAction(data) {\n    setIsDragInsideFileBrowser(true);\n    var paths = [];\n    data.state.selectedFiles.forEach(function (sf, index) {\n      paths.push(sf.path);\n    });\n    setDraggedFiles(paths);\n  }\n\n  function endDragNDropAction(data) {\n    setIsDragInsideFileBrowser(false);\n    var destinationPaths = [];\n    draggedFiles.forEach(function (df, index) {\n      var destination = \"\";\n\n      if (selectedFolder !== null) {\n        destination = selectedFolder + data.payload.destination.path.split(selectedFolder)[1];\n      } else destination = data.payload.destination.path.split('/home/pi/')[1];\n\n      if (df.indexOf('.') > -1) {\n        destination += fsep + df.split(fsep)[df.split(fsep).length - 1];\n        if (destination.indexOf('undefined') > -1) destination = destination.split('undefined').join('');\n      }\n\n      destinationPaths.push(destination);\n    });\n    if (draggedFiles.length > 0 && destinationPaths.length > 0 && draggedFiles[0] !== destinationPaths[0]) copyPasteFiles(draggedFiles, destinationPaths, true);\n  }\n\n  function copyPasteFiles(_x7, _x8, _x9) {\n    return _copyPasteFiles.apply(this, arguments);\n  }\n\n  function _copyPasteFiles() {\n    _copyPasteFiles = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee7(previousPaths, destinationPaths, deleteOrigin) {\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              setLoadingText('Copying Files');\n              setLoading(true);\n              console.log(previousPaths, destinationPaths);\n              copyPasteFile(previousPaths, destinationPaths, deleteOrigin, 0);\n\n            case 4:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7);\n    }));\n    return _copyPasteFiles.apply(this, arguments);\n  }\n\n  function copyPasteFile(_x10, _x11, _x12, _x13) {\n    return _copyPasteFile.apply(this, arguments);\n  }\n\n  function _copyPasteFile() {\n    _copyPasteFile = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee9(previousPaths, destinationPaths, deleteOrigin, index) {\n      var previousPath, destinationPath;\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee9$(_context9) {\n        while (1) {\n          switch (_context9.prev = _context9.next) {\n            case 0:\n              console.log('COPY PASTE FILES'); // console.log(previousPaths, \" PREVIOUS PATHS \")\n              // console.log(destinationPaths, \" DESTINATION PATHDS\")\n              // console.log(deleteOrigin, \" DELETE ORIGIN\")\n\n              previousPath = previousPaths[index];\n              destinationPath = destinationPaths[index];\n              fetch(\"http://\".concat(window.location.hostname, \":3000/copypaste\"), {\n                method: 'POST',\n                headers: {\n                  'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                  previousPath: previousPath,\n                  destinationPath: \"/\" + destinationPath,\n                  deleteOrigin: deleteOrigin\n                })\n              }).then( /*#__PURE__*/function () {\n                var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee8(res) {\n                  var files;\n                  return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee8$(_context8) {\n                    while (1) {\n                      switch (_context8.prev = _context8.next) {\n                        case 0:\n                          if (!(index === previousPaths.length - 1)) {\n                            _context8.next = 11;\n                            break;\n                          }\n\n                          if (deleteOrigin === true) fileManagerDispatch({\n                            type: 'DELETE_FILES',\n                            payload: previousPaths\n                          });\n                          _context8.next = 4;\n                          return res.json();\n\n                        case 4:\n                          files = _context8.sent;\n                          clearSelection();\n                          setLoading(false);\n                          setLoadingText('');\n                          props.refreshFileManager(files);\n                          _context8.next = 12;\n                          break;\n\n                        case 11:\n                          copyPasteFile(previousPaths, destinationPaths, deleteOrigin, index + 1);\n\n                        case 12:\n                        case \"end\":\n                          return _context8.stop();\n                      }\n                    }\n                  }, _callee8);\n                }));\n\n                return function (_x17) {\n                  return _ref3.apply(this, arguments);\n                };\n              }());\n\n            case 4:\n            case \"end\":\n              return _context9.stop();\n          }\n        }\n      }, _callee9);\n    }));\n    return _copyPasteFile.apply(this, arguments);\n  }\n\n  function selectAllFiles() {\n    if (!fileBrowserRef.current) return;\n    var newSelection = new Set();\n\n    var _iterator = _createForOfIteratorHelper(displayedFiles),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var file = _step.value;\n        newSelection.add(file.id);\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    fileBrowserRef.current.setFileSelection(newSelection);\n  }\n\n  var handleAction = function handleAction(data) {\n    if (data.id === chonky__WEBPACK_IMPORTED_MODULE_4__[\"ChonkyActions\"].OpenFiles.id) openFilesAction(data);\n    if (data.id === createNewFolder.id) createFolderAction();\n    if (data.id === editFiles.id) alert(\"Edit Folder Action\");\n    if (data.id === renameFiles.id) renameFileAction(data);\n    if (data.id === chonky__WEBPACK_IMPORTED_MODULE_4__[\"ChonkyActions\"].UploadFiles.id) props.setShowFileUploader(true);\n    if (data.id === chonky__WEBPACK_IMPORTED_MODULE_4__[\"ChonkyActions\"].DownloadFiles.id) downloadFilesAction(data);\n    if (data.id === chonky__WEBPACK_IMPORTED_MODULE_4__[\"ChonkyActions\"].DeleteFiles.id) deleteFilesAction(data);\n    if (data.id === chonky__WEBPACK_IMPORTED_MODULE_4__[\"ChonkyActions\"].CopyFiles.id) copyFilesAction(data);\n    if (data.id === pasteFiles.id) pasteFilesAction(data);\n    if (data.id === chonky__WEBPACK_IMPORTED_MODULE_4__[\"ChonkyActions\"].StartDragNDrop.id) startDragNDropAction(data);\n    if (data.id === chonky__WEBPACK_IMPORTED_MODULE_4__[\"ChonkyActions\"].EndDragNDrop.id) endDragNDropAction(data); // if (data.id === selectFiles.id) selectAllFiles()\n  };\n\n  var createNewFolder = Object(chonky__WEBPACK_IMPORTED_MODULE_4__[\"defineFileAction\"])({\n    id: \"create_files\",\n    button: {\n      name: \"Add Folder\",\n      toolbar: true,\n      contextMenu: true,\n      icon: chonky__WEBPACK_IMPORTED_MODULE_4__[\"ChonkyIconName\"].folderCreate\n    }\n  });\n  var editFiles = Object(chonky__WEBPACK_IMPORTED_MODULE_4__[\"defineFileAction\"])({\n    id: \"edit_files\",\n    button: {\n      name: \"Edit\",\n      contextMenu: true,\n      icon: chonky__WEBPACK_IMPORTED_MODULE_4__[\"ChonkyIconName\"].archive\n    }\n  });\n  var renameFiles = Object(chonky__WEBPACK_IMPORTED_MODULE_4__[\"defineFileAction\"])({\n    id: \"rename_files\",\n    button: {\n      name: \"Rename\",\n      contextMenu: true,\n      icon: chonky__WEBPACK_IMPORTED_MODULE_4__[\"ChonkyIconName\"].code\n    }\n  });\n  var pasteFiles = Object(chonky__WEBPACK_IMPORTED_MODULE_4__[\"defineFileAction\"])({\n    id: \"paste_files\",\n    button: {\n      name: \"Paste\",\n      contextMenu: true,\n      icon: chonky__WEBPACK_IMPORTED_MODULE_4__[\"ChonkyIconName\"].paste\n    }\n  });\n  var uploadFiles = Object(chonky__WEBPACK_IMPORTED_MODULE_4__[\"defineFileAction\"])({\n    id: chonky__WEBPACK_IMPORTED_MODULE_4__[\"ChonkyActions\"].UploadFiles.id,\n    button: {\n      name: \"Upload\",\n      toolbar: true,\n      contextMenu: false,\n      icon: chonky__WEBPACK_IMPORTED_MODULE_4__[\"ChonkyIconName\"].upload\n    }\n  });\n  var downloadFiles = Object(chonky__WEBPACK_IMPORTED_MODULE_4__[\"defineFileAction\"])({\n    id: chonky__WEBPACK_IMPORTED_MODULE_4__[\"ChonkyActions\"].DownloadFiles.id,\n    button: {\n      name: \"Download\",\n      toolbar: true,\n      contextMenu: true,\n      icon: chonky__WEBPACK_IMPORTED_MODULE_4__[\"ChonkyIconName\"].download\n    }\n  });\n  var selectFiles = Object(chonky__WEBPACK_IMPORTED_MODULE_4__[\"defineFileAction\"])({\n    id: \"select_files\",\n    button: {\n      name: \"Select Files\",\n      toolbar: false,\n      contextMenu: true,\n      icon: chonky__WEBPACK_IMPORTED_MODULE_4__[\"ChonkyIconName\"].selectAllFiles\n    }\n  });\n  var myFileActions = [createNewFolder, editFiles, renameFiles, uploadFiles, downloadFiles, // selectFiles,\n  chonky__WEBPACK_IMPORTED_MODULE_4__[\"ChonkyActions\"].DeleteFiles, chonky__WEBPACK_IMPORTED_MODULE_4__[\"ChonkyActions\"].CopyFiles, chonky__WEBPACK_IMPORTED_MODULE_4__[\"ChonkyActions\"].StartDragNDrop, chonky__WEBPACK_IMPORTED_MODULE_4__[\"ChonkyActions\"].EndDragNDrop, pasteFiles];\n  var hideMaskTimeout;\n\n  function onFileUploaderDragOver() {\n    if (isDragInsideFileBrowser === false) {\n      clearTimeout(hideMaskTimeout);\n      props.setShowFileUploader(true);\n    }\n  }\n\n  function onFileUploaderDragLeave() {\n    hideMaskTimeout = setTimeout(function () {\n      props.setShowFileUploader(false);\n    }, 10);\n  }\n\n  var fileViewerDisplay;\n\n  if (showFileViewer === true) {\n    fileViewerDisplay = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_file_viewer__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n      file: viewedFile,\n      setShowFileViewer: setShowFileViewer,\n      selectedFolder: selectedFolder\n    });\n  }\n\n  var fileUploaderDisplay;\n\n  if (props.showFileUploader === true) {\n    fileUploaderDisplay = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_3___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_file_uploader__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n      selectedFolder: selectedFolder,\n      fsep: fsep,\n      refreshFileManager: props.refreshFileManager,\n      setShowFileUploader: props.setShowFileUploader\n    }));\n  }\n\n  var loadingDisplay;\n\n  if (loading === true || fileManagerState.filesLoading === true) {\n    console.log(fileManagerState.filesLoading, \" FILES LOADING\");\n    loadingDisplay = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"div\", {\n      className: \"file-browser-loading-spinner-container\"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_loading_spinner__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n      text: loadingText\n    }));\n  }\n\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"div\", {\n    style: {\n      height: window.innerHeight - 170,\n      position: \"relative\"\n    },\n    onDragOver: onFileUploaderDragOver,\n    onDragLeave: function onDragLeave() {\n      return onFileUploaderDragLeave();\n    }\n  }, loadingDisplay, fileUploaderDisplay, fileViewerDisplay, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(chonky__WEBPACK_IMPORTED_MODULE_4__[\"FileBrowser\"], {\n    files: displayedFiles,\n    folderChain: folderChain,\n    fileActions: myFileActions,\n    onFileAction: handleAction,\n    defaultFileViewActionId: chonky__WEBPACK_IMPORTED_MODULE_4__[\"ChonkyActions\"].EnableListView.id,\n    clearSelectionOnOutsideClick: true,\n    ref: fileBrowserRef,\n    disableDefaultFileActions: [chonky__WEBPACK_IMPORTED_MODULE_4__[\"ChonkyActions\"].OpenSelection.id // ChonkyActions.SelectAllFiles.id\n    ]\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(FileBrowserHeader, {\n    getFiles: props.getFiles\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(chonky__WEBPACK_IMPORTED_MODULE_4__[\"FileToolbar\"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(chonky__WEBPACK_IMPORTED_MODULE_4__[\"FileList\"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(chonky__WEBPACK_IMPORTED_MODULE_4__[\"FileContextMenu\"], {\n    disableDefaultFileActions: [// ChonkyActions.OpenSelection.id,\n    chonky__WEBPACK_IMPORTED_MODULE_4__[\"ChonkyActions\"].SelectAllFiles.id]\n  })));\n}\n\nvar FileBrowserHeader = function FileBrowserHeader(props) {\n  var _useContext2 = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useContext\"])(_context_context_provider__WEBPACK_IMPORTED_MODULE_12__[\"Context\"]),\n      fileManagerState = _useContext2.fileManagerState,\n      fileManagerDispatch = _useContext2.fileManagerDispatch;\n\n  var browseHistory = fileManagerState.browseHistory,\n      browseHistoryIndex = fileManagerState.browseHistoryIndex;\n  var getFiles = props.getFiles;\n\n  var _useState15 = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useState\"])(false),\n      _useState16 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState15, 2),\n      showHistoryDropDown = _useState16[0],\n      setShowHistoryDropDown = _useState16[1];\n\n  var _useState17 = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useState\"])(null),\n      _useState18 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState17, 2),\n      historyDropDownType = _useState18[0],\n      setHistoryDropDownType = _useState18[1];\n\n  Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useEffect\"])(function () {\n    setTimeout(function () {\n      var lvlUpSvg = document.getElementsByClassName('fa-level-up-alt')[0];\n      if (lvlUpSvg && lvlUpSvg !== null) lvlUpSvg.setAttribute('transform', 'scale(-1 1)');\n      var xpath = \"//span[text()='Actions']\";\n      var matchingElement = document.evaluate(xpath, document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;\n      matchingElement.innerText = \"More...\";\n      var xpath = \"//span[text()='Select all files']\";\n      var matchingElement = document.evaluate(xpath, document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;\n      matchingElement.innerText = \"Select Files\";\n    }, 10);\n  }, []);\n  var ref = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useRef\"])();\n  Object(_helpers__WEBPACK_IMPORTED_MODULE_10__[\"useOnClickOutside\"])(ref, function () {\n    return setShowHistoryDropDown(false);\n  });\n\n  function onRefreshClick() {\n    fileManagerDispatch({\n      type: 'ON_REFRESH_FILES'\n    });\n    getFiles();\n  }\n\n  function navigateHistory(val) {\n    var newBrowseHistoryIndex;\n    if (val === \"back\" && fileManagerState.browseHistoryIndex - 1 >= 0) newBrowseHistoryIndex = fileManagerState.browseHistoryIndex - 1;else if (val === \"forward\" && fileManagerState.browseHistoryIndex + 1 <= fileManagerState.browseHistory.length - 1) newBrowseHistoryIndex = fileManagerState.browseHistoryIndex + 1;else newBrowseHistoryIndex = val;\n\n    if (typeof newBrowseHistoryIndex === \"number\") {\n      fileManagerDispatch({\n        type: \"SET_SELECTED_FOLDER\",\n        payload: fileManagerState.browseHistory[newBrowseHistoryIndex],\n        isViewingHistory: true,\n        browseHistoryIndex: newBrowseHistoryIndex\n      });\n    }\n  }\n\n  var historyDropDownDisplay;\n\n  if (showHistoryDropDown === true) {\n    var history = browseHistory.map(function (h, index) {\n      var showItem = true;\n      if (historyDropDownType === \"back\" && index > browseHistoryIndex) showItem = false;else if (historyDropDownType === \"forward\" && index < browseHistoryIndex) showItem = false;\n\n      if (showItem === true) {\n        var nameDisplay = h.path === \"/home/pi/\" ? \"zynthian\" : h.path.indexOf('/') > -1 ? h.path.split('/')[h.path.split('/').length - 1] : h.path;\n        var itemCssClass;\n\n        if (index === browseHistoryIndex) {\n          itemCssClass = \"active\";\n        }\n\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"li\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"a\", {\n          className: itemCssClass,\n          title: h.path,\n          onClick: function onClick() {\n            navigateHistory(index);\n            setShowHistoryDropDown(false);\n          }\n        }, nameDisplay));\n      }\n    });\n    historyDropDownDisplay = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"div\", {\n      ref: ref,\n      className: 'browser-history-submenu ' + historyDropDownType\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"a\", {\n      onClick: function onClick() {\n        return setShowHistoryDropDown(false);\n      },\n      className: \"close-browser-history\"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_icons_ai__WEBPACK_IMPORTED_MODULE_9__[\"AiOutlineCloseCircle\"], null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"ul\", null, history));\n  }\n\n  var onBackLongPress = function onBackLongPress() {\n    setHistoryDropDownType('back');\n    setShowHistoryDropDown(true);\n  };\n\n  var onForwardLongPress = function onForwardLongPress() {\n    setHistoryDropDownType('forward');\n    setShowHistoryDropDown(true);\n  };\n\n  var onForwardClick = function onForwardClick() {\n    navigateHistory('forward');\n  };\n\n  var onBackClick = function onBackClick() {\n    navigateHistory('back');\n  };\n\n  var defaultOptions = {\n    shouldPreventDefault: true,\n    delay: 400\n  };\n  var backLongPressEvent = Object(_helpers__WEBPACK_IMPORTED_MODULE_10__[\"useLongPress\"])(onBackLongPress, onBackClick, defaultOptions);\n  var forwardLongPressEvent = Object(_helpers__WEBPACK_IMPORTED_MODULE_10__[\"useLongPress\"])(onForwardLongPress, onForwardClick, defaultOptions);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"div\", {\n    className: \"file-navbar-container-custom\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"ul\", {\n    className: \"browser-navigation-menu\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"li\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"a\", backLongPressEvent, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_icons_io5__WEBPACK_IMPORTED_MODULE_7__[\"IoArrowBack\"], null))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"li\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"a\", forwardLongPressEvent, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_icons_io5__WEBPACK_IMPORTED_MODULE_7__[\"IoArrowForward\"], null)))), historyDropDownDisplay, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(chonky__WEBPACK_IMPORTED_MODULE_4__[\"FileNavbar\"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"a\", {\n    className: \"refresh-button\",\n    onClick: onRefreshClick\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_icons_io5__WEBPACK_IMPORTED_MODULE_7__[\"IoRefresh\"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"span\", null, \"Refresh\")));\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (WebconfFileBrowser);\n\n//# sourceURL=webpack:///./src/app/file-manager/file-browser.js?");

/***/ }),

/***/ "./src/app/file-manager/file-uploader.js":
/*!***********************************************!*\
  !*** ./src/app/file-manager/file-uploader.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/extends */ \"./node_modules/@babel/runtime/helpers/extends.js\");\n/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"./node_modules/@babel/runtime/helpers/asyncToGenerator.js\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ \"./node_modules/@babel/runtime/helpers/toConsumableArray.js\");\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"./node_modules/@babel/runtime/regenerator/index.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! axios */ \"./node_modules/axios/index.js\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var react_dropzone__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react-dropzone */ \"./node_modules/react-dropzone/dist/es/index.js\");\n/* harmony import */ var react_icons_ri__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react-icons/ri */ \"./node_modules/react-icons/ri/index.esm.js\");\n/* harmony import */ var react_icons_bi__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react-icons/bi */ \"./node_modules/react-icons/bi/index.esm.js\");\n/* harmony import */ var react_icons_im__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! react-icons/im */ \"./node_modules/react-icons/im/index.esm.js\");\n/* harmony import */ var react_icons_fa__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! react-icons/fa */ \"./node_modules/react-icons/fa/index.esm.js\");\n/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../helpers */ \"./src/app/helpers.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction FileUploader(props) {\n  var selectedFolder = props.selectedFolder,\n      fsep = props.fsep; // const reader = new FileReader();\n\n  var onDrop = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useCallback\"])(function (acceptedFiles) {\n    // Do something with the files\n    var newUploadProgressData = [];\n\n    for (var i in acceptedFiles) {\n      if (uploadProgressData !== null) newUploadProgressData[i] = uploadProgressData[i];else newUploadProgressData[i] = 0;\n    }\n\n    setUploadProgressData(newUploadProgressData);\n    setFiles(acceptedFiles); // reader.readAsDataURL(acceptedFiles[0]);\n  }, []);\n\n  var _useDropzone = Object(react_dropzone__WEBPACK_IMPORTED_MODULE_7__[\"useDropzone\"])({\n    onDrop: onDrop\n  }),\n      getRootProps = _useDropzone.getRootProps,\n      getInputProps = _useDropzone.getInputProps,\n      isDragActive = _useDropzone.isDragActive; // const [file, setFile] = useState();\n\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useState\"])(null),\n      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(_useState, 2),\n      files = _useState2[0],\n      setFiles = _useState2[1];\n\n  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useState\"])(\"\"),\n      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(_useState3, 2),\n      fileListCssClass = _useState4[0],\n      setFileListCssClass = _useState4[1];\n\n  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useState\"])(null),\n      _useState6 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(_useState5, 2),\n      uploadProgressData = _useState6[0],\n      setUploadProgressData = _useState6[1];\n\n  var _useState7 = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useState\"])(false),\n      _useState8 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(_useState7, 2),\n      isMultiUploading = _useState8[0],\n      setIsMultiUploading = _useState8[1];\n\n  var _useState9 = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useState\"])(null),\n      _useState10 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(_useState9, 2),\n      uploadedFileIndex = _useState10[0],\n      setUploadedFileIndex = _useState10[1];\n\n  Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useEffect\"])(function () {\n    if (files !== null) {\n      var fileUploaderHeight = document.getElementById('file-uploader').offsetHeight; // console.log((files.length + 1 * 37),fileUploaderHeight)\n\n      if (fileUploaderHeight < (files.length + 1) * 37) setFileListCssClass(' w-scroll');else setFileListCssClass('');\n    }\n  }, [files]);\n  Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useEffect\"])(function () {\n    if (isMultiUploading === true) {\n      setUploadedFileIndex(0);\n    }\n  }, [isMultiUploading]);\n  Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useEffect\"])(function () {\n    if (uploadedFileIndex !== null) {\n      uploadFile(uploadedFileIndex, true);\n    }\n  }, [uploadedFileIndex]);\n\n  var renameFile = function renameFile(index) {// console.log(files[index], \"rename this file\")\n  };\n\n  var removeFile = function removeFile(index) {\n    var newFiles = [].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2___default()(files.slice(0, index)), _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2___default()(files.slice(index + 1, files.length)));\n    setFiles(newFiles);\n  };\n\n  var uploadFile = function uploadFile(index) {\n    var multiple = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var folderPath = \"/\";\n\n    if (selectedFolder !== null) {\n      folderPath = selectedFolder.slice(-1) === \"/\" ? selectedFolder : selectedFolder + \"/\";\n    }\n\n    var filePath = folderPath + files[index].path.split(files[index].name)[0]; // console.log(selectedFolder)\n    // console.log(files)\n    // console.log(filePath,\"filePath\")\n\n    var url = \"http://\".concat(window.location.hostname, \":3000/upload/\").concat(filePath.split(fsep).join('+++'));\n    var formData = new FormData();\n    formData.append('file', files[index]);\n    var config = {\n      onUploadProgress: function onUploadProgress(progressEvent) {\n        var newUploadProgressData = [].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2___default()(uploadProgressData.slice(0, index)), [progressEvent.loaded], _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2___default()(uploadProgressData.slice(index + 1, uploadProgressData.length)));\n        setUploadProgressData(newUploadProgressData);\n      }\n    };\n    axios__WEBPACK_IMPORTED_MODULE_6___default.a.post(url, formData, config).then(function (res) {\n      // console.log(res);\n      if (multiple === true) {\n        if (index + 1 < files.length) {\n          setUploadedFileIndex(index + 1);\n        } else {\n          props.setShowFileUploader(false);\n          props.refreshFileManager(res.data);\n        }\n      }\n    });\n  };\n\n  var uploadFiles = /*#__PURE__*/function () {\n    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.mark(function _callee() {\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setIsMultiUploading(true);\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function uploadFiles() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var fileListDisplay, dropZoneDisplay;\n\n  if (files && files.length > 0) {\n    var filesList = files.map(function (f, index) {\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(FileUploaderListItem, {\n        key: index,\n        index: index,\n        file: f,\n        uploadProgress: uploadProgressData[index],\n        renameFile: renameFile,\n        removeFile: removeFile,\n        uploadFile: uploadFile\n      });\n    });\n    fileListDisplay = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"div\", {\n      id: \"file-uploader-summary-list\"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"div\", {\n      id: \"file-list\",\n      className: fileListCssClass\n    }, filesList), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"div\", {\n      id: \"file-list-actions\"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"div\", {\n      style: {\n        \"float\": \"right\"\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"div\", {\n      className: \"upload-items-counter\"\n    }, uploadedFileIndex !== null ? uploadedFileIndex + \" / \" + files.length + \" Total\" : \"\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"a\", {\n      className: \"button\",\n      onClick: function onClick() {\n        return props.setShowFileUploader(false);\n      }\n    }, \"Close\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"a\", {\n      className: \"button\",\n      onClick: uploadFiles\n    }, \" Upload Files \"))));\n  } else {\n    dropZoneDisplay = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"div\", _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({\n      className: \"dropzone-container\"\n    }, getRootProps()), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"input\", _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, getInputProps(), {\n      name: \"file\"\n    })), isDragActive ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"p\", null, \"Drop the files here ...\") : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"p\", null, \"Drag 'n' drop some files here, or click to select files\"));\n  }\n\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_5___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"div\", {\n    id: \"file-uploader\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"a\", {\n    className: \"close-file-uploader\",\n    onClick: function onClick() {\n      return props.setShowFileUploader(false);\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_11__[\"FaWindowClose\"], null)), dropZoneDisplay, fileListDisplay));\n}\n\nvar FileUploaderListItem = function FileUploaderListItem(props) {\n  var file = props.file,\n      index = props.index,\n      uploadProgress = props.uploadProgress;\n  var percent = uploadProgress;\n  if (uploadProgress > 0) percent = parseInt(100 * uploadProgress / file.size);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"div\", {\n    className: \"file-uploader-list-item\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"div\", {\n    className: \"list-item-file-info\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"span\", {\n    className: \"file-name\"\n  }, file.path), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"span\", {\n    className: \"file-size\"\n  }, Object(_helpers__WEBPACK_IMPORTED_MODULE_12__[\"humanFileSize\"])(file.size))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"div\", {\n    className: \"list-item-progress-container\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"div\", {\n    className: \"list-item-progress-bar\",\n    style: {\n      width: percent + \"%\"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"span\", null, Object(_helpers__WEBPACK_IMPORTED_MODULE_12__[\"humanFileSize\"])(uploadProgress)))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"div\", {\n    className: \"list-item-actions\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"a\", {\n    className: \"button\",\n    onClick: function onClick() {\n      return props.renameFile(index);\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(react_icons_bi__WEBPACK_IMPORTED_MODULE_9__[\"BiRename\"], null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"a\", {\n    className: \"button\",\n    onClick: function onClick() {\n      return props.uploadFile(index);\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(react_icons_im__WEBPACK_IMPORTED_MODULE_10__[\"ImUpload\"], null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"a\", {\n    className: \"button\",\n    onClick: function onClick() {\n      return props.removeFile(index);\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(react_icons_ri__WEBPACK_IMPORTED_MODULE_8__[\"RiDeleteBin6Fill\"], null))));\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (FileUploader);\n\n//# sourceURL=webpack:///./src/app/file-manager/file-uploader.js?");

/***/ }),

/***/ "./src/app/file-manager/file-viewer.js":
/*!*********************************************!*\
  !*** ./src/app/file-manager/file-viewer.js ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"./node_modules/@babel/runtime/helpers/asyncToGenerator.js\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"./node_modules/@babel/runtime/regenerator/index.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! axios */ \"./node_modules/axios/index.js\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var react_json_editor_ajrm__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-json-editor-ajrm */ \"./node_modules/react-json-editor-ajrm/es/index.js\");\n/* harmony import */ var react_json_editor_ajrm_locale_en__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-json-editor-ajrm/locale/en */ \"./node_modules/react-json-editor-ajrm/locale/en.js\");\n/* harmony import */ var react_json_editor_ajrm_locale_en__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react_json_editor_ajrm_locale_en__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../helpers */ \"./src/app/helpers.js\");\n/* harmony import */ var react_icons_fa__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react-icons/fa */ \"./node_modules/react-icons/fa/index.esm.js\");\n/* harmony import */ var _loading_spinner__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../loading-spinner */ \"./src/app/loading-spinner.js\");\n\n\n\n\n\n\n\n\n\n\n\nvar FileViewer = function FileViewer(props) {\n  var file = props.file,\n      setShowFileViewer = props.setShowFileViewer,\n      selectedFolder = props.selectedFolder;\n  var ref = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useRef\"])();\n  Object(_helpers__WEBPACK_IMPORTED_MODULE_7__[\"useOnClickOutside\"])(ref, function () {\n    return setShowFileViewer(false);\n  });\n  var fileType = file.path.split('.')[file.path.split('.').length - 1];\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useState\"])(null),\n      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState, 2),\n      data = _useState2[0],\n      setData = _useState2[1];\n\n  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useState\"])(true),\n      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useEffect\"])(function () {\n    getFile();\n  }, []);\n\n  function getFile() {\n    if (fileType === \"json\") {\n      getJson();\n    }\n  }\n\n  function getJson() {\n    return _getJson.apply(this, arguments);\n  }\n\n  function _getJson() {\n    _getJson = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee() {\n      var response, res;\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetch(\"http://\".concat(window.location.hostname, \":3000/json/\").concat(file.path.split('/').join('+++')), {\n                method: 'GET',\n                headers: {\n                  'Content-Type': 'application/json'\n                }\n              });\n\n            case 2:\n              response = _context.sent;\n              _context.next = 5;\n              return response.json();\n\n            case 5:\n              res = _context.sent;\n              console.log(res, \" GET JSON RES\");\n              setData(res);\n              setLoading(false);\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _getJson.apply(this, arguments);\n  }\n\n  function updateJson(_x) {\n    return _updateJson.apply(this, arguments);\n  }\n\n  function _updateJson() {\n    _updateJson = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee2(json) {\n      var f, formData, filePath, url;\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              f = new File([json], file.name, {\n                type: \"application/json\"\n              });\n              formData = new FormData();\n              formData.append(\"file\", f, file.name);\n              filePath = file.path.split('/home/pi')[1].split(file.name)[0]; // console.log(filePath, \" FILE PATH\")\n\n              url = \"http://\".concat(window.location.hostname, \":3000/upload/\").concat(filePath.split(\"/\").join('+++'));\n              axios__WEBPACK_IMPORTED_MODULE_4___default.a.post(url, formData).then(function (res) {\n                console.log(\"JSON UPDATED!\");\n                console.log(res, \" RES \");\n              });\n\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _updateJson.apply(this, arguments);\n  }\n\n  function onJsonChange(val) {\n    updateJson(val.json);\n  }\n\n  var fileViewerDisplay = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_loading_spinner__WEBPACK_IMPORTED_MODULE_9__[\"default\"], null);\n\n  if (fileType === \"json\" && loading === false) {\n    fileViewerDisplay = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"div\", {\n      className: \"json-viewer-container\"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_json_editor_ajrm__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n      id: file.path,\n      placeholder: data,\n      locale: react_json_editor_ajrm_locale_en__WEBPACK_IMPORTED_MODULE_6___default.a,\n      height: \"100%\",\n      width: \"100%\",\n      onChange: onJsonChange\n    }));\n  }\n\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"div\", {\n    ref: ref,\n    id: \"file-viewer\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"a\", {\n    className: \"close-file-viewer\",\n    onClick: function onClick() {\n      return setShowFileViewer(false);\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_8__[\"FaWindowClose\"], null)), fileViewerDisplay);\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (FileViewer);\n\n//# sourceURL=webpack:///./src/app/file-manager/file-viewer.js?");

/***/ })

}]);