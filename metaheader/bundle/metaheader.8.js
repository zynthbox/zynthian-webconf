(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{24:function(e,t,n){"use strict";n.r(t);var r=n(33),a=n.n(r),o=n(2),c=n.n(o),u=n(34),i=n.n(u),l=n(0),s=n.n(l),f=n(94),d=n(378),h=n(4),p=(n(36),n(7)),m=n(53),v=n.n(m),E=function(e){var t=e.error,n=e.onDismiss;return console.log(v()(t.message)),s.a.createElement("div",{id:"error-modal"},s.a.createElement("h3",null,t.type),s.a.createElement("p",null,t.message),s.a.createElement("div",null,s.a.createElement("a",{onClick:n,className:"error-modal-dismiss"},"OK")))};Object(f.i)({iconComponent:d.a});var b=Object(l.lazy)((function(){return Promise.all([n.e(0),n.e(6),n.e(12)]).then(n.bind(null,423))})),g=Object(l.lazy)((function(){return n.e(13).then(n.bind(null,421))}));t.default=function(){var e=Object(l.useContext)(p.a),t=e.fileManagerState,n=e.fileManagerDispatch,r=Object(l.useState)(!1),o=c()(r,2),u=o[0],f=o[1];function d(){return m.apply(this,arguments)}function m(){return(m=a()(i.a.mark((function e(){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r="/home/pi/"+(null!==t.selectedFolder?t.selectedFolder+"/":""),fetch("http://".concat(window.location.hostname,":3000/folder/").concat(r.split("/").join("+++")),{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(){var e=a()(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:(r=e.sent).errno||n({type:"SET_FILES",payload:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){n({type:"SET_ERROR",payload:{message:"failed to fetch ".concat(r),type:"Folder Error"}})}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(l.useEffect)((function(){d()}),[t.selectedFolder]);var v,w=s.a.createElement(h.a,null);return!1===t.loading&&(w=s.a.createElement(s.a.Fragment,null,s.a.createElement(g,null),s.a.createElement(l.Suspense,{fallback:s.a.createElement(h.a,null)},s.a.createElement(b,{fsep:"/",refreshFileManager:d,showFileUploader:u,setShowFileUploader:f,getFiles:d})))),null!==t.error&&(v=s.a.createElement(E,{error:t.error,onDismiss:function(){return n({type:"SET_ERROR",payload:null})}})),s.a.createElement("div",{style:{height:window.innerHeight-170},className:"file-manager-wrapper"},v,w)}},36:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return l}));var r=n(2),a=n.n(r),o=(n(53),n(0));function c(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=t?1e3:1024;if(Math.abs(e)<r)return e+" B";var a=t?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],o=-1,c=Math.pow(10,n);do{e/=r,++o}while(Math.round(Math.abs(e)*c)/c>=r&&o<a.length-1);return e.toFixed(n)+" "+a[o]}function u(e,t){Object(o.useEffect)((function(){var n=function(n){e.current&&!e.current.contains(n.target)&&t(n)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),function(){document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[e,t])}function i(e){var t=Object(o.useRef)();return Object(o.useEffect)((function(){t.current=e}),[e]),t.current}var l=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.shouldPreventDefault,c=void 0===r||r,u=n.delay,i=void 0===u?300:u,l=Object(o.useState)(!1),f=a()(l,2),d=f[0],h=f[1],p=Object(o.useRef)(),m=Object(o.useRef)(),v=Object(o.useCallback)((function(t){c&&t.target&&(t.target.addEventListener("touchend",s,{passive:!1}),m.current=t.target),p.current=setTimeout((function(){e(t),h(!0)}),i)}),[e,i,c]),E=Object(o.useCallback)((function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];p.current&&clearTimeout(p.current),n&&!d&&t(),h(!1),c&&m.current&&m.current.removeEventListener("touchend",s)}),[c,t,d]);return{onMouseDown:function(e){return v(e)},onTouchStart:function(e){return v(e)},onMouseUp:function(e){return E(e)},onMouseLeave:function(e){return E(e,!1)},onTouchEnd:function(e){return E(e)}}},s=function(e){(function(e){return"touches"in e})(e)&&e.touches.length<2&&e.preventDefault&&e.preventDefault()}}}]);