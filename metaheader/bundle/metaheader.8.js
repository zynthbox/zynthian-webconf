(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{18:function(e,t,n){"use strict";n.r(t);var a=n(49),r=n.n(a),i=n(26),l=n.n(i),c=n(44),o=n.n(c),s=n(1),u=n.n(s),f=n(27),d=n.n(f),p=n(0),h=n.n(p),m=n(85),v=n(373),b=n(2),g=n(65),E=n.n(g),w=n(66),y=n.n(w),O=n(130),j=n(251),F=n(100),x=n(250),S=n(35);var k=function(e){var t=e.file,n=e.index,a=e.uploadProgress,r=a;return a>0&&(r=parseInt(100*a/t.size)),h.a.createElement("div",{className:"file-uploader-list-item"},h.a.createElement("div",{className:"list-item-file-info"},h.a.createElement("span",{className:"file-name"},t.path),h.a.createElement("span",{className:"file-size"},Object(S.a)(t.size))),h.a.createElement("div",{className:"list-item-progress-container"},h.a.createElement("div",{className:"list-item-progress-bar",style:{width:r+"%"}},h.a.createElement("span",null,Object(S.a)(a)))),h.a.createElement("div",{className:"list-item-actions"},h.a.createElement("a",{className:"button",onClick:function(){return e.renameFile(n)}},h.a.createElement(F.a,null)),h.a.createElement("a",{className:"button",onClick:function(){return e.uploadFile(n)}},h.a.createElement(x.a,null)),h.a.createElement("a",{className:"button",onClick:function(){return e.removeFile(n)}},h.a.createElement(j.a,null))))},C=function(e){var t=e.selectedFolder,n=e.fsep,a=Object(p.useCallback)((function(e){var t=[];for(var n in e)t[n]=null!==C?C[n]:0;N(t),b(e)}),[]),r=Object(O.b)({onDrop:a}),i=r.getRootProps,c=r.getInputProps,s=r.isDragActive,f=Object(p.useState)(null),m=u()(f,2),v=m[0],b=m[1],g=Object(p.useState)(""),w=u()(g,2),j=w[0],F=w[1],x=Object(p.useState)(null),S=u()(x,2),C=S[0],N=S[1],P=Object(p.useState)(!1),D=u()(P,2),B=D[0],T=D[1],M=Object(p.useState)(null),U=u()(M,2),H=U[0],I=U[1];Object(p.useEffect)((function(){if(null!==v){var e=document.getElementById("file-uploader").offsetHeight;console.log(v.length+37,e),e<37*(v.length+1)?F(" w-scroll"):F("")}}),[v]),Object(p.useEffect)((function(){!0===B&&I(0)}),[B]),Object(p.useEffect)((function(){null!==H&&R(H,!0)}),[H]);var L,A,z=function(e){console.log(v[e],"rename this file")},J=function(e){var t=[].concat(o()(v.slice(0,e)),o()(v.slice(e+1,v.length)));b(t)},R=function(a){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t+v[a].path.split(v[a].name)[0];console.log(i,"filePath");var l="http://".concat(window.location.hostname,":3000/upload/").concat(i.split(n).join("+++")),c=new FormData;c.append("file",v[a]);var s={onUploadProgress:function(e){var t=[].concat(o()(C.slice(0,a)),[e.loaded],o()(C.slice(a+1,C.length)));N(t)}};y.a.post(l,c,s).then((function(t){console.log(t),!0===r&&(a+1<v.length?I(a+1):(e.setShowFileUploader(!1),e.refreshFileManager(t.data)))}))},_=function(){var e=l()(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T(!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(v&&v.length>0){var G=v.map((function(e,t){return h.a.createElement(k,{key:t,index:t,file:e,uploadProgress:C[t],renameFile:z,removeFile:J,uploadFile:R})}));L=h.a.createElement("div",{id:"file-uploader-summary-list"},h.a.createElement("div",{id:"file-list",className:j},G),h.a.createElement("div",{id:"file-list-actions"},h.a.createElement("div",{style:{float:"right"}},h.a.createElement("a",{className:"button",onClick:function(){return e.setShowFileUploader(!1)}},"Close"),h.a.createElement("a",{className:"button",onClick:_}," Upload Files "))))}else A=h.a.createElement("div",E()({className:"dropzone-container"},i()),h.a.createElement("input",E()({},c(),{name:"file"})),s?h.a.createElement("p",null,"Drop the files here ..."):h.a.createElement("p",null,"Drag 'n' drop some files here, or click to select files"));return h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{id:"file-uploader"},A,L))},N=n(252),P=n(253),D=n(54);var B=function(e){var t=e.navigateHistory,n=e.browserHistory,a=e.browserHistoryIndex,r=Object(p.useState)(!1),i=u()(r,2),l=i[0],c=i[1];Object(p.useEffect)((function(){setTimeout((function(){var e=document.getElementsByClassName("fa-level-up-alt")[0];e&&null!==e&&e.setAttribute("transform","scale(-1 1)")}),10)}),[]);var o,s=Object(p.useRef)();if(Object(S.b)(s,(function(){return c(!1)})),!0===l){var f=n.map((function(e,n){var r,i=e.path.split("/")[e.path.split("/").length-1];return n===a&&(r="active"),h.a.createElement("li",null,h.a.createElement("a",{className:r,title:e.path,onClick:function(){return t(n)}},i))}));o=h.a.createElement("div",{ref:s,className:"browser-history-submenu"},h.a.createElement("a",{onClick:function(){return c(!1)},className:"close-browser-history"},h.a.createElement(D.e,null)),h.a.createElement("ul",null,f))}return h.a.createElement("div",{className:"file-navbar-container-custom"},h.a.createElement("ul",{className:"browser-navigation-menu"},h.a.createElement("li",null,h.a.createElement("a",{onClick:function(){return t("back")}},h.a.createElement(N.a,null))),h.a.createElement("li",null,h.a.createElement("a",{onClick:function(){return t("forward")}},h.a.createElement(N.b,null))),h.a.createElement("li",null,h.a.createElement("a",{onClick:function(){return c(!0)}},h.a.createElement(P.a,null)))),o,h.a.createElement(m.f,null))},T=function(e){var t=e.displayedFiles,n=e.selectedFolder,a=e.fsep,r=e.folderChain,i=Object(p.useState)(""),c=u()(i,2),o=c[0],s=c[1],f=Object(p.useState)(""),v=u()(f,2),b=v[0],g=v[1],E=Object(p.useState)(!1),w=u()(E,2),y=w[0],O=w[1],j=Object(p.useRef)(null);function F(){j.current&&j.current.requestFileAction(m.a.ClearSelection)}function x(){var e=window.prompt("Enter new Folder Name:");!function(e){S.apply(this,arguments)}(n+a+e)}function S(){return(S=l()(d.a.mark((function t(n){var a,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://".concat(window.location.hostname,":3000/createfolder"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullPath:n})});case 2:return a=t.sent,t.next=5,a.json();case 5:r=t.sent,e.refreshFileManager(r);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function k(e){var t=e.state.selectedFiles[0].path,r=t.split("/")[t.split("/").length-1],i=window.prompt('Enter new name for "'.concat(r,'":')),l=t.split(n)[0]+n+a+i;!function(e,t){N.apply(this,arguments)}(t,l)}function N(){return(N=l()(d.a.mark((function t(n,a){var r,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://".concat(window.location.hostname,":3000/rename"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullPath:a,previousPath:n})});case 2:return r=t.sent,t.next=5,r.json();case 5:i=t.sent,e.refreshFileManager(i);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function P(e,t){return D.apply(this,arguments)}function D(){return(D=l()(d.a.mark((function t(n,a){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n[a],fetch("http://".concat(window.location.hostname,":3000/delete"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullPath:r})}).then(function(){var t=l()(d.a.mark((function t(r){var i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a!==n.length-1){t.next=8;break}return t.next=3,r.json();case 3:i=t.sent,F(),e.refreshFileManager(i),t.next=9;break;case 8:P(n,a+1);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function T(){return(T=l()(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],t.state.selectedFiles.forEach((function(e,t){n.push(e.path)})),n.forEach(function(){var e=l()(d.a.mark((function e(t,n){var r,i,l,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://".concat(window.location.hostname,":3000/download"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:t})});case 2:return r=e.sent,e.next=5,r.blob();case 5:i=e.sent,l=window.URL.createObjectURL(i),(c=document.createElement("a")).href=l,c.download=t.split(a)[t.split(a).length-1],document.body.appendChild(c),c.click(),c.remove();case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e,t,n){return U.apply(this,arguments)}function U(){return(U=l()(d.a.mark((function t(n,a,r){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.forEach(function(){var t=l()(d.a.mark((function t(i,l){var c,o,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=a[l],t.next=3,fetch("http://".concat(window.location.hostname,":3000/copypaste"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({previousPath:i,destinationPath:c,deleteOrigin:r})});case 3:return o=t.sent,t.next=6,o.json();case 6:s=t.sent,l===n.length-1&&(F(),e.refreshFileManager(s));case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var H,I,L=Object(m.h)({id:"create_files",button:{name:"Create Folder",toolbar:!0,contextMenu:!0,icon:m.b.folderCreate}}),A=Object(m.h)({id:"edit_files",button:{name:"Edit",contextMenu:!0,icon:m.b.archive}}),z=Object(m.h)({id:"rename_files",button:{name:"Rename",contextMenu:!0,icon:m.b.code}}),J=Object(m.h)({id:"paste_files",button:{name:"Paste",contextMenu:!0,icon:m.b.paste}}),R=[L,A,z,m.a.UploadFiles,m.a.DownloadFiles,m.a.DeleteFiles,m.a.CopyFiles,m.a.StartDragNDrop,m.a.EndDragNDrop,J];return!0===e.showFileUploader&&(I=h.a.createElement(h.a.Fragment,null,h.a.createElement(C,{selectedFolder:n,fsep:a,refreshFileManager:e.refreshFileManager,setShowFileUploader:e.setShowFileUploader}))),h.a.createElement("div",{style:{height:window.innerHeight-190,position:"relative"},onDragOver:function(){!1===y&&(clearTimeout(H),e.setShowFileUploader(!0))},onDragLeave:function(){H=setTimeout((function(){e.setShowFileUploader(!1)}),10)}},I,h.a.createElement(m.c,{files:t,folderChain:r,fileActions:R,onFileAction:function(t){var r;t.id===m.a.OpenFiles.id&&function(t){e.openFiles(t.payload.files[0])}(t),t.id===L.id&&x(),t.id===A.id&&alert("Edit Folder Action"),t.id===z.id&&k(t),t.id===m.a.UploadFiles.id&&e.setShowFileUploader(!0),t.id===m.a.DownloadFiles.id&&function(e){T.apply(this,arguments)}(t),t.id===m.a.DeleteFiles.id&&function(e){var t="are you sure you want to delete following files? \n",n=[];e.state.selectedFilesForAction.forEach((function(e,a){n.push(e.path),t+=e.path+"\n"})),window.confirm(t)&&P(n,0)}(t),t.id===m.a.CopyFiles.id&&function(e){var t=[];e.state.selectedFiles.forEach((function(e,n){t.push(e.path)})),s(t)}(t),t.id===J.id&&(r=[],o.forEach((function(e,t){var i=n+a;e.indexOf(".")>-1&&(i=n+a+e.split(a)[e.split(a).length-1]),r.push(i)})),M(o,r)),t.id===m.a.StartDragNDrop.id&&function(e){O(!0);var t=[];e.state.selectedFiles.forEach((function(e,n){t.push(e.path)})),g(t)}(t),t.id===m.a.EndDragNDrop.id&&function(e){O(!1);var t=[];b.forEach((function(r,i){var l=n+e.payload.destination.path.split(n)[1];r.indexOf(".")>-1&&(l+=a+r.split(a)[r.split(a).length-1]),t.push(l)})),M(b,t,!0)}(t)},defaultFileViewActionId:m.a.EnableListView.id,clearSelectionOnOutsideClick:!0,ref:j},h.a.createElement(B,{navigateHistory:e.navigateHistory,browserHistory:e.browserHistory,browserHistoryIndex:e.browserHistoryIndex}),h.a.createElement(m.g,null),h.a.createElement(m.e,null),h.a.createElement(m.d,null)))};function M(e){var t,n,a=e.item,r=[];return a.id&&(r=[].concat(o()(e.parentIds),[a.id])),a.children&&(n=h.a.createElement("span",{className:"toggle-sub-menu",style:{left:8+12*a.level}},h.a.createElement("i",{className:!0===a.toggled?"glyphicon glyphicon-chevron-down":"glyphicon glyphicon-chevron-right"})),t=h.a.createElement("div",{style:{height:!0===a.toggled?"auto":"0px",overflow:"hidden"}},h.a.createElement(U,E()({},e,{items:a.children,parentIds:r})))),h.a.createElement("li",null,n,h.a.createElement("a",{style:{paddingLeft:25+15*a.level},className:!0===a.active?"active":"",onClick:function(){return e.onClick(a,r)}},a.name," "),t)}function U(e){var t=e.items.map((function(t,n){return h.a.createElement(M,E()({key:n},e,{item:t}))}));return h.a.createElement("ul",null,t)}var H=function(e){return h.a.createElement("div",{className:"tree-view-container"},h.a.createElement("ul",null,h.a.createElement(M,{onClick:function(t,n){t.toggled=!0!==t.toggled,t.active=!0,e.onTreeItemClick(t,n)},item:e.data})))};function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Object(m.i)({iconComponent:v.a});t.default=function(){var e,t="/zynthian-my-data",n={id:"xcv",name:t,isDir:!0},a=Object(p.useState)([]),r=u()(a,2),i=r[0],c=r[1],s=Object(p.useState)([]),f=u()(s,2),m=f[0],v=f[1],g=Object(p.useState)([n]),E=u()(g,2),w=E[0],y=E[1],O=Object(p.useState)(t),j=u()(O,2),F=j[0],x=j[1],k=Object(S.c)(F),C=Object(p.useState)([]),N=u()(C,2),P=N[0],D=N[1],B=Object(p.useState)(-1),M=u()(B,2),U=M[0],I=M[1],A=Object(p.useState)(!1),z=u()(A,2),J=z[0],R=z[1],_=Object(p.useState)(null),G=u()(_,2),V=G[0],Y=G[1],Z=Object(p.useState)(!1),q=u()(Z,2),K=q[0],Q=q[1];function W(){return(W=l()(d.a.mark((function e(){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://".concat(window.location.hostname,":3000/mydata"),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return n=e.sent,e.next=5,n.json();case 5:a=e.sent,c(a),x(t),X(a);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e){var t=[];e.forEach((function(e,n){if(e.path.indexOf(F+"/")>-1){var a=e.path.split(F+"/")[1];if(a&&-1===a.indexOf("/")){var r=L(L({},e),{},{id:n+1,isDir:!(a.indexOf(".")>-1),name:a});t.push(r)}}})),v(t)}function $(e,t){var n=[{}];return e.forEach((function(e){n.length=e.level,n[e.level-1].children=n[e.level-1].children||[],n[e.level-1].children.push(e),n[e.level]=e,n[e.level]===t&&(n[e.level].toggled=!0,n[e.level].active=!1)})),n[0].children}function ee(e){var t,n,a,r;if(t=e.id,n=!1,w.forEach((function(e,a){e.id===t&&(n=!0)})),n){a=F.split(e.name)[0]+e.name;var i=w.findIndex((function(t){return t.id===e.id}));r=o()(w.slice(0,i+1))}else a=F+"/"+e.name,r=[].concat(o()(w),[e]);y(r),x(a),te(Object.assign({toggled:!0,active:!0},e))}function te(e,a,r){var i=Object.assign({},V);!function e(t,n){t.children.forEach((function(t,a){t.id===n.id?(t.active=n.active,t.toggled=n.toggled):t.active=!1,t.children&&t.children.length>0&&e(t,n)}))}(i,e),Y(i),a&&function(e,a){var r=t+e.path.split(t)[1],i=r.split(t)[1].split("/"),l=[n];a.forEach((function(e,t){l.push({id:e,path:r,name:i[t+1],isDir:!0})})),y(l),x(r)}(e,a)}Object(p.useEffect)((function(){!function(){W.apply(this,arguments)}()}),[]),Object(p.useEffect)((function(){if(X(i),null!==F&&F!==k&&!1===J){var e=[],t={path:F,folderChain:w};e=U!==P.length-1?[].concat(o()(P.slice(0,U)),[t]):[].concat(o()(P),[t]),D(e)}R(!1)}),[F]),Object(p.useEffect)((function(){var e=P.length-1;I(e)}),[P]),Object(p.useEffect)((function(){U!==P.length&&P.length>0?(x(P[U].path),y(P[U].folderChain)):R(!1)}),[U]),Object(p.useEffect)((function(){i.length>0&&function(){var e=[];i.forEach((function(n,a){var r=n.path.split(t+"/")[1];r&&(-1!==r.indexOf(".")&&"lv2"!==r.split(".")[r.split(".").length-1]||e.push({id:a+1,name:r.indexOf("/")>-1?r.split("/")[r.split("/").length-1]:r,level:1+(n.path.indexOf("/")>-1?r.split("/").length-1:0),path:n.path}))}));var n={name:"zynthian-my-data",toggled:!0,path:"/home/pi/zynthian-my-data",children:$(e)};Y(n)}()}),[i]),null!==V&&(e=h.a.createElement(H,{data:V,onTreeItemClick:te,openFiles:ee}));var ne=h.a.createElement(b.a,null);return null!==i&&null!==m&&(ne=h.a.createElement(p.Suspense,{fallback:h.a.createElement(b.a,null)},h.a.createElement(T,{displayedFiles:m,selectedFolder:F,browserHistory:P,browserHistoryIndex:U,navigateHistory:function(e){var t;R(!0),"back"===e&&U-1>-1?t=U-1:"forward"===e&&U<=P.length-1?t=U+1:"forward"!==e&&"back"!==e&&(t=e),"number"==typeof t&&I(t)},fsep:"/",folderChain:w,setFolderChain:y,setSelectedFolder:x,openFiles:ee,refreshFileManager:function(e){c(e),X(e)},showFileUploader:K,setShowFileUploader:Q}))),h.a.createElement("div",{className:"file-manager-wrapper"},e,ne)}},35:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return l}));var a=n(0);function r(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=t?1e3:1024;if(Math.abs(e)<a)return e+" B";var r=t?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],i=-1,l=Math.pow(10,n);do{e/=a,++i}while(Math.round(Math.abs(e)*l)/l>=a&&i<r.length-1);return e.toFixed(n)+" "+r[i]}function i(e,t){Object(a.useEffect)((function(){var n=function(n){e.current&&!e.current.contains(n.target)&&t(n)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),function(){document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[e,t])}function l(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e}),[e]),t.current}}}]);