(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{18:function(e,t,n){"use strict";n.r(t);var a=n(51),c=n.n(a),r=n(27),l=n.n(r),o=n(1),i=n.n(o),s=n(28),u=n.n(s),p=n(0),m=n.n(p),f=n(72),d=n.n(f),h=n(372),E=n(63),y=n(364),v=n(132),k=n(35),w=n(39),S=n.n(w),g=n(135),j=function(e){var t,n,a,c=e.index,r=e.sample,o=e.trackIndex,s=e.removeSample,f=e.uploadSample,d=e.setLoadFromSketchPadSampleIndex,h=e.setLoadFromSketchPadFileType,E=Object(p.useState)(null),y=i()(E,2),v=y[0],k=y[1],w=Object(p.useState)(!1),S=i()(w,2),g=S[0],j=S[1];function b(e){var t=new FileReader;t.addEventListener("load",(function(){var e=t.result;t.result.indexOf("data:application/octet-stream;")>-1&&(e=t.result.split(":application/octet-stream;").join(":audio/wav;")),k(e)}),!1),t.readAsDataURL(e)}function O(){return(O=l()(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=r.path.split(".").join("++")).indexOf("/")>-1&&(t=t.split("/").join("+")),e.next=4,fetch("http://".concat(window.location.hostname,":3000/sample/").concat(o+1+"+++"+t),{method:"GET",headers:{"Content-Type":"application/json"}});case 4:return n=e.sent,e.next=7,n.blob();case 7:b(e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(p.useEffect)((function(){r&&(r.name?(b(r),f(r,c)):r.path&&function(){O.apply(this,arguments)}())}),[r]),r?(t=!0===g?m.a.createElement("a",{className:"play-sample-button",onClick:function(){j(!1),document.getElementById("sample-".concat(o+1,"-").concat(c+1,"-audio-player")).pause()}},m.a.createElement("i",{className:"glyphicon glyphicon-pause"})):m.a.createElement("a",{className:"play-sample-button",onClick:function(){j(!0),document.getElementById("sample-".concat(o+1,"-").concat(c+1,"-audio-player")).play()}},m.a.createElement("i",{className:"glyphicon glyphicon-play-circle"})),n=m.a.createElement("a",{className:"edit-sample-button",onClick:function(){return s(r,c,!0)}},m.a.createElement("i",{className:"glyphicon glyphicon-trash"}))):n=m.a.createElement("a",{className:"edit-sample-button",onClick:function(){return function(e){h("wav"),d(e)}(c)}},m.a.createElement("i",{className:"glyphicon glyphicon-plus"})),r&&((a=r.path?r.path:r.name).indexOf("/")>-1&&(a=a.split("/")[a.split("/").length-1]),a.split(".")[0].length>16&&(a=a.substring(0,17)+"...wav")),m.a.createElement("li",{id:"sample-".concat(o+1,"-").concat(c+1)},m.a.createElement("audio",{id:"sample-".concat(o+1,"-").concat(c+1,"-audio-player"),src:v}),t,m.a.createElement("h4",{title:r?r.path:""},r?a:"---"),n)},b=n(361),O=n(131),x=n(362),T=function(e){var t="json"===e.fileType?"sketches/my-sketches/temp/wav/":"capture/";"SAVE"===e.actionType&&(t="/");var n,a=Object(p.useState)(null),c=i()(a,2),r=c[0],o=c[1],s=Object(p.useState)(t),f=i()(s,2),d=f[0],h=f[1],y=Object(p.useState)(""),v=i()(y,2),w=v[0],S=v[1];function g(){return j.apply(this,arguments)}function j(){return(j=l()(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://".concat(window.location.hostname,":3000/mydata/").concat(d.split("/").join("+++")),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,o(n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}if(Object(p.useEffect)((function(){g()}),[]),Object(p.useEffect)((function(){null!==d&&(o(null),g())}),[d]),null!==r){var T="LOAD"===e.actionType?d:"zynthian-my-data/"+(d!==t?d+"/":"");n=r.map((function(t,n){var a=t.path,c=!0;a=t.path.split(T)[1];var r=m.a.createElement(E.a,null);if(a&&a.indexOf("/")>-1&&(c=!1,"LOAD"===e.actionType&&2===a.split("/").length&&(c=!0)),a&&a.indexOf(".")>-1){c=!1;var l=a.split(".")[a.split(".").length-1];r="json"===l?m.a.createElement(b.a,null):"wav"===l?m.a.createElement(O.b,null):m.a.createElement(O.a,null),("SAVE"===e.actionType&&1===a.split("/").length||"LOAD"===e.actionType&&l===e.fileType)&&(c=!0)}if(!0===c)return m.a.createElement("li",null,m.a.createElement("a",{onClick:function(){return highlightFile(n)},onDoubleClick:function(){return function(t){if("LOAD"===e.actionType)"wav"===e.fileType?e.insertSample(t.path,e.sampleIndex):e.loadSampleSet(t),e.setShowLoadFromSketchPadDialog(!1);else if("SAVE"===e.actionType){var n=t.path.split("zynthian-my-data/")[1];h(n)}}(t)}},r," ",a))}))}var N,C=Object(p.useRef)();Object(k.b)(C,(function(t){e.setShowLoadFromSketchPadDialog(!1)})),d!==t&&(N=m.a.createElement("li",null,m.a.createElement("a",{onClick:function(){return function(){var e;if(d.indexOf("/")>-1){var n=d.split("/")[d.split("/").length-1];e=d.split("/"+n)[0]}else e=t;h(e)}()}},m.a.createElement(E.b,null)," ...")));var P,L="sample-set-load-from-sketch-pad-dialog";return"SAVE"===e.actionType&&(L+=" w-save",P=m.a.createElement("div",{className:"dialog-footer"},m.a.createElement("input",{value:w,onChange:function(e){return S(e.target.value)},type:"text"}),m.a.createElement("button",{onClick:function(){return t="/home/pi/zynthian-my-data"+("/"===d?"":"/")+d+("/"===d?"":"/")+w+"/",void e.saveSampleSet(t);var t}},"Save"))),m.a.createElement("div",{ref:C,className:L},m.a.createElement("a",{className:"close",onClick:function(){return e.setShowLoadFromSketchPadDialog(!1)}},m.a.createElement(x.a,null)),m.a.createElement("h4",null,e.actionType," ","wav"===e.fileType?"FILE":"SAMPLESET"," FROM SKETCH PAD"),m.a.createElement("ul",null,N,n),P)},N=function(e){var t=e.index,n=e.samples,a=e.setSamples,c=e.samplesArray,r=e.getTrackSampleSet,o=Object(p.useState)("hidden"),s=i()(o,2),f=s[0],h=s[1],y=Object(p.useState)(!1),v=i()(y,2),k=v[0],w=v[1],b=Object(p.useState)(!1),O=i()(b,2),x=O[0],N=O[1],C=Object(p.useState)("LOAD"),P=i()(C,2),L=P[0],A=P[1],D=Object(p.useState)(!1),F=i()(D,2),B=F[0],I=F[1],M=Object(p.useState)(null),z=i()(M,2),G=z[0],J=z[1],R=Object(p.useState)("wav"),V=i()(R,2),U=V[0],Z=V[1],_="/zynthian-my-data/sketches/my-sketches/temp/wav/sampleset/bank.".concat(t+1,"/");function K(e){w(!1);var t=G;null===G&&((t=n.findIndex((function(e){return null===e})))&&null!==t||(t=0));var c=[].concat(S()(n.slice(0,t)),[e],S()(n.slice(t+1,n.length)));a(c),J(null)}function Y(e,t,n){return H.apply(this,arguments)}function H(){return(H=l()(u.a.mark((function e(n,a,c){var r,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.name,e.next=3,fetch("http://".concat(window.location.hostname,":3000/track/").concat(t+1),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sIndex:a,sPath:r})});case 3:return l=e.sent,e.next=6,l.json();case 6:e.sent,Q(n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(p.useEffect)((function(){!0===x&&w(!1)}),[x]),Object(p.useEffect)((function(){null!==G&&w(!0)}),[G]);var q,Q=function(){var e=l()(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=new FormData).append("file",t),d.a.post("http://".concat(window.location.hostname,":3000/upload/").concat(_.split("/").join("+++")),n).then((function(e){}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function W(e,t,n){return X.apply(this,arguments)}function X(){return(X=l()(u.a.mark((function e(n,c,r){var l,o,i,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=t+1,o=n.path,e.next=4,fetch("http://".concat(window.location.hostname,":3000/sample/").concat(l),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({trackIndex:l,sPath:o,sIndex:c})});case 4:return i=e.sent,e.next=7,i.json();case 7:s=e.sent,a(s);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e,t,n,a){return ee.apply(this,arguments)}function ee(){return(ee=l()(u.a.mark((function e(n,a,c,r){var l,o,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return J(null),l=n.split("/")[n.split("/").length-1],o=l,e.next=5,fetch("http://".concat(window.location.hostname,":3000/track/").concat(t+1),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sIndex:a,sPath:o})});case 5:return i=e.sent,e.next=8,i.json();case 8:e.sent,te(n,l,a,c,r);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e,t,n,a,c){return ne.apply(this,arguments)}function ne(){return(ne=l()(u.a.mark((function e(t,a,c,l,o){var i,s,p;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=!0===o?"/home/pi"+_+a:t,s=!0===o?t.split("/pi")[1]:_+a,!1,e.next=5,fetch("http://".concat(window.location.hostname,":3000/copypaste"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({previousPath:i,destinationPath:s,deleteOrigin:!1})});case 5:return p=e.sent,e.next=8,p.json();case 8:e.sent,!0===l?c===n.length-1&&r():r();case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(){return(ae=l()(u.a.mark((function e(a){var c,l,o,i,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=a.path.split("bank.")[1],l=a.path.split("/").join("+++"),e.next=4,fetch("http://".concat(window.location.hostname,":3000/json/").concat(l),{method:"GET",headers:{"Content-Type":"application/json"}});case 4:return o=e.sent,e.next=7,o.json();case 7:i=e.sent,s="/home/pi"+_.split(t+1)[0]+c,i.forEach((function(e,t){null!==e?$(s+e.path,t,!0):t===n.length-1&&r()}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ce,re,le,oe=c.map((function(e,a){return m.a.createElement(j,{key:a,index:a,sample:n[a],trackIndex:t,removeSample:W,addSample:K,uploadSample:Y,setLoadFromSketchPadSampleIndex:J,setLoadFromSketchPadFileType:Z})}));if(!0===x&&(ce=m.a.createElement("div",{className:"sample-set-upload-container"},m.a.createElement("div",{className:"dropzone-container"},m.a.createElement(g.a,{onDrop:function(e){return function(e){var t=[];for(var n in e){var c={path:e[n].path,file:e[n]};t.push(c)}a(e),N(!1)}(e)}},(function(e){var t=e.getRootProps,n=e.getInputProps;return m.a.createElement("section",null,m.a.createElement("div",t(),m.a.createElement("input",n()),m.a.createElement("p",null,"Drag 'n' drop some files here")))}))))),!0===k){var ie=m.a.createElement("a",{className:"button",onClick:function(){N(!0),w(!1)}},"Load from External Machine");null!==G&&(ie=m.a.createElement("a",{className:"button"},m.a.createElement("input",{type:"file",onChange:function(e){return K(e.target.files[0])}}),"Load from External Machine")),re=m.a.createElement("div",{className:"sample-set-upload-container source-picker"},m.a.createElement("a",{className:"button",onClick:function(){A("LOAD"),I(!0),w(!1)}},"Load from Sketchpad"),ie)}if(!0===B){var se=G;null===G&&((se=n.findIndex((function(e){return null===e})))&&null!==se||(se=0)),le=m.a.createElement(T,{actionType:L,setShowLoadFromSketchPadDialog:I,insertSample:$,loadSampleSet:function(e){return ae.apply(this,arguments)},saveSampleSet:function(e){var t=e.split("/pi")[1];fetch("http://".concat(window.location.hostname,":3000/createfolder"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullPath:t})}).then(function(){var t=l()(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.json();case 2:t.sent,n.forEach((function(t,n){null!==t&&$(e+t.path,n,!0,!0)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},sampleIndex:se,fileType:U})}return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"sample-list-container",onDragOver:function(){clearTimeout(q),h("")},onDragLeave:function(){q=setTimeout((function(){h("hidden")}),10)}},m.a.createElement("div",{className:"dropzone-container "+f},m.a.createElement(g.a,{onDrop:function(e){return function(e){h("hidden"),e.forEach((function(e,t){K(e)}))}(e)}},(function(e){var t=e.getRootProps,n=e.getInputProps;return m.a.createElement("section",null,m.a.createElement("div",t(),m.a.createElement("input",n()),m.a.createElement("p",null,"Drag 'n' drop some files here")))}))),m.a.createElement("ul",{className:"sample-list"},oe)),m.a.createElement("ul",{className:"sample-set-actions"},m.a.createElement("li",null,m.a.createElement("a",{onClick:function(){n.forEach((function(e,t){var a=!1;t===n.length-1&&(a=!0),W(e,t,a)}))}},m.a.createElement("i",{style:{marginTop:"1px"},className:"glyphicon glyphicon-trash"}))),m.a.createElement("li",null,m.a.createElement("a",{onClick:function(){return A("SAVE"),void I(!0)}}," ",m.a.createElement(E.c,null)," ")),m.a.createElement("li",{style:{float:"right"}},m.a.createElement("a",{onClick:function(){Z("json"),N(!1),w(!0!==k)}},m.a.createElement("i",{className:"glyphicon glyphicon-plus"})))),ce,re,le)},C=function(e){var t=e.showEditMode,n=e.setShowEditMode,a=e.title,c=e.updateTrack,r=e.trackIndex,l=(e.keyZoneMode,e.trackAudioType,Object(p.useState)(a)),o=i()(l,2),s=o[0],u=o[1];function f(e){13===e.keyCode?(u(a),n(!1)):"Escape"===e.keyCode&&d()}function d(){c(r,s),n(!1)}Object(p.useEffect)((function(){!0===t?(u(a),window.addEventListener("keypress",f)):!1===t&&window.removeEventListener("keypress",f)}),[t]);var h=Object(p.useRef)();Object(k.b)(h,(function(e){"edit-button"!==e.target.className&&n(!1)}));var E,y=null===a?"Track ".concat(r+1):a;return E=!0===t?m.a.createElement("div",{className:"input-wrapper"},m.a.createElement("input",{type:"text",placeholder:"",value:a,onChange:function(e){return c(r,e.target.value)}}),m.a.createElement("a",{className:"undo-title-change",onClick:d},m.a.createElement(v.b,null))):m.a.createElement("h2",null,y),m.a.createElement("div",{className:"sample-set-title"},m.a.createElement("div",{ref:h,className:"title-wrapper"},E))},P=function(e){var t=[null,null,null,null,null],n=e.index,a=e.track,c=e.color,r=Object(p.useState)(t),o=i()(r,2),s=o[0],f=o[1],d=Object(p.useState)(!1),v=i()(d,2),w=v[0],S=v[1],g=Object(p.useState)(!1),j=i()(g,2),b=j[0],O=j[1],x=Object(p.useRef)();function T(){return P.apply(this,arguments)}function P(){return(P=l()(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://".concat(window.location.hostname,":3000/track/").concat(n+1),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:(a=e.sent)&&f(a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(k.b)(x,(function(){return O(!1)})),Object(p.useEffect)((function(){T()}),[]),Object(p.useEffect)((function(){e.track&&null!==e.track&&T()}),[e.track]);var L,A=a.keyzone_mode,D=a.trackAudioType;function F(t){e.updateTrack(n,a.name,c,t)}function B(t){e.updateTrack(n,a.name,c,A,t)}return!0===b&&(L=m.a.createElement("div",{className:"color-picker-container"},m.a.createElement(h.a,{color:c,onChange:function(t){e.updateTrack(n,a.name,t.hex)}}))),m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"sample-set",style:{backgroundColor:e.color}},m.a.createElement("div",{ref:x,className:"edit-menu-container"},m.a.createElement("ul",{className:"edit-menu"},m.a.createElement("li",null,m.a.createElement("a",{className:"edit-button",onClick:function(){return S(1!=w)}},m.a.createElement(y.a,null),m.a.createElement("span",{className:"edit-button"}))),m.a.createElement("li",null,m.a.createElement("a",{className:"color-picker",onClick:function(){return O(1!=b)}},m.a.createElement(E.d,null)))),L),m.a.createElement(C,{showEditMode:w,title:a.name,trackIndex:n,setShowEditMode:S,updateTrack:e.updateTrack}),m.a.createElement("div",{className:"track-keyzone-mode-menu"},m.a.createElement("div",{style:{opacity:"sample-trig"==D?"1":"0"},className:"keyzone-mode-menu-container"},m.a.createElement("span",null,"Auto Split:"),m.a.createElement("ul",null,m.a.createElement("li",null,m.a.createElement("a",{onClick:function(){return F("all-full")},className:"all-full"===A?"active":""},"Off")),m.a.createElement("li",null,m.a.createElement("a",{onClick:function(){return F("split-full")},className:"split-full"===A?"active":""},"Auto")),m.a.createElement("li",null,m.a.createElement("a",{onClick:function(){return F("split-narrow")},className:"split-narrow"===A?"active":""},"Narrow")))),m.a.createElement("div",{className:"track-audio-type-menu-container"},m.a.createElement("ul",null,m.a.createElement("li",null,m.a.createElement("a",{onClick:function(){return B("sample-trig")},className:"sample-trig"===D?"active":""},"Trig")),m.a.createElement("li",null,m.a.createElement("a",{onClick:function(){return B("sample-slice")},className:"sample-slice"===D?"active":""},"Slice")),m.a.createElement("li",null,m.a.createElement("a",{onClick:function(){return B("sample-loop")},className:"sample-loop"===D?"active":""},"Loop"))))),m.a.createElement(N,{index:n,samples:s,setSamples:f,samplesArray:t,getTrackSampleSet:T})))},L=function(e){var t=e.setShowFilePicker,n=e.onSelect,a=Object(p.useState)(null),c=i()(a,2),r=c[0],o=c[1];function s(){return(s=l()(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://".concat(window.location.hostname,":3000/sketchlist/"),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,o(n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(p.useEffect)((function(){!function(){s.apply(this,arguments)}()}),[]);var f="";if(null!==r){var d=r.map((function(e,t){if(e.indexOf(".sketch.json")>-1)return m.a.createElement("li",{key:t},m.a.createElement("a",{onClick:function(){return n(e,!0)}},e))}));f=m.a.createElement("ul",null,d)}return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{id:"sample-editor-file-picker"},m.a.createElement("h4",null,"Load Sketch File"),f),m.a.createElement("div",{onClick:function(){return t(!1)},id:"sample-editor-file-picker-overlay"}))};function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(e){var t,n,a=e.colorsArray,c=Object(p.useState)(null),r=i()(c,2),o=r[0],s=r[1],f=Object(p.useState)(null),h=i()(f,2),E=h[0],y=h[1],v=Object(p.useState)(null),k=i()(v,2),w=k[0],S=k[1],g=Object(p.useState)(!1),j=i()(g,2),b=j[0],O=j[1];function x(){return(x=l()(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://".concat(window.location.hostname,":3000/sketchinfo/"),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,s(n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=l()(u.a.mark((function e(){var t,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.lastSelectedSketch,e.next=3,fetch("http://".concat(window.location.hostname,":3000/sketch/").concat(t.split("/").join("+++")),{method:"GET",headers:{"Content-Type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,y(a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){return C.apply(this,arguments)}function C(){return(C=l()(u.a.mark((function e(t){var n,a,c,r,l,i,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=E,t&&"string"==typeof t&&(n.name=t),a=JSON.stringify(E),c=o.lastSelectedSketch.split("zynthian/")[1],r=o.lastSelectedSketch.split("/")[o.lastSelectedSketch.split("/").length-1],l=new Blob([a],{type:"application/json"}),i=new FormData,s=c.split(r)[0],t&&"string"==typeof t&&(r=t),i.append("file",l,r),d.a.post("http://".concat(window.location.hostname,":3000/upload/").concat(s.split("/").join("+++")),i).then((function(e){t&&"string"==typeof t&&(A(t),y(n))}));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){return F.apply(this,arguments)}function F(){return(F=l()(u.a.mark((function e(t){var n,a,c,r,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O(!1),n=o.lastSelectedSketch.split("/")[o.lastSelectedSketch.split("/").length-1],a=o.lastSelectedSketch.split(n)[0],c=D(D({},o),{},{lastSelectedSketch:a+t}),r=new Blob([JSON.stringify(c)],{type:"application/json"}),(l=new FormData).append("file",r,".cache.json"),d.a.post("http://".concat(window.location.hostname,":3000/upload/zynthian-my-data+++sessions+++"),l).then((function(e){s(c)}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e,t,n,a,c){var r=E.tracks[e],l=D(D({},r),{},{name:t,color:n,keyzone_mode:a&&null!==a?a:r.keyzone_mode,trackAudioType:c&&null!==c?c:r.trackAudioType}),o=[];E.tracks.forEach((function(t,n){n===e?o.push(l):o.push(t)}));var i=D(D({},E),{},{tracks:o});y(i)}if(console.log("*** STATE UPDATE ****"),console.log(o,"sketchInfo"),console.log(E,"current sketch"),console.log("*** /STATE UPDATE ****"),Object(p.useEffect)((function(){!function(){x.apply(this,arguments)}()}),[]),Object(p.useEffect)((function(){null!==o&&function(){T.apply(this,arguments)}()}),[o]),Object(p.useEffect)((function(){null!==E&&S(E.tracks)}),[E]),null!==w){t=w.map((function(e,t){if(t<10)return m.a.createElement(P,{key:t,index:t,color:e.color&&"#000000"!==e.color?e.color:a[t],updateTrack:B,track:e})}))}return!0===b&&(n=m.a.createElement(L,{onSelect:A,setShowFilePicker:O})),m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"sample-editor-menu"},m.a.createElement("ul",null,m.a.createElement("li",null,m.a.createElement("a",null,"New")),m.a.createElement("li",null,m.a.createElement("a",{onClick:function(){return O(!0!==b)}},"Load")),m.a.createElement("li",null,m.a.createElement("a",{onClick:N},"Save")),m.a.createElement("li",null,m.a.createElement("a",{onClick:function(){N(window.prompt("Enter FileName")+".sketch.json")}},"Save As...")),null!==o?m.a.createElement("li",{style:{float:"right"}},m.a.createElement("a",null,o.lastSelectedSketch)):"")),m.a.createElement("div",{id:"sample-editor"},t),n)}},35:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return l}));var a=n(0);function c(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=t?1e3:1024;if(Math.abs(e)<a)return e+" B";var c=t?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],r=-1,l=Math.pow(10,n);do{e/=a,++r}while(Math.round(Math.abs(e)*l)/l>=a&&r<c.length-1);return e.toFixed(n)+" "+c[r]}function r(e,t){Object(a.useEffect)((function(){var n=function(n){e.current&&!e.current.contains(n.target)&&t(n)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),function(){document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[e,t])}function l(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e}),[e]),t.current}}}]);