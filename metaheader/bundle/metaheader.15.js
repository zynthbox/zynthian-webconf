(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{23:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(60),o=n(61),s=n(47),l=Object(o.c)({name:"counter",initialState:{count:0},reducers:{increment:function(e,t){e.count+=1},decrement:function(e,t){e.count-=1}}}),u=l.actions,i=(u.increment,u.decrement,l.reducer),d=n(32),p=n.n(d),m=n(33),f=n.n(m),E=Object(o.b)("songExport/fetchSketches",p()(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://".concat(window.location.hostname,":3000/songexports"),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))),h=Object(o.b)("songExport/fetchSongExports",function(){var e=p()(f.a.mark((function e(t,n){var a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://".concat(window.location.hostname,":3000/folder/").concat(t.split("/").join("+++")),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),v=Object(o.b)("songExport/fetchExportParts",function(){var e=p()(f.a.mark((function e(t,n){var a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://".concat(window.location.hostname,":3000/folder/").concat(t.split("/").join("+++")),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),g=Object(o.c)({name:"songExport",initialState:{sketches:[],selectedSong:null,exports:[],selectedExport:null,parts:[],selectedPart:null,status:{sketches:"idle",exports:"idle",parts:"idle"},error:""},reducers:{dismissError:function(e,t){e.error="",e.status.sketches="idle",e.status.exports="idle",e.status.parts="idle"},setSelectedSong:function(e,t){e.selectedSong=t.payload},setSelectedExport:function(e,t){e.selectedExport=t.payload}},extraReducers:function(e){e.addCase(E.fulfilled,(function(e,t){e.sketches=t.payload,e.status.sketches="idle"})),e.addCase(E.pending,(function(e){e.status.sketches="loading",e.sketches=[],e.exports=[],e.parts=[]})),e.addCase(E.rejected,(function(e,t){e.error=t.error.message,e.status.sketches="failed"})),e.addCase(h.fulfilled,(function(e,t){e.exports=t.payload,e.status.exports="idle"})),e.addCase(h.pending,(function(e){e.status.exports="loading",e.exports=[],e.parts=[]})),e.addCase(h.rejected,(function(e,t){e.error=t.error.message,e.status.exports="failed"})),e.addCase(v.fulfilled,(function(e,t){e.parts=t.payload,e.status.parts="idle"})),e.addCase(v.pending,(function(e){e.status.parts="loading",e.parts=[]})),e.addCase(v.rejected,(function(e,t){e.error=t.error.message,e.status.parts="failed"}))}}),b=g.actions,x=b.dismissError,j=b.setSelectedSong,y=b.setSelectedExport,w=g.reducer,O=Object(s.c)({count:i,songExport:w}),k=Object(o.a)({reducer:O}),N=n(2),T=n.n(N),S=n(52),B=n(59),C=n(140),L=n(36),F=function(e){var t=e.item,n=Object(a.useState)(null),c=T()(n,2),o=c[0],s=c[1],l=Object(a.useState)(!1),u=T()(l,2),i=u[0],d=u[1],m=Object(a.useState)("00:00"),E=T()(m,2),h=E[0],v=E[1],g=Object(a.useState)(0),b=T()(g,2),x=(b[0],b[1]),j=Object(a.useState)(),y=T()(j,2),w=y[0],O=y[1],k=Object(a.useState)(0),N=T()(k,2),F=N[0],M=N[1],P=Object(a.useState)(0),R=T()(P,2),D=R[0],I=R[1];function A(e){var n=new File([o],t.name,{type:"audio/wav"});e.dataTransfer.items.add(n),console.log(e.dataTransfer.files," DATA TRANSFER FILES"),console.log(e.dataTransfer.items[0])}function G(e){(e.clientY<=0||e.clientX<=0||e.clientX>=window.innerWidth||e.clientY>=window.innerHeight)&&(console.log("I'm out"),U())}function X(){return(X=p()(f.a.mark((function e(){var n,a,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.path,e.next=3,fetch("http://".concat(window.location.hostname,":3000/download"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:n})});case 3:if(a=e.sent,n!==t.path){e.next=10;break}return e.next=7,a.blob();case 7:r=e.sent,c=window.URL.createObjectURL(r),s(c);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){var e=document.createElement("a");e.href=o;var n=t.path.split("/")[t.path.split("/").length-1];e.download=n,document.body.appendChild(e),e.click(),e.remove()}function Y(e){var t=e.target,n=Object(L.b)(t.currentTime),a=t.duration;isNaN(a)&&(a=0);var r=Object(L.b)(a),c=t.currentTime/t.duration*100;v(n),x(t.duration),M(a),O(r),I(c)}Object(a.useEffect)((function(){!function(){X.apply(this,arguments)}()}),[]),Object(a.useEffect)((function(){100===D&&d(!1)}),[D]),Object(a.useEffect)((function(){if(null!==o){var e=document.getElementById(t.path);e.removeEventListener("dragstart",A),e.removeEventListener("dragend",G),e.addEventListener("dragstart",A),e.addEventListener("dragend",G)}}),[o]);var J=Object(a.useRef)(null),W=r.a.createElement("span",{className:"rotating"},r.a.createElement(B.f,null));null!==o&&(W=!0===i?r.a.createElement(S.d,null):r.a.createElement(S.e,null));var Z=r.a.createElement("span",{className:"infinity"},"âˆž");w&&(Z=w);var z=t.name.split("-20")[0],H=t.name.split(z+"-")[1],K=H.split("T")[0].split("-").join("/"),q=H.split("T")[1].split(".")[0];return r.a.createElement("div",{className:"audio-player",id:"audio-player-".concat(t.name)},r.a.createElement("audio",{src:o,onTimeUpdate:function(e){return Y(e)},onLoadedMetadata:function(e){return Y(e)}}),r.a.createElement("span",{onClick:U,className:"count"}," ",r.a.createElement(C.a,null)," "),r.a.createElement("div",{className:"audio-player-top"},r.a.createElement("div",{className:"audio-player-controls"},r.a.createElement("span",{onClick:function(){return function(){if(console.log("on play click - "+t.path),null!==o){console.log("data is not null");var e=document.getElementById("audio-player-".concat(t.name)).getElementsByTagName("audio");!0===i?(e[0].pause(),d(!1)):(100===D&&(e[0].currentTime=0),e[0].play(),d(!0))}}()}},W)),r.a.createElement("div",{ref:J,draggable:!0,id:t.path,className:"draggable-div item-info"},r.a.createElement("h4",null,z),r.a.createElement("small",null,r.a.createElement("b",null,Object(L.a)(t.size)),r.a.createElement("b",null,K," "),r.a.createElement("b",null,q)))),r.a.createElement("div",{className:"audio-player-bottom"},r.a.createElement("div",{className:"track-time"},h),r.a.createElement("div",{id:"".concat(t.path,"-slider"),className:"slider"},r.a.createElement("div",{className:"progress",style:{width:D+"%"}}),r.a.createElement("div",{onClick:function(e){return function(e){if(null!==o){var n=document.getElementById("".concat(t.path,"-slider")),a=n.offsetWidth,r=n.getBoundingClientRect(),c=e.clientX-r.left,s=F/100*(c/a*100);document.getElementById("audio-player-".concat(t.name)).getElementsByTagName("audio")[0].currentTime=s}}(e)},className:"rail"})),r.a.createElement("div",{className:"track-duration"},Z)))},M=function(e){var t,n=e.item,a=e.type,o=Object(c.c)(),s=Object(c.d)((function(e){return e.songExport})),l=s.selectedSong,u=s.selectedExport,i=s.selectedPart;("song"===a&&null!==l&&l.path===n.path||"songExport"===a&&null!==u&&u.path===n.path||"part"===a&&null!==i&&i.path===n.path)&&(t="active");var d=r.a.createElement(F,{item:n});if("part"!==a){var p="songExport"===a?n.name:n.folder,m="songExport"===a?"":r.a.createElement("small",null,n.path);d=r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,p),r.a.createElement("b",{className:"count"},n.count),m)}return r.a.createElement("li",{className:"song-export-list-item"},r.a.createElement("a",{className:t,onClick:function(){"song"===a?o(j(n)):"songExport"===a&&o(y(n))}},d))},P=["#B23730","#EE514B","#F77535","#F7D635","#FE68B1","#A438FF","#6491FF","#73F6EE","#65E679","#9A7136"],R=function(e){var t,n=Object(c.c)(),o=Object(c.d)((function(e){return e.songExport})),s=o.error,l=o.sketches,u=o.selectedSong,i=o.exports,d=o.selectedExport,p=o.parts,m=(o.selectedPart,o.status);Object(a.useEffect)((function(){n(E())}),[]),Object(a.useEffect)((function(){null!==u&&n(h(u.path+"/"))}),[u]),Object(a.useEffect)((function(){null!==d&&(console.log(d," SELECTED EXPORT"),n(v(d.path+"/")))}),[d]),""!==s&&(t=r.a.createElement("div",{className:"song-export-error"},r.a.createElement("span",null,s," ",r.a.createElement("a",{onClick:function(){return n(x())}},"(X)"))));var f,g=l.map((function(e,t){return r.a.createElement(M,{key:Date.now()+t,item:e,type:"song"})})),b=i.map((function(e,t){return r.a.createElement(M,{key:Date.now()+t,item:e,type:"songExport"})}));return f="loading"===m.parts||"failed"===m.parts?r.a.createElement("div",{className:"status-display"},m.parts):p.map((function(e,t){return r.a.createElement(M,{key:Date.now()+t,item:e,type:"part"})})),r.a.createElement("div",{id:"song-export"},t,r.a.createElement("div",{className:"song-export-column",id:"song-list",style:{backgroundColor:P[0]}},r.a.createElement("div",{className:"column-header"},r.a.createElement("h4",null,r.a.createElement(S.c,null),"Sketches")),r.a.createElement("ul",null,g)),r.a.createElement("div",{className:"song-export-column",id:"export-folders-list",style:{backgroundColor:P[1]}},r.a.createElement("div",{className:"column-header"},r.a.createElement("h4",null,r.a.createElement(S.b,null),"Exports")),r.a.createElement("ul",null,b)),r.a.createElement("div",{className:"song-export-column",id:"song-parts-list",style:{backgroundColor:P[2]}},r.a.createElement("div",{className:"column-header"},r.a.createElement("h4",null,r.a.createElement(S.a,null),"Parts")),r.a.createElement("ul",null,f)))};t.default=function(){return r.a.createElement(c.a,{store:k},r.a.createElement(R,null))}},36:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return d}));var a=n(2),r=n.n(a),c=(n(50),n(0));function o(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=t?1e3:1024;if(Math.abs(e)<a)return e+" B";var r=t?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],c=-1,o=Math.pow(10,n);do{e/=a,++c}while(Math.round(Math.abs(e)*o)/o>=a&&c<r.length-1);return e.toFixed(n)+" "+r[c]}function s(e,t){Object(c.useEffect)((function(){var n=function(n){e.current&&!e.current.contains(n.target)&&t(n)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),function(){document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[e,t])}function l(e){var t=Object(c.useRef)();return Object(c.useEffect)((function(){t.current=e}),[e]),t.current}var u=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.shouldPreventDefault,o=void 0===a||a,s=n.delay,l=void 0===s?300:s,u=Object(c.useState)(!1),d=r()(u,2),p=d[0],m=d[1],f=Object(c.useRef)(),E=Object(c.useRef)(),h=Object(c.useCallback)((function(t){o&&t.target&&(t.target.addEventListener("touchend",i,{passive:!1}),E.current=t.target),f.current=setTimeout((function(){e(t),m(!0)}),l)}),[e,l,o]),v=Object(c.useCallback)((function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];f.current&&clearTimeout(f.current),n&&!p&&t(),m(!1),o&&E.current&&E.current.removeEventListener("touchend",i)}),[o,t,p]);return{onMouseDown:function(e){return h(e)},onTouchStart:function(e){return h(e)},onMouseUp:function(e){return v(e)},onMouseLeave:function(e){return v(e,!1)},onTouchEnd:function(e){return v(e)}}},i=function(e){(function(e){return"touches"in e})(e)&&e.touches.length<2&&e.preventDefault&&e.preventDefault()};function d(e){var t=Math.floor(e/60),n=e-60*t;return t<10&&(t="0"+t),(n=Math.floor(n))<10&&(n="0"+n),t+":"+n}}}]);