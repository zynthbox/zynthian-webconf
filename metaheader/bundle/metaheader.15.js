(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{23:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(60),o=n(61),s=n(47),l=Object(o.c)({name:"counter",initialState:{count:0},reducers:{increment:function(e,t){e.count+=1},decrement:function(e,t){e.count-=1}}}),u=l.actions,i=(u.increment,u.decrement,l.reducer),d=n(32),m=n.n(d),p=n(33),f=n.n(p),E=Object(o.b)("songExport/fetchSketches",m()(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://".concat(window.location.hostname,":3000/songexports"),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))),h=Object(o.b)("songExport/fetchSongExports",function(){var e=m()(f.a.mark((function e(t,n){var a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://".concat(window.location.hostname,":3000/folder/").concat(t.split("/").join("+++")),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),v=Object(o.b)("songExport/fetchExportParts",function(){var e=m()(f.a.mark((function e(t,n){var a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://".concat(window.location.hostname,":3000/folder/").concat(t.split("/").join("+++")),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),g=Object(o.c)({name:"songExport",initialState:{sketches:[],selectedSong:null,exports:[],selectedExport:null,parts:[],selectedPart:null,status:"idle",error:""},reducers:{dismissError:function(e,t){e.error="",e.status="idle"},setSelectedSong:function(e,t){e.selectedSong=t.payload},setSelectedExport:function(e,t){e.selectedExport=t.payload}},extraReducers:function(e){e.addCase(E.fulfilled,(function(e,t){e.sketches=t.payload,e.status="idle"})),e.addCase(E.pending,(function(e){e.status="loading",e.sketches=[],e.exports=[],e.parts=[]})),e.addCase(E.rejected,(function(e,t){e.error=t.error.message,e.status="failed"})),e.addCase(h.fulfilled,(function(e,t){e.exports=t.payload,e.status="idle"})),e.addCase(h.pending,(function(e){e.status="loading",e.exports=[],e.parts=[]})),e.addCase(h.rejected,(function(e,t){e.error=t.error.message,e.status="failed"})),e.addCase(v.fulfilled,(function(e,t){e.parts=t.payload,e.status="idle"})),e.addCase(v.pending,(function(e){e.status="loading",e.parts=[]})),e.addCase(v.rejected,(function(e,t){e.error=t.error.message,e.status="failed"}))}}),b=g.actions,j=b.dismissError,x=b.setSelectedSong,y=b.setSelectedExport,O=g.reducer,w=Object(s.c)({count:i,songExport:O}),k=Object(o.a)({reducer:w}),N=n(2),S=n.n(N),B=n(52),C=n(59),T=n(140),M=n(36),L=function(e){var t=e.item,n=Object(a.useState)(null),c=S()(n,2),o=c[0],s=c[1],l=Object(a.useState)(!1),u=S()(l,2),i=u[0],d=u[1],p=Object(a.useState)("00:00"),E=S()(p,2),h=E[0],v=E[1],g=Object(a.useState)(0),b=S()(g,2),j=(b[0],b[1]),x=Object(a.useState)(),y=S()(x,2),O=y[0],w=y[1],k=Object(a.useState)(0),N=S()(k,2),L=N[0],P=N[1],F=Object(a.useState)(0),D=S()(F,2),R=D[0],G=D[1];function U(){return(U=m()(f.a.mark((function e(){var n,a,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.path,e.next=3,fetch("http://".concat(window.location.hostname,":3000/download"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:n})});case 3:if(a=e.sent,n!==t.path){e.next=10;break}return e.next=7,a.blob();case 7:r=e.sent,c=window.URL.createObjectURL(r),s(c);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){console.log("WHAT");var t=e.target,n=Object(M.b)(t.currentTime),a=t.duration;isNaN(a)&&(a=0);var r=Object(M.b)(a),c=t.currentTime/t.duration*100;v(n),j(t.duration),P(a),w(r),G(c)}Object(a.useEffect)((function(){!function(){U.apply(this,arguments)}()}),[]),Object(a.useEffect)((function(){100===R&&d(!1)}),[R]);Object(a.useRef)(null);var I=r.a.createElement("span",{className:"rotating"},r.a.createElement(C.f,null));null!==o&&(I=!0===i?r.a.createElement(B.d,null):r.a.createElement(B.e,null));var J=r.a.createElement("span",{className:"infinity"},"∞");O&&(J=O);var X=t.name.split("-20")[0],W=t.name.split(X+"-")[1],Y=W.split("T")[0].split("-").join("/"),Z=W.split("T")[1].split(".")[0];return r.a.createElement("div",{className:"audio-player",id:"audio-player-".concat(t.name)},r.a.createElement("audio",{src:o,onTimeUpdate:function(e){return A(e)},onLoadedMetadata:function(e){return A(e)}}),r.a.createElement("span",{onClick:function(){var e=document.createElement("a");e.href=o;var n=t.path.split("/")[t.path.split("/").length-1];e.download=n,document.body.appendChild(e),e.click(),e.remove()},className:"count"}," ",r.a.createElement(T.a,null)," "),r.a.createElement("div",{className:"audio-player-top"},r.a.createElement("div",{className:"audio-player-controls"},r.a.createElement("span",{onClick:function(){return function(){if(console.log("on play click - "+t.path),null!==o){console.log("data is not null");var e=document.getElementById("audio-player-".concat(t.name)).getElementsByTagName("audio");!0===i?(e[0].pause(),d(!1)):(100===R&&(e[0].currentTime=0),e[0].play(),d(!0))}}()}},I)),r.a.createElement("div",{className:"item-info"},r.a.createElement("h4",null,X),r.a.createElement("small",null,r.a.createElement("b",null,Object(M.a)(t.size)),r.a.createElement("b",null,Y," "),r.a.createElement("b",null,Z)))),r.a.createElement("div",{className:"audio-player-bottom"},r.a.createElement("div",{className:"track-time"},h),r.a.createElement("div",{id:"".concat(t.path,"-slider"),className:"slider"},r.a.createElement("div",{className:"progress",style:{width:R+"%"}}),r.a.createElement("div",{onClick:function(e){return function(e){if(null!==o){var n=document.getElementById("".concat(t.path,"-slider")),a=n.offsetWidth,r=n.getBoundingClientRect(),c=e.clientX-r.left,s=L/100*(c/a*100);document.getElementById("audio-player-".concat(t.name)).getElementsByTagName("audio")[0].currentTime=s}}(e)},className:"rail"})),r.a.createElement("div",{className:"track-duration"},J)))},P=function(e){var t,n=e.item,a=e.type,o=Object(c.c)(),s=Object(c.d)((function(e){return e.songExport})),l=s.selectedSong,u=s.selectedExport,i=s.selectedPart;("song"===a&&null!==l&&l.path===n.path||"songExport"===a&&null!==u&&u.path===n.path||"part"===a&&null!==i&&i.path===n.path)&&(t="active");var d=r.a.createElement(L,{item:n});if("part"!==a){console.log(n);var m="songExport"===a?n.name:n.folder,p="songExport"===a?"":r.a.createElement("small",null,n.path);d=r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,m),r.a.createElement("b",{className:"count"},n.count),p)}return r.a.createElement("li",{className:"song-export-list-item"},r.a.createElement("a",{className:t,onClick:function(){"song"===a?o(x(n)):"songExport"===a&&o(y(n))}},d))},F=["#B23730","#EE514B","#F77535","#F7D635","#FE68B1","#A438FF","#6491FF","#73F6EE","#65E679","#9A7136"],D=function(e){var t,n=Object(c.c)(),o=Object(c.d)((function(e){return e.songExport})),s=o.error,l=o.sketches,u=o.selectedSong,i=o.exports,d=o.selectedExport,m=o.parts;o.selectedPart;Object(a.useEffect)((function(){n(E())}),[]),Object(a.useEffect)((function(){null!==u&&n(h(u.path+"/"))}),[u]),Object(a.useEffect)((function(){null!==d&&(console.log(d," SELECTED EXPORT"),n(v(d.path+"/")))}),[d]),""!==s&&(t=r.a.createElement("div",{className:"song-export-error"},r.a.createElement("span",null,s," ",r.a.createElement("a",{onClick:function(){return n(j())}},"(X)"))));var p=l.map((function(e,t){return r.a.createElement(P,{key:Date.now()+t,item:e,type:"song"})})),f=i.map((function(e,t){return r.a.createElement(P,{key:Date.now()+t,item:e,type:"songExport"})})),g=m.map((function(e,t){return r.a.createElement(P,{key:Date.now()+t,item:e,type:"part"})}));return r.a.createElement("div",{id:"song-export"},t,r.a.createElement("div",{className:"song-export-column",id:"song-list",style:{backgroundColor:F[0]}},r.a.createElement("div",{className:"column-header"},r.a.createElement("h4",null,r.a.createElement(B.c,null),"Sketches")),r.a.createElement("ul",null,p)),r.a.createElement("div",{className:"song-export-column",id:"export-folders-list",style:{backgroundColor:F[1]}},r.a.createElement("div",{className:"column-header"},r.a.createElement("h4",null,r.a.createElement(B.b,null),"Exports")),r.a.createElement("ul",null,f)),r.a.createElement("div",{className:"song-export-column",id:"song-parts-list",style:{backgroundColor:F[2]}},r.a.createElement("div",{className:"column-header"},r.a.createElement("h4",null,r.a.createElement(B.a,null),"Parts")),r.a.createElement("ul",null,g)))};t.default=function(){return r.a.createElement(c.a,{store:k},r.a.createElement(D,null))}},36:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return d}));var a=n(2),r=n.n(a),c=(n(50),n(0));function o(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=t?1e3:1024;if(Math.abs(e)<a)return e+" B";var r=t?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],c=-1,o=Math.pow(10,n);do{e/=a,++c}while(Math.round(Math.abs(e)*o)/o>=a&&c<r.length-1);return e.toFixed(n)+" "+r[c]}function s(e,t){Object(c.useEffect)((function(){var n=function(n){e.current&&!e.current.contains(n.target)&&t(n)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),function(){document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[e,t])}function l(e){var t=Object(c.useRef)();return Object(c.useEffect)((function(){t.current=e}),[e]),t.current}var u=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.shouldPreventDefault,o=void 0===a||a,s=n.delay,l=void 0===s?300:s,u=Object(c.useState)(!1),d=r()(u,2),m=d[0],p=d[1],f=Object(c.useRef)(),E=Object(c.useRef)(),h=Object(c.useCallback)((function(t){o&&t.target&&(t.target.addEventListener("touchend",i,{passive:!1}),E.current=t.target),f.current=setTimeout((function(){e(t),p(!0)}),l)}),[e,l,o]),v=Object(c.useCallback)((function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];f.current&&clearTimeout(f.current),n&&!m&&t(),p(!1),o&&E.current&&E.current.removeEventListener("touchend",i)}),[o,t,m]);return{onMouseDown:function(e){return h(e)},onTouchStart:function(e){return h(e)},onMouseUp:function(e){return v(e)},onMouseLeave:function(e){return v(e,!1)},onTouchEnd:function(e){return v(e)}}},i=function(e){(function(e){return"touches"in e})(e)&&e.touches.length<2&&e.preventDefault&&e.preventDefault()};function d(e){var t=Math.floor(e/60),n=e-60*t;return t<10&&(t="0"+t),(n=Math.floor(n))<10&&(n="0"+n),t+":"+n}}}]);