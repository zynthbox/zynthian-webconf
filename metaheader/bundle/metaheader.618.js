"use strict";(self.webpackChunkzynthbox_webconf_metaheader=self.webpackChunkzynthbox_webconf_metaheader||[]).push([[618],{7618:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var r=n(5861),o=n(885),a=n(4687),u=n.n(a),c=n(7294),i=n(1795),l=n(1545),s=n(2225),f=(n(6087),n(5830)),d=n(1002);const h=function(e){var t=e.error,n=e.onDismiss;return console.log((0,d.Z)(t.message)),c.createElement("div",{id:"error-modal"},c.createElement("h3",null,t.type),c.createElement("p",null,t.message),c.createElement("div",null,c.createElement("a",{onClick:n,className:"error-modal-dismiss"},"OK")))};(0,i._5)({iconComponent:l.K});var m=(0,c.lazy)((function(){return Promise.all([n.e(500),n.e(514),n.e(990),n.e(863),n.e(688)]).then(n.bind(n,4688))})),p=(0,c.lazy)((function(){return n.e(30).then(n.bind(n,8030))}));const v=function(e){var t=e.dir,n=(0,c.useContext)(f._),a=n.fileManagerState,i=n.fileManagerDispatch,l=(0,c.useState)(!1),d=(0,o.Z)(l,2),v=d[0],E=d[1];function g(){return w.apply(this,arguments)}function w(){return w=(0,r.Z)(u().mark((function e(){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t||"/home/pi/"+(null!==a.selectedFolder?a.selectedFolder+"/":""),fetch("http://".concat(window.location.hostname,":3000/folder/").concat(n.split("/").join("+++")),{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:(n=e.sent).errno||i({type:"SET_FILES",payload:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){i({type:"SET_ERROR",payload:{message:"failed to fetch ".concat(n),type:"Folder Error"}})}));case 3:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}(0,c.useEffect)((function(){g()}),[a.selectedFolder]);var y,B=c.createElement(s.Z,null);return!1===a.loading&&(B=c.createElement(c.Fragment,null,c.createElement(p,null),c.createElement(c.Suspense,{fallback:c.createElement(s.Z,null)},c.createElement(m,{fsep:"/",refreshFileManager:g,showFileUploader:v,setShowFileUploader:E,getFiles:g})))),null!==a.error&&(y=c.createElement(h,{error:a.error,onDismiss:function(){return i({type:"SET_ERROR",payload:null})}})),c.createElement("div",{style:{height:window.innerHeight-170},className:"file-manager-wrapper"},y,B)}},6087:(e,t,n)=>{n.d(t,{D9:()=>c,TA:()=>i,gB:()=>a,t$:()=>u,ut:()=>s});var r=n(885),o=n(7294);function a(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=t?1e3:1024;if(Math.abs(e)<r)return e+" B";var o=t?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],a=-1,u=Math.pow(10,n);do{e/=r,++a}while(Math.round(Math.abs(e)*u)/u>=r&&a<o.length-1);return e.toFixed(n)+" "+o[a]}function u(e,t){(0,o.useEffect)((function(){var n=function(n){e.current&&!e.current.contains(n.target)&&t(n)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),function(){document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[e,t])}function c(e){var t=(0,o.useRef)();return(0,o.useEffect)((function(){t.current=e}),[e]),t.current}var i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.shouldPreventDefault,u=void 0===a||a,c=n.delay,i=void 0===c?300:c,s=(0,o.useState)(!1),f=(0,r.Z)(s,2),d=f[0],h=f[1],m=(0,o.useRef)(),p=(0,o.useRef)(),v=(0,o.useCallback)((function(t){u&&t.target&&(t.target.addEventListener("touchend",l,{passive:!1}),p.current=t.target),m.current=setTimeout((function(){e(t),h(!0)}),i)}),[e,i,u]),E=(0,o.useCallback)((function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];m.current&&clearTimeout(m.current),n&&!d&&t(),h(!1),u&&p.current&&p.current.removeEventListener("touchend",l)}),[u,t,d]);return{onMouseDown:function(e){return v(e)},onTouchStart:function(e){return v(e)},onMouseUp:function(e){return E(e)},onMouseLeave:function(e){return E(e,!1)},onTouchEnd:function(e){return E(e)}}},l=function(e){(function(e){return"touches"in e})(e)&&e.touches.length<2&&e.preventDefault&&e.preventDefault()};function s(e){var t=Math.floor(e/60),n=e-60*t;return t<10&&(t="0"+t),(n=Math.floor(n))<10&&(n="0"+n),t+":"+n}}}]);