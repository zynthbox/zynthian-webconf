(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{23:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),o=n(3),r=n.n(o),l=n(34),i=n.n(l),s=n(2),u=n.n(s),p=n(35),m=n.n(p),f=n(0),d=n.n(f),h=n(74),y=n.n(h),k=n(375),E=n(67),v=n(366),S=n(134),w=n(39),j=n(137),b=n(68),g=function(e){var t,n,a,c=e.index,o=e.sample,r=e.trackIndex,l=e.removeSample,s=e.uploadSample,p=e.setLoadFromSketchPadSampleIndex,h=e.setLoadFromSketchPadFileType,y=e.setShowSampleSetSourcePicker,k=Object(f.useState)(null),E=u()(k,2),v=E[0],S=E[1],w=Object(f.useState)(!1),j=u()(w,2),b=j[0],g=j[1];function O(e){var t=new FileReader;t.addEventListener("load",(function(){var e=t.result;t.result.indexOf("data:application/octet-stream;")>-1&&(e=t.result.split(":application/octet-stream;").join(":audio/wav;")),S(e)}),!1),t.readAsDataURL(e)}function x(){return(x=i()(m.a.mark((function t(){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=o.path.split(".").join("++")).indexOf("/")>-1&&(n=n.split("/").join("+")),t.next=4,fetch("http://".concat(window.location.hostname,":3000/").concat("sample-loop"===e.sampleSetMode?"clip":"sample","/").concat(r+1+"+++"+n),{method:"GET",headers:{"Content-Type":"application/json"}});case 4:return a=t.sent,t.next=7,a.blob();case 7:O(t.sent);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(f.useEffect)((function(){o&&(o.name?(O(o),s(o,c)):o.path&&function(){x.apply(this,arguments)}())}),[o]),o&&null!==o&&null!==o.path?(t=!0===b?d.a.createElement("a",{className:"play-sample-button",onClick:function(){g(!1),document.getElementById("sample-".concat(r+1,"-").concat(c+1,"-audio-player")).pause()}},d.a.createElement("i",{className:"glyphicon glyphicon-pause"})):d.a.createElement("a",{className:"play-sample-button",onClick:function(){g(!0),document.getElementById("sample-".concat(r+1,"-").concat(c+1,"-audio-player")).play()}},d.a.createElement("i",{className:"glyphicon glyphicon-play-circle"})),n=d.a.createElement("a",{className:"edit-sample-button",onClick:function(){return l(o,c,!0)}},d.a.createElement("i",{className:"glyphicon glyphicon-trash"}))):n=d.a.createElement("a",{className:"edit-sample-button",onClick:function(){return function(e){h("wav"),p(e),y(!0)}(c)}},d.a.createElement("i",{className:"glyphicon glyphicon-plus"})),o&&(a=o.path?o.path:o.name)&&null!==a&&(a.indexOf("/")>-1&&(a=a.split("/")[a.split("/").length-1]),a.split(".")[0].length>16&&(a=a.substring(0,17)+"...wav"));var T="---";return a&&null!==a&&(T=a),d.a.createElement("li",{id:"sample-".concat(r+1,"-").concat(c+1)},d.a.createElement("audio",{id:"sample-".concat(r+1,"-").concat(c+1,"-audio-player"),src:v}),t,d.a.createElement("h4",{title:o&&null!==a?o.path:""},T),n)},O=n(364),x=n(133),T=function(e){var t,n="/home/pi/zynthian-my-data/sketches/my-sketches/",a=Object(f.useState)(null),c=u()(a,2),o=c[0],r=c[1],l=Object(f.useState)(n),s=u()(l,2),p=s[0],h=s[1],y=Object(f.useState)(""),k=u()(y,2),v=k[0],S=k[1],j=Object(f.useState)(null),g=u()(j,2),T=g[0],N=g[1];function C(){return P.apply(this,arguments)}function P(){return(P=i()(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://".concat(window.location.hostname,":3000/folder/").concat(p.split("/").join("+++").split(" ").join("%20")),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,r(n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(f.useEffect)((function(){C()}),[]),Object(f.useEffect)((function(){null!==p&&(r(null),C())}),[p]),null!==o&&(t=o.map((function(t,n){var a=!0,c=d.a.createElement(E.a,null),o="",r=t.path;if((r=t.path.split(p)[1])&&"/"===r[0]&&(r=r.substring(1)),r&&r.split("/").length>1&&(a=!1),r&&r.indexOf(".")>-1&&(o=r.split(".")[r.split(".").length-1],c=d.a.createElement(x.a,null),"json"===o?"wav"===e.fileType||"mp3"===e.fileType?a=!1:(c=d.a.createElement(O.a,null),r.indexOf("sketch.json")>-1?"json"===e.fileType&&(a=!1):"sketch.json"===e.fileType&&(a=!1)):"wav"===o||"mp3"===o?"json"===e.fileType?a=!1:c=d.a.createElement(x.b,null):"cache"===o&&(a=!1)),!0===a)return d.a.createElement("li",{key:n},d.a.createElement("a",{onClick:function(){return N(r,o)},className:r===T?"active":"",onDoubleClick:function(){return function(t,n){if(!0===t.isDir)h(t.path+"/");else if("LOAD"===e.actionType)if("json"===n)"json"===e.fileType?(e.loadSampleSet(t),e.setShowLoadFromSketchPadDialog(!1)):"sketch.json"===e.fileType&&t.path.indexOf("sketch.json")>-1&&(e.loadSketch(t.path),e.setShowLoadFromSketchPadDialog(!1));else if("wav"===e.fileType&&"wav"===n||"wav"===e.fileType&&"mp3"===n)e.insertSample(t.path,e.sampleIndex),e.setShowLoadFromSketchPadDialog(!1);else{var a=t.path.split("zynthian-my-data/")[1];h(a)}else if("SAVE"===e.actionType){var c=t.path.split("zynthian-my-data/")[1];h(c)}}(t,o)}},c," ",r))})));var L,F=Object(f.useRef)();Object(w.b)(F,(function(t){e.setShowLoadFromSketchPadDialog(!1)})),p!==n&&(L=d.a.createElement("li",null,d.a.createElement("a",{onDoubleClick:function(){return function(){var e;if(p.indexOf("/")>-1){var t=p.split("/")[p.split("/").length-2];e=p.split("/"+t)[0]+"/"}else e=n;h(e)}()}},d.a.createElement(E.b,null)," ...")));var D,A="sample-set-load-from-sketch-pad-dialog";"SAVE"===e.actionType&&(A+=" w-save",D=d.a.createElement("div",{className:"dialog-footer"},d.a.createElement("input",{value:v,onChange:function(e){return S(e.target.value)},type:"text"}),d.a.createElement("button",{onClick:function(){return function(t){if("json"===e.fileType){var n=p+t;e.saveSampleSet(n),e.setShowLoadFromSketchPadDialog(!1)}else"sketch.json"===e.fileType&&(e.setShowLoadFromSketchPadDialog(!1),e.saveSketch("/zynthian-my-data/"+p+t))}(v)}},"Save")));var M="FILE";return"json"===e.fileType?M="SAMPLESET":"sketch.json"===e.fileType&&(M="SKETCH"),d.a.createElement("div",{ref:F,className:A},d.a.createElement("a",{className:"close",onClick:function(){return e.setShowLoadFromSketchPadDialog(!1)}},d.a.createElement(b.a,null)),d.a.createElement("h4",null,e.actionType," ",M," FROM SKETCH PAD"),d.a.createElement("ul",null,L,t),D)},N=function(e){var t=e.index,n=e.samples,a=e.setSamples,o=e.samplesArray,r=e.getTrackSampleSet,l=e.sampleSetMode,s=e.sketchFolder,p=Object(f.useState)("hidden"),h=u()(p,2),k=h[0],v=h[1],S=Object(f.useState)(!1),w=u()(S,2),O=w[0],x=w[1],N=Object(f.useState)(!1),C=u()(N,2),P=C[0],L=C[1],F=Object(f.useState)("LOAD"),D=u()(F,2),A=D[0],M=D[1],z=Object(f.useState)(!1),B=u()(z,2),I=B[0],R=B[1],J=Object(f.useState)(null),G=u()(J,2),H=G[0],K=G[1],Z=Object(f.useState)("wav"),V=u()(Z,2),_=V[0],Y=V[1],U="".concat(s,"wav/sampleset/sampleset-bank.").concat(t+1);function X(e){"Escape"===e.key&&(x(!1),L(!1),R(!1))}function q(e){x(!1);var t=H;null===H&&((t=n.findIndex((function(e){return null===e})))&&null!==t||(t=0));var o=[].concat(c()(n.slice(0,t)),[e],c()(n.slice(t+1,n.length)));a(o),K(null)}function Q(e,t,n){return W.apply(this,arguments)}function W(){return(W=i()(m.a.mark((function n(a,c,o){var r,l,i;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.name,l=(l="/home/pi"+e.sketchFolder).split("/").join("+++"),n.next=5,fetch("http://".concat(window.location.hostname,":3000/track/").concat(l,":").concat(t+1),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sIndex:c,sPath:r})});case 5:return i=n.sent,n.next=8,i.json();case 8:n.sent,ee(a);case 10:case"end":return n.stop()}}),n)})))).apply(this,arguments)}Object(f.useEffect)((function(){return window.addEventListener("keydown",X,!1),function(){window.removeEventListener("keydown",X,!1)}}),[]),Object(f.useEffect)((function(){!0===P&&x(!1)}),[P]),Object(f.useEffect)((function(){null!==H&&x(!0)}),[H]);var $,ee=function(){var e=i()(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=new FormData).append("file",t),y.a.post("http://".concat(window.location.hostname,":3000/upload/").concat(U.split("/").join("+++")+"+++"),n).then((function(e){}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function te(e,t,n){return ne.apply(this,arguments)}function ne(){return(ne=i()(m.a.mark((function n(c,o,r){var i,s,u,p;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("sample-loop"!==l){n.next=4;break}e.updateTrackClips("remove",t,o),n.next=13;break;case 4:return i=t+1,s=c.path,n.next=8,fetch("http://".concat(window.location.hostname,":3000/sample/").concat(i),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({trackIndex:i,sPath:s,sIndex:o})});case 8:return u=n.sent,n.next=11,u.json();case 11:p=n.sent,a(p);case 13:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function ae(e,t,n,a){return ce.apply(this,arguments)}function ce(){return(ce=i()(m.a.mark((function n(a,c,o,r){var i,s,u,p;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log("ON INSERT SAMPLE"),console.log(a,c,o,r),K(null),"sample-loop"!==l){n.next=7;break}e.updateTrackClips("insert",t,c,a,o,r),n.next=18;break;case 7:return i=a.split("/")[a.split("/").length-1],s=i,u=(u="/home/pi"+e.sketchFolder).split("/").join("+++"),n.next=13,fetch("http://".concat(window.location.hostname,":3000/track/").concat(u,":").concat(t+1),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sIndex:c,sPath:s})});case 13:return p=n.sent,n.next=16,p.json();case 16:n.sent,oe(a,i,c,o,r);case 18:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function oe(e,t,n,a,c){return re.apply(this,arguments)}function re(){return(re=i()(m.a.mark((function e(t,a,c,o,l){var i,s,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=!0===l?"/home/pi"+U+"/"+a:t,s=!0===l?t.split("/pi")[1]:U+"/"+a,!1,e.next=5,fetch("http://".concat(window.location.hostname,":3000/copypaste"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({previousPath:i,destinationPath:s,deleteOrigin:!1})});case 5:return u=e.sent,e.next=8,u.json();case 8:e.sent,!0===o?c===n.length-1&&r():r();case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(){return(le=i()(m.a.mark((function e(t){var a,c,o,l,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.path.split("sampleset-bank.")[1],c=t.path.split("/").join("+++"),e.next=4,fetch("http://".concat(window.location.hostname,":3000/json/").concat(c),{method:"GET",headers:{"Content-Type":"application/json"}});case 4:return o=e.sent,e.next=7,o.json();case 7:l=e.sent,i="/home/pi"+U.split("/sampleset-bank")[0]+"/sampleset-bank."+a,l.forEach((function(e,t){null!==e?ae(i+e.path,t,!0):t===n.length-1&&r()}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(){$=setTimeout((function(){v("hidden")}),10)}var se=o;"sample-loop"===e.sampleSetMode&&(se=n);var ue,pe,me,fe=se.map((function(a,c){return d.a.createElement(g,{key:c,index:c,sample:n[c],trackIndex:t,removeSample:te,addSample:q,uploadSample:Q,setLoadFromSketchPadSampleIndex:K,setLoadFromSketchPadFileType:Y,setShowSampleSetSourcePicker:x,sampleSetMode:e.sampleSetMode})}));if(!0===P&&(ue=d.a.createElement("div",{className:"sample-set-upload-container"},d.a.createElement("div",{className:"dropzone-container"},d.a.createElement(j.a,{onDrop:function(e){return function(e){var t=[];for(var n in e){var c={path:e[n].path,file:e[n]};t.push(c)}a(e),L(!1)}(e)}},(function(e){var t=e.getRootProps,n=e.getInputProps;return d.a.createElement("section",null,d.a.createElement("div",t(),d.a.createElement("input",n()),d.a.createElement("p",null,"Drag 'n' drop some files here")))}))))),!0===O){var de=d.a.createElement("a",{className:"button",onClick:function(){L(!0),x(!1)}},"Load from External");null!==H&&(de=d.a.createElement("a",{className:"button"},d.a.createElement("input",{type:"file",onChange:function(e){return q(e.target.files[0])}}),"Load from External")),pe=d.a.createElement("div",{className:"sample-set-upload-container source-picker"},d.a.createElement("a",{onClick:function(){return x(!1)},className:"close-source-picker"},d.a.createElement(b.a,null)),d.a.createElement("a",{className:"button",onClick:function(){M("LOAD"),R(!0),x(!1)}},"Pick from Internal"),de)}if(!0===I){var he=H;null===H&&((he=n.findIndex((function(e){return null===e})))&&null!==he||(he=0)),me=d.a.createElement(T,{actionType:A,setShowLoadFromSketchPadDialog:R,insertSample:ae,loadSampleSet:function(e){return le.apply(this,arguments)},saveSampleSet:function(e){var a=e.split("/pi")[1];console.log(s," SKETCH FOLDER "),console.log(t," TRACK INDEX "),console.log(e),fetch("http://".concat(window.location.hostname,":3000/createfolder"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullPath:a})}).then(function(){var a=i()(m.a.mark((function a(c){return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,c.json();case 2:a.sent,fetch("http://".concat(window.location.hostname,":3000/copypaste"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({previousPath:"/home/pi".concat(s,"wav/sampleset/sampleset-bank.").concat(t+1,"/sampleset-bank.json"),destinationPath:e.split("/home/pi")[1]+"/sampleset-bank.json",deleteOrigin:!1})}).then(function(){var t=i()(m.a.mark((function t(a){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.forEach((function(t,n){null!==t&&ae(e+"/"+t.path,n,!0,!0)}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())},sampleIndex:he,fileType:_})}return d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"sample-list-container "+("sample-loop"===e.sampleSetMode?"show-clips":""),onDragOver:function(){clearTimeout($),v("")},onDragLeave:ie},d.a.createElement("div",{className:"dropzone-container "+k},d.a.createElement(j.a,{onDrop:function(e){return function(e){v("hidden"),e.forEach((function(e,t){q(e)}))}(e)}},(function(e){var t=e.getRootProps,n=e.getInputProps;return d.a.createElement("section",null,d.a.createElement("div",t(),d.a.createElement("a",{onClick:function(){return ie()},className:"close-source-picker"},d.a.createElement(b.a,null)),d.a.createElement("input",n()),d.a.createElement("p",null,"Drag 'n' drop some files here")))}))),d.a.createElement("ul",{className:"sample-list"},fe)),d.a.createElement("ul",{className:"sample-set-actions"},d.a.createElement("li",null,d.a.createElement("a",{onClick:function(){n.forEach((function(e,t){var a=!1;t===n.length-1&&(a=!0),te(e,t,a)}))}},d.a.createElement("i",{style:{marginTop:"1px"},className:"glyphicon glyphicon-trash"}))),d.a.createElement("li",null,d.a.createElement("a",{onClick:function(){return Y("json"),M("SAVE"),void R(!0)}}," ",d.a.createElement(E.c,null)," ")),d.a.createElement("li",{style:{float:"right"}},d.a.createElement("a",{onClick:function(){Y("json"),L(!1),x(!0!==O)}},d.a.createElement("i",{className:"glyphicon glyphicon-plus"})))),ue,pe,me)},C=function(e){var t=e.showEditMode,n=e.setShowEditMode,a=e.title,c=e.updateTrack,o=e.index,r=Object(f.useState)(a),l=u()(r,2),i=l[0],s=l[1],p=Object(f.useRef)(null),m=Object(f.useRef)(null);function h(e){"Escape"===e.key?p.current.click():"Enter"===e.key&&m.current.click()}Object(f.useEffect)((function(){return window.removeEventListener("keydown",h,!1),window.addEventListener("keydown",h,!1),function(){window.removeEventListener("keydown",h,!1)}}),[a]),Object(f.useEffect)((function(){!0===t&&s(a)}),[t]);var y=Object(f.useRef)();Object(w.b)(y,(function(e){"edit-button"!==e.target.className&&n(!1)}));var k,E=null===a?"Track ".concat(o+1):a;return k=!0===t?d.a.createElement("div",{className:"input-wrapper"},d.a.createElement("input",{type:"text",placeholder:"",value:a,onChange:function(e){return c(o,e.target.value)},autoFocus:!0}),d.a.createElement("a",{ref:p,className:"undo-title-change",onClick:function(){c(o,i),n(!1)}},d.a.createElement(S.b,null)),d.a.createElement("a",{ref:m,className:"save-changes",onClick:function(){return s(a),void n(!1)}})):d.a.createElement("h2",null,E),d.a.createElement("div",{className:"sample-set-title"},d.a.createElement("div",{ref:y,className:"title-wrapper"},k))},P=function(e){var t=e.index,n=e.title,a=e.color,c=e.keyZoneMode,o=e.trackAudioType,r=e.updateTrack;function l(e){r(t,n,a,e)}function i(e){r(t,n,a,c,e)}return d.a.createElement("div",{className:"track-keyzone-mode-menu"},d.a.createElement("div",{className:"track-audio-type-menu-container"},d.a.createElement("ul",null,d.a.createElement("li",null,d.a.createElement("a",{onClick:function(){return i("sample-trig")},className:"sample-trig"===o?"is-active":""},"Trig")),d.a.createElement("li",null,d.a.createElement("a",{onClick:function(){return i("sample-slice")},className:"sample-slice"===o?"is-active":""},"Slice")))),d.a.createElement("div",{style:{opacity:"sample-trig"==o?"1":"0"},className:"keyzone-mode-menu-container"},d.a.createElement("span",null,"Auto Split:"),d.a.createElement("ul",null,d.a.createElement("li",null,d.a.createElement("a",{onClick:function(){return l("all-full")},className:"all-full"===c?"is-active":""},"Off")),d.a.createElement("li",null,d.a.createElement("a",{onClick:function(){return l("split-full")},className:"split-full"===c?"is-active":""},"Auto")),d.a.createElement("li",null,d.a.createElement("a",{onClick:function(){return l("split-narrow")},className:"split-narrow"===c?"is-active":""},"Narrow")))))},L=function(e){var t=[null,null,null,null,null],n=e.index,a=e.track,c=e.color,o=e.updateTrackClips,r=e.sketchFolder,l=Object(f.useState)(t),s=u()(l,2),p=s[0],h=s[1],y=Object(f.useState)(!1),S=u()(y,2),j=S[0],b=S[1],g=Object(f.useState)(!1),O=u()(g,2),x=O[0],T=O[1],L=Object(f.useRef)();function F(){return D.apply(this,arguments)}function D(){return(D=i()(m.a.mark((function t(){var a,c,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=(a="/home/pi"+e.sketchFolder).split("/").join("+++"),t.next=4,fetch("http://".concat(window.location.hostname,":3000/track/").concat(a.split("/").join("+++"),":").concat(n+1),{method:"GET",headers:{"Content-Type":"application/json"}});case 4:return c=t.sent,t.next=7,c.json();case 7:(o=t.sent)&&h(o);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(w.b)(L,(function(){return T(!1)})),Object(f.useEffect)((function(){F()}),[]),Object(f.useEffect)((function(){e.track&&null!==e.track&&(h(t),F())}),[e.track]);var A;return!0===x&&(A=d.a.createElement("div",{className:"color-picker-container"},d.a.createElement(k.a,{color:c,onChange:function(t){e.updateTrack(n,a.name,t.hex)}}))),d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"sample-set",style:{backgroundColor:e.color}},d.a.createElement("div",{ref:L,className:"edit-menu-container"},d.a.createElement("ul",{className:"edit-menu"},d.a.createElement("li",null,d.a.createElement("a",{className:"edit-button",onClick:function(){return b(1!=j)}},d.a.createElement(v.a,null),d.a.createElement("span",{className:"edit-button"}))),d.a.createElement("li",null,d.a.createElement("a",{className:"color-picker",onClick:function(){return T(1!=x)}},d.a.createElement(E.d,null)))),A),d.a.createElement(C,{showEditMode:j,title:a.name,index:n,setShowEditMode:b,updateTrack:e.updateTrack}),d.a.createElement(P,{index:n,title:a.name,color:c,keyZoneMode:a.keyzone_mode,trackAudioType:a.trackAudioType,updateTrack:e.updateTrack}),d.a.createElement(N,{index:n,samples:"sample-loop"===a.trackAudioType?a.clips:p,setSamples:h,samplesArray:t,getTrackSampleSet:F,sampleSetMode:a.trackAudioType,keyZoneMode:a.keyzone_mode,updateTrackClips:o,sketchFolder:r})))},F=n(4);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M=Object(f.lazy)((function(){return n.e(14).then(n.bind(null,420))}));t.default=function(e){var t,n,a,o=e.colorsArray,r=Object(f.useState)(null),l=u()(r,2),s=l[0],p=l[1],h=Object(f.useState)(null),k=u()(h,2),E=k[0],v=k[1],S=Object(f.useState)(null),w=u()(S,2),j=w[0],b=w[1],g=Object(f.useState)(!1),O=u()(g,2),x=O[0],N=O[1],C=Object(f.useState)(!1),P=u()(C,2),D=P[0],z=P[1],B=Object(f.useState)(null),I=u()(B,2),R=I[0],J=I[1],G=Object(f.useState)(null),H=u()(G,2),K=H[0],Z=H[1];function V(){return(V=i()(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://".concat(window.location.hostname,":3000/sketchinfo/"),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,p(n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=i()(m.a.mark((function e(){var t,n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.lastSelectedSketch,e.next=3,fetch("http://".concat(window.location.hostname,":3000/sketch/").concat(t.split("/").join("+++")),{method:"GET",headers:{"Content-Type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,v(a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){return U.apply(this,arguments)}function U(){return(U=i()(m.a.mark((function e(t){var n,a,c,o,r,l,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=E,t&&"string"==typeof t&&(n.name=t),a=JSON.stringify(E),(c=s.lastSelectedSketch).indexOf("/zynthian/")>-1&&(c=c.split("/zynthian/")[1]),o=s.lastSelectedSketch.split("/")[s.lastSelectedSketch.split("/").length-1],r=new Blob([a],{type:"application/json"}),l=new FormData,i=c.split(o)[0],t&&"string"==typeof t&&(o=t),l.append("file",r,o),y.a.post("http://".concat(window.location.hostname,":3000/upload/").concat(i.split("/").join("+++")),l).then((function(e){t&&"string"==typeof t&&(X(t),v(n))}));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e){return q.apply(this,arguments)}function q(){return(q=i()(m.a.mark((function e(t){var n,a,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N(!1),n=A(A({},s),{},{lastSelectedSketch:t.split("/home/pi")[1]}),a=new Blob([JSON.stringify(n)],{type:"application/json"}),(c=new FormData).append("file",a,".cache.json"),y.a.post("http://".concat(window.location.hostname,":3000/upload/zynthian-my-data+++sessions+++"),c).then((function(e){p(n)}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return(Q=i()(m.a.mark((function e(t){var n,a,c,o,r,l,i,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t+"/",e.next=3,fetch("http://".concat(window.location.hostname,":3000/createfolder"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullPath:n})});case 3:return a=e.sent,e.next=6,a.json();case 6:return e.sent,c=s.lastSelectedSketch.split("/")[s.lastSelectedSketch.split("/").length-1],(o=s.lastSelectedSketch.split(c)[0]).indexOf("/zynthian-my-data/")>-1&&(o=o.split("/zynthian-my-data/")[1]),e.next=12,fetch("http://".concat(window.location.hostname,":3000/folder/").concat("+++home+++pi+++zynthian-my-data+++"+o.split("/").join("+++").split(" ").join("%20")),{method:"GET",headers:{"Content-Type":"application/json"}});case 12:return r=e.sent,e.next=15,r.json();case 15:l=e.sent,i=[],u=[],l.forEach((function(e,t){var a=e.path.split("/home/pi/zynthian-my-data/"+o)[1];if(-1===a.indexOf("/")){i.push(e.path);var c=n+a;u.push(c)}})),W(i,u,!1,0);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e,t,n,a){return $.apply(this,arguments)}function $(){return($=i()(m.a.mark((function e(t,n,a,c){var o,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=t[c],r=n[c],fetch("http://".concat(window.location.hostname,":3000/copypaste"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({previousPath:o,destinationPath:r,deleteOrigin:a})}).then(function(){var e=i()(m.a.mark((function e(o){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c===t.length-1||W(t,n,a,c+1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e,t,n,a,c){var o=E.tracks[e],r=A(A({},o),{},{name:t,color:n,keyzone_mode:a&&null!==a?a:o.keyzone_mode,trackAudioType:c&&null!==c?c:o.trackAudioType}),l=[];E.tracks.forEach((function(t,n){n===e?l.push(r):l.push(t)}));var i=A(A({},E),{},{tracks:l});v(i)}function te(e,t,n,a,c,o){return ne.apply(this,arguments)}function ne(){return(ne=i()(m.a.mark((function e(t,n,a,o,r,l){var i,s,u,p,f;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=E.tracks[n],"remove"!==t){e.next=12;break}return u=E.tracks[n].clips[a].path,e.next=5,fetch("http://".concat(window.location.hostname,":3000/delete"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullPath:u})});case 5:return p=e.sent,e.next=8,p.json();case 8:e.sent,s=A(A({},i),{},{clips:[].concat(c()(i.clips.slice(0,n)),[A(A({},i.clips[a]),{},{path:null})],c()(i.clips.slice(n+1,i.clips.length-1)))}),e.next=13;break;case 12:"insert"===t?console.log("insert clip into track"):"upload"===t&&console.log("upload clip to track");case 13:f=A(A({},E),{},{tracks:[].concat(c()(E.tracks.slice(0,n)),[s],c()(E.tracks.slice(n+1,E.tracks.length-1)))}),v(f),Y();case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e){J(e),z(!0)}if(Object(f.useEffect)((function(){!function(){V.apply(this,arguments)}(),setTimeout((function(){document.getElementById("sample-editor").clientHeight}),100)}),[]),Object(f.useEffect)((function(){null!==s&&function(){_.apply(this,arguments)}()}),[s]),Object(f.useEffect)((function(){null!==E&&b(E.tracks)}),[E]),null!==j){var ce=s.lastSelectedSketch.split("/")[s.lastSelectedSketch.split("/").length-1],oe=s.lastSelectedSketch.split(ce)[0];oe.indexOf("/zynthian/")>-1&&(oe="/"+oe.split("/zynthian/")[1]),t=j.map((function(e,t){if(t<10)return d.a.createElement(L,{key:t,index:t,color:e.color&&"#000000"!==e.color?e.color:o[t],updateTrack:ee,onShowPatternEditor:ae,track:e,updateTrackClips:te,sketchFolder:oe})}))}!0===x&&(n=d.a.createElement(T,{actionType:K,setShowLoadFromSketchPadDialog:N,fileType:"sketch.json",loadSketch:X,saveSketch:function(e){return Q.apply(this,arguments)}})),!0===D&&(a=d.a.createElement(f.Suspense,{fallback:d.a.createElement(F.a,null)},d.a.createElement(M,{trackIndex:R})));var re={height:window.innerHeight-165};return window.innerHeight<865&&(re["overflow-y"]="scroll"),d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"sample-editor-menu"},d.a.createElement("ul",null,d.a.createElement("li",null,d.a.createElement("a",null,"New")),d.a.createElement("li",null,d.a.createElement("a",{onClick:function(){N(!0!==x),Z("LOAD")}},"Load")),d.a.createElement("li",null,d.a.createElement("a",{onClick:Y},"Save")),d.a.createElement("li",null,d.a.createElement("a",{onClick:function(){N(!0!==x),Z("SAVE")}},"Save As...")),null!==s?d.a.createElement("li",{style:{float:"right"}},d.a.createElement("a",null,s.lastSelectedSketch)):"")),d.a.createElement("div",{id:"sample-editor",style:re},t),n,a)}},39:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return r}));var a=n(0);function c(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=t?1e3:1024;if(Math.abs(e)<a)return e+" B";var c=t?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],o=-1,r=Math.pow(10,n);do{e/=a,++o}while(Math.round(Math.abs(e)*r)/r>=a&&o<c.length-1);return e.toFixed(n)+" "+c[o]}function o(e,t){Object(a.useEffect)((function(){var n=function(n){e.current&&!e.current.contains(n.target)&&t(n)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),function(){document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[e,t])}function r(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e}),[e]),t.current}}}]);